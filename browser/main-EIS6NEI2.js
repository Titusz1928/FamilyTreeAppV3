import{$ as Se,$a as ir,$b as sl,A as Ut,Aa as qd,Ab as de,Ac as kw,B as Fd,Ba as ke,Bb as He,Bc as Ow,C as $c,Ca as ne,Cb as zn,Cc as al,D as er,Da as nr,Db as Zc,Dc as ko,E as Wr,Ea as Te,Eb as We,Ec as Mw,F as Vd,Fa as Co,Fb as Ai,Fc as Nw,G as Kr,Ga as Jv,Gb as Kt,H as Ne,Ha as Ao,Hb as ht,I as Ld,Ia as Zv,Ib as Si,Ic as ef,J as En,Ja as xt,Jb as Xr,Jc as tf,K as wi,Ka as un,Kb as zt,L as qc,La as So,Lb as $t,Lc as Oo,M as Ud,Ma as Gd,Mb as pw,Mc as Mo,N as lt,Na as Yr,Nb as Le,Nc as nf,O as Hv,Oa as Qr,Ob as Yd,P as jd,Pa as ew,Pb as mw,Q as tr,Qa as tw,Qb as dt,R as bi,Ra as nw,Rb as nt,S as Bd,Sa as iw,Sb as Jr,T as Wv,Ta as rw,Tb as el,U as Kv,Ua as sw,Ub as tl,V as Yv,Va as ow,Vb as gw,W as Gc,Wa as Bt,Wb as nl,X as Ht,Xa as xo,Xb as il,Y as jt,Ya as kt,Yb as Qd,Z as Tn,Za as O,Zb as rl,_ as Oe,_a as Wc,_b as Xd,a as N,aa as Ii,ab as aw,ac as rr,b as ye,ba as Io,bb as Kc,bc as _w,c as Bv,ca as z,cb as Yc,cc as ol,d as mx,da as ee,db as Qc,dc as yw,e as vi,ea as Qv,eb as Ti,ec as vw,f as E,fa as $,fb as Xc,fc as Ot,g as Pt,ga as zd,gb as Hd,gc as ww,h as zv,ha as D,hb as Ro,hc as bw,i as Lt,ia as j,ib as Je,ic as Iw,j as Pd,ja as tt,jb as cw,jc as wt,k as kd,ka as $d,kb as Rt,kc as Ew,l as re,la as Eo,lb as lw,lc as Po,m as _t,ma as me,mb as Wd,mc as An,n as $v,na as te,nb as Cn,nc as Tw,o as qv,oa as ge,ob as uw,oc as Cw,p as In,pa as Wt,pb as Ci,pc as sr,q as Od,qa as Xv,qb as ut,qc as Aw,r as Md,ra as Ei,rb as hn,rc as Sw,s as Nd,sa as on,sb as Do,sc as J,t as yt,ta as St,tb as vt,tc as xw,u as G,ua as an,ub as Jc,uc as Jd,v as Zi,va as cn,vb as Kd,vc as Rw,w as zc,wa as Hc,wb as hw,wc as Dw,x as Gv,xa as ln,xb as dw,xc as $n,y as se,ya as To,yb as fw,yc as Zd,z as Hr,za as Ve,zb as oe,zc as Pw}from"./chunk-TN3HTI7R.js";var sf=class{};var or=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var of=class{encodeKey(e){return Fw(e)}encodeValue(e){return Fw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _x(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var yx=/%(\d[a-f0-9])/gi,vx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Fw(n){return encodeURIComponent(n).replace(yx,(e,t)=>vx[t]??e)}function cl(n){return`${n}`}var xi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new of,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_x(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(cl):[cl(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(cl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(cl(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var af=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function wx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Vw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Lw(n){return typeof Blob<"u"&&n instanceof Blob}function Uw(n){return typeof FormData<"u"&&n instanceof FormData}function bx(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var No=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(wx(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new or,this.context??=new af,!this.params)this.params=new xi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Vw(this.body)||Lw(this.body)||Uw(this.body)||bx(this.body)?this.body:this.body instanceof xi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Uw(this.body)?null:Lw(this.body)?this.body.type||null:Vw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof xi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,v)=>g.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,v)=>g.set(v,e.setParams[v]),d)),new n(t,i,o,{params:d,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},Ww=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ww||{}),cf=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new or,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Fo=class n extends cf{constructor(e={}){super(e),this.type=Ww.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function rf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Kw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof No)s=t;else{let l;r.headers instanceof or?l=r.headers:l=new or(r.headers);let u;r.params&&(r.params instanceof xi?u=r.params:u=new xi({fromObject:r.params})),s=new No(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=G(s).pipe(wi(l=>this.handler.handle(l)));if(t instanceof No||r.observe==="events")return o;let c=o.pipe(Ne(l=>l instanceof Fo));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(se(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(se(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new xi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,rf(r,i))}post(t,i,r={}){return this.request("POST",t,rf(r,i))}put(t,i,r={}){return this.request("PUT",t,rf(r,i))}static{this.\u0275fac=function(i){return new(i||n)(D(sf))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();var Ix=new $("");var Ex=new $(""),jw="b",Bw="h",zw="s",$w="st",qw="u",Gw="rt",ll=new $(""),Tx=["GET","HEAD"];function Cx(n,e){let v=j(ll),{isCacheActive:t}=v,i=Bv(v,["isCacheActive"]),{transferCache:r,method:s}=n;if(!t||r===!1||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!Tx.includes(s)||!i.includeRequestsWithAuthHeaders&&Ax(n)||i.filter?.(n)===!1)return e(n);let o=j(Gd),c=j(Ex,{optional:!0}),l=ko(j(xt));if(c&&!l)throw new Se(2803,!1);let u=l&&c?Dx(n.url,c):n.url,d=xx(n,u),p=o.get(d,null),g=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(g=r.includeHeaders),p){let{[jw]:S,[Gw]:P,[Bw]:k,[zw]:M,[$w]:B,[qw]:H}=p,Q=S;switch(P){case"arraybuffer":Q=new TextEncoder().encode(S).buffer;break;case"blob":Q=new Blob([S]);break}let Ie=new or(k);return G(new Fo({body:Q,headers:Ie,status:M,statusText:B,url:H}))}return e(n).pipe(Oe(S=>{S instanceof Fo&&l&&o.set(d,{[jw]:S.body,[Bw]:Sx(S.headers,g),[zw]:S.status,[$w]:S.statusText,[qw]:u,[Gw]:n.responseType})}))}function Ax(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function Sx(n,e){if(!e)return{};let t={};for(let i of e){let r=n.getAll(i);r!==null&&(t[i]=r)}return t}function Hw(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function xx(n,e){let{params:t,method:i,responseType:r}=n,s=Hw(t),o=n.serializeBody();o instanceof URLSearchParams?o=Hw(o):typeof o!="string"&&(o="");let c=[i,r,e,o,s].join("|"),l=Rx(c);return l}function Rx(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Yw(n){return[{provide:ll,useFactory:()=>(Xc("NgHttpTransferCache"),N({isCacheActive:!0},n))},{provide:Ix,useValue:Cx,multi:!0,deps:[Gd,ll]},{provide:sl,multi:!0,useFactory:()=>{let e=j(rr),t=j(ll);return()=>{_w(e).then(()=>{t.isCacheActive=!1})}}}]}function Dx(n,e){let t=new URL(n,"resolve://").origin,i=e[t];return i?n.replace(t,i):n}var hf=class extends Sw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},df=class n extends hf{static makeCurrent(){Aw(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ox();return t==null?null:Mx(t)}resetBaseElement(){Vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zd(document.cookie,e)}},Vo=null;function Ox(){return Vo=Vo||document.querySelector("base"),Vo?Vo.getAttribute("href"):null}function Mx(n){return new URL(n,document.baseURI).pathname}var ff=class{addToWindow(e){Ii.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new Se(5103,!1);return s},Ii.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ii.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Ii.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(c=>{c.whenStable(o)})};Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?sr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Nx=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),pf=new $(""),Jw=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Se(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(D(pf),D(ne))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ul=class{constructor(e){this._doc=e}},lf="ng-app-id",Zw=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ko(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${lf}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(lf),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(lf,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(Ao),D(So,8),D(xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_f=/%COMP%/g,e0="%COMP%",Fx=`_nghost-${e0}`,Vx=`_ngcontent-${e0}`,Lx=!0,Ux=new $("",{providedIn:"root",factory:()=>Lx});function jx(n){return Vx.replace(_f,n)}function Bx(n){return Fx.replace(_f,n)}function t0(n,e){return e.map(t=>t.replace(_f,n))}var hl=(()=>{class n{constructor(t,i,r,s,o,c,l,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=ko(c),this.defaultRenderer=new Lo(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Eo.ShadowDom&&(i=ye(N({},i),{encapsulation:Eo.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof dl?r.applyToHost(t):r instanceof Uo&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Eo.Emulated:s=new dl(l,u,i,this.appId,d,o,c,p);break;case Eo.ShadowDom:return new mf(l,u,t,i,o,c,this.nonce,p);default:s=new Uo(l,u,i,d,o,c,p);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(D(Jw),D(Zw),D(Ao),D(Ux),D(J),D(xt),D(ne),D(So))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Lo=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Qw(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Qw(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Se(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=uf[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=uf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(xo.DashCase|xo.Important)?e.style.setProperty(t,i,r&xo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&xo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Qw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var mf=class extends Lo{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=t0(r.id,r.styles);for(let d of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=d,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uo=class extends Lo{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?t0(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dl=class extends Uo{constructor(e,t,i,r,s,o,c,l){let u=r+"-"+i.id;super(e,t,i,s,o,c,l,u),this.contentAttr=jx(u),this.hostAttr=Bx(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},zx=(()=>{class n extends ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Xw=["alt","control","meta","shift"],$x={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qx={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gx=(()=>{class n extends ul{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),Xw.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),o+=u+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=$x[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Xw.forEach(o=>{if(o!==r){let c=qx[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function Hx(){df.makeCurrent()}function Wx(){return new nr}function Kx(){return Jv(document),document}var Yx=[{provide:xt,useValue:Ow},{provide:Zv,useValue:Hx,multi:!0},{provide:J,useFactory:Kx,deps:[]}],n0=yw(ww,"browser",Yx),Qx=new $(""),Xx=[{provide:nl,useClass:ff,deps:[]},{provide:gw,useClass:il,deps:[ne,Qd,nl]},{provide:il,useClass:il,deps:[ne,Qd,nl]}],Jx=[{provide:Xv,useValue:"root"},{provide:nr,useFactory:Wx,deps:[]},{provide:pf,useClass:zx,multi:!0,deps:[J,ne,xt]},{provide:pf,useClass:Gx,multi:!0,deps:[J]},hl,Zw,Jw,{provide:Yc,useExisting:hl},{provide:Nw,useClass:Nx,deps:[]},[]],i0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ao,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(D(Qx,12))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[...Jx,...Xx],imports:[kw,bw]})}}return n})();var r0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=D(Zx),r},providedIn:"root"})}}return n})(),Zx=(()=>{class n extends yf{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Bt.NONE:return i;case Bt.HTML:return Qr(i,"HTML")?Yr(i):ow(this._doc,String(i)).toString();case Bt.STYLE:return Qr(i,"Style")?Yr(i):i;case Bt.SCRIPT:if(Qr(i,"Script"))return Yr(i);throw new Se(5200,!1);case Bt.URL:return Qr(i,"URL")?Yr(i):sw(String(i));case Bt.RESOURCE_URL:if(Qr(i,"ResourceURL"))return Yr(i);throw new Se(5201,!1);default:throw new Se(5202,!1)}}bypassSecurityTrustHtml(t){return ew(t)}bypassSecurityTrustStyle(t){return tw(t)}bypassSecurityTrustScript(t){return nw(t)}bypassSecurityTrustUrl(t){return iw(t)}bypassSecurityTrustResourceUrl(t){return rw(t)}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gf=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(gf||{});function s0(...n){let e=[],t=new Set,i=t.has(gf.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of n)t.add(s),r.length&&e.push(r);return Wt([[],Iw(),t.has(gf.NoHttpTransferCache)||i?[]:Yw({}),e])}var ce="primary",ea=Symbol("RouteTitle"),Tf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rs(n){return new Tf(n)}function eR(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function tR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sn(n[t],e[t]))return!1;return!0}function Sn(n,e){let t=n?Cf(n):void 0,i=e?Cf(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!g0(n[r],e[r]))return!1;return!0}function Cf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function g0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function _0(n){return n.length>0?n[n.length-1]:null}function Di(n){return zc(n)?n:rl(n)?yt(Promise.resolve(n)):G(n)}var nR={exact:v0,subset:w0},y0={exact:iR,subset:rR,ignored:()=>!0};function o0(n,e,t){return nR[t.paths](n.root,e.root,t.matrixParams)&&y0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function iR(n,e){return Sn(n,e)}function v0(n,e,t){if(!cr(n.segments,e.segments)||!ml(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!v0(n.children[i],e.children[i],t))return!1;return!0}function rR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>g0(n[t],e[t]))}function w0(n,e,t){return b0(n,e,e.segments,t)}function b0(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!cr(r,t)||e.hasChildren()||!ml(r,t,i))}else if(n.segments.length===t.length){if(!cr(n.segments,t)||!ml(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!w0(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!cr(n.segments,r)||!ml(n.segments,r,i)||!n.children[ce]?!1:b0(n.children[ce],e,s,i)}}function ml(n,e,t){return e.every((i,r)=>y0[t](n[r].parameters,i.parameters))}var Gn=class{constructor(e=new xe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){return aR.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gl(this)}},ar=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rs(this.parameters),this._parameterMap}toString(){return E0(this)}};function sR(n,e){return cr(n,e)&&n.every((t,i)=>Sn(t.parameters,e[i].parameters))}function cr(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function oR(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ce&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ce&&(t=t.concat(e(r,i)))}),t}var ta=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>new ss,providedIn:"root"})}}return n})(),ss=class{parse(e){let t=new Sf(e);return new Gn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jo(e.root,!0)}`,i=uR(e.queryParams),r=typeof e.fragment=="string"?`#${cR(e.fragment)}`:"";return`${t}${i}${r}`}},aR=new ss;function gl(n){return n.segments.map(e=>E0(e)).join("/")}function jo(n,e){if(!n.hasChildren())return gl(n);if(e){let t=n.children[ce]?jo(n.children[ce],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ce&&i.push(`${r}:${jo(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=oR(n,(i,r)=>r===ce?[jo(n.children[ce],!1)]:[`${r}:${jo(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${gl(n)}/${t[0]}`:`${gl(n)}/(${t.join("//")})`}}function I0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fl(n){return I0(n).replace(/%3B/gi,";")}function cR(n){return encodeURI(n)}function Af(n){return I0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _l(n){return decodeURIComponent(n)}function a0(n){return _l(n.replace(/\+/g,"%20"))}function E0(n){return`${Af(n.path)}${lR(n.parameters)}`}function lR(n){return Object.entries(n).map(([e,t])=>`;${Af(e)}=${Af(t)}`).join("")}function uR(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${fl(t)}=${fl(r)}`).join("&"):`${fl(t)}=${fl(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var hR=/^[^\/()?;#]+/;function wf(n){let e=n.match(hR);return e?e[0]:""}var dR=/^[^\/()?;=#]+/;function fR(n){let e=n.match(dR);return e?e[0]:""}var pR=/^[^=?&#]+/;function mR(n){let e=n.match(pR);return e?e[0]:""}var gR=/^[^&#]+/;function _R(n){let e=n.match(gR);return e?e[0]:""}var Sf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ce]=new xe(e,t)),i}parseSegment(){let e=wf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new ar(_l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=wf(this.remaining);r&&(i=r,this.capture(i))}e[_l(t)]=_l(i)}parseQueryParam(e){let t=mR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=_R(this.remaining);o&&(i=o,this.capture(i))}let r=a0(t),s=a0(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=wf(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ce]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}};function T0(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function C0(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=C0(r);if(i===ce&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new xe(n.segments,e);return yR(t)}function yR(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function Ho(n){return n instanceof Gn}function vR(n,e,t=null,i=null){let r=A0(n);return S0(r,e,t,i)}function A0(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let c=new xe(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=T0(i);return e??r}function S0(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return bf(r,r,r,t,i);let s=wR(e);if(s.toRoot())return bf(r,r,new xe([],{}),t,i);let o=bR(s,r,n),c=o.processChildren?$o(o.segmentGroup,o.index,s.commands):R0(o.segmentGroup,o.index,s.commands);return bf(r,o.segmentGroup,c,t,i)}function yl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wo(n){return typeof n=="object"&&n!=null&&n.outlets}function bf(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=x0(n,e,t);let c=T0(C0(o));return new Gn(c,s,r)}function x0(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=x0(s,e,t)}),new xe(n.segments,i)}var vl=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&yl(i[0]))throw new Se(4003,!1);let r=i.find(Wo);if(r&&r!==_0(i))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wR(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vl(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new vl(t,e,i)}var ts=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function bR(n,e,t){if(n.isAbsolute)return new ts(e,!0,0);if(!t)return new ts(e,!1,NaN);if(t.parent===null)return new ts(t,!0,0);let i=yl(n.commands[0])?0:1,r=t.segments.length-1+i;return IR(t,r,n.numberOfDoubleDots)}function IR(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Se(4005,!1);r=i.segments.length}return new ts(i,!1,r-s)}function ER(n){return Wo(n[0])?n[0].outlets:{[ce]:n}}function R0(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return $o(n,e,t);let i=TR(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,i.pathIndex),{});return s.children[ce]=new xe(n.segments.slice(i.pathIndex),n.children),$o(s,0,r)}else return i.match&&r.length===0?new xe(n.segments,{}):i.match&&!n.hasChildren()?xf(n,e,t):i.match?$o(n,0,r):xf(n,e,t)}function $o(n,e,t){if(t.length===0)return new xe(n.segments,{});{let i=ER(t),r={};if(Object.keys(i).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=$o(n.children[ce],e,t);return new xe(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=R0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new xe(n.segments,r)}}function TR(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(Wo(c))break;let l=`${c}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!l0(l,u,o))return s;i+=2}else{if(!l0(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function xf(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Wo(s)){let l=CR(s.outlets);return new xe(i,l)}if(r===0&&yl(t[0])){let l=n.segments[e];i.push(new ar(l.path,c0(t[0]))),r++;continue}let o=Wo(s)?s.outlets[ce]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&yl(c)?(i.push(new ar(o,c0(c))),r+=2):(i.push(new ar(o,{})),r++)}return new xe(i,{})}function CR(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=xf(new xe([],{}),0,i))}),e}function c0(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function l0(n,e,t){return n==t.path&&Sn(e,t.parameters)}var qo="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),Yt=class{constructor(e,t){this.id=e,this.url=t}},os=class extends Yt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=it.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends Yt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gt||{}),wl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(wl||{}),qn=class extends Yt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ri=class extends Yt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=it.NavigationSkipped}},Ko=class extends Yt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bl=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rf=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Df=class extends Yt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pf=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kf=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Of=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mf=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nf=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ff=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vf=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lf=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Il=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=it.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Yo=class{},as=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function AR(n,e){return n.providers&&!n._injector&&(n._injector=Wd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dn(n){return n.outlet||ce}function SR(n,e){let t=n.filter(i=>dn(i)===e);return t.push(...n.filter(i=>dn(i)!==e)),t}function na(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Uf=class{get injector(){return na(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ia(this.rootInjector),this.attachRef=null}},ia=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Uf(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(D(Ei))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),El=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=jf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=jf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Bf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Bf(e,this._root).map(t=>t.value)}};function jf(n,e){if(n===e.value)return e;for(let t of e.children){let i=jf(n,t);if(i)return i}return null}function Bf(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Bf(n,t);if(i.length)return i.unshift(e),i}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function es(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Tl=class extends El{constructor(e,t){super(e),this.snapshot=t,Qf(this,e)}toString(){return this.snapshot.toString()}};function D0(n){let e=xR(n),t=new _t([new ar("",{})]),i=new _t({}),r=new _t({}),s=new _t({}),o=new _t(""),c=new cs(t,i,s,o,r,ce,n,e.root);return c.snapshot=e.root,new Tl(new qt(c,[]),e)}function xR(n){let e={},t={},i={},r="",s=new ns([],e,i,r,t,ce,n,null,{});return new Al("",new qt(s,[]))}var cs=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(se(u=>u[ea]))??G(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cl(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&k0(r)&&(i.resolve[ea]=r.title),i}var ns=class{get title(){return this.data?.[ea]}constructor(e,t,i,r,s,o,c,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Al=class extends El{constructor(e,t){super(t),this.url=e,Qf(this,t)}toString(){return P0(this._root)}};function Qf(n,e){e.value._routerState=n,e.children.forEach(t=>Qf(n,t))}function P0(n){let e=n.children.length>0?` { ${n.children.map(P0).join(", ")} } `:"";return`${n.value}${e}`}function If(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sn(e.params,t.params)||n.paramsSubject.next(t.params),tR(e.url,t.url)||n.urlSubject.next(t.url),Sn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zf(n,e){let t=Sn(n.params,e.params)&&sR(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||zf(n.parent,e.parent))}function k0(n){return typeof n.title=="string"||n.title===null}var RR=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new ke,this.deactivateEvents=new ke,this.attachEvents=new ke,this.detachEvents=new ke,this.parentContexts=j(ia),this.location=j(Ti),this.changeDetector=j(Ot),this.inputBinder=j(Pl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new $f(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[St]})}}return n})(),$f=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===cs?this.route:e===ia?this.childContexts:this.parent.get(e,t)}},Pl=new $(""),u0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Hr([i.queryParams,i.params,i.data]).pipe(jt(([s,o,c],l)=>(c=N(N(N({},s),o),c),l===0?G(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=Cw(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function DR(n,e,t){let i=Qo(n,e._root,t?t._root:void 0);return new Tl(i,e)}function Qo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=PR(n,e,t);return new qt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Qo(n,c)),o}}let i=kR(e.value),r=e.children.map(s=>Qo(n,s));return new qt(i,r)}}function PR(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qo(n,i,r);return Qo(n,i)})}function kR(n){return new cs(new _t(n.url),new _t(n.params),new _t(n.queryParams),new _t(n.fragment),new _t(n.data),n.outlet,n.component,n)}var Xo=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},O0="ngNavigationCancelingError";function Sl(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=M0(!1,Gt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function M0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[O0]=!0,t.cancellationCode=e,t}function OR(n){return N0(n)&&Ho(n.url)}function N0(n){return!!n&&n[O0]}var MR=(n,e,t,i)=>se(r=>(new qf(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),qf=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),If(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=es(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=es(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=es(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=es(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Lf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ff(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(If(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),If(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},xl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},is=class{constructor(e,t){this.component=e,this.route=t}};function NR(n,e,t){let i=n._root,r=e?e._root:null;return Bo(i,r,t,[i.value])}function FR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function us(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Qv(n)?n:e.get(n):i}function Bo(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=es(e);return n.children.forEach(o=>{VR(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Go(c,t.getContext(o),r)),r}function VR(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=LR(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new xl(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Bo(n,e,c?c.children:null,i,r):Bo(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new is(c.outlet.component,o))}else o&&Go(e,c,r),r.canActivateChecks.push(new xl(i)),s.component?Bo(n,null,c?c.children:null,i,r):Bo(n,null,t,i,r);return r}function LR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!cr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cr(n.url,e.url)||!Sn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zf(n,e)||!Sn(n.queryParams,e.queryParams);case"paramsChange":default:return!zf(n,e)}}function Go(n,e,t){let i=es(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Go(o,e.children.getContext(s),t):Go(o,null,t):Go(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new is(e.outlet.component,r)):t.canDeactivateChecks.push(new is(null,r)):t.canDeactivateChecks.push(new is(null,r))}function ra(n){return typeof n=="function"}function UR(n){return typeof n=="boolean"}function jR(n){return n&&ra(n.canLoad)}function BR(n){return n&&ra(n.canActivate)}function zR(n){return n&&ra(n.canActivateChild)}function $R(n){return n&&ra(n.canDeactivate)}function qR(n){return n&&ra(n.canMatch)}function F0(n){return n instanceof Gv||n?.name==="EmptyError"}var pl=Symbol("INITIAL_VALUE");function ls(){return jt(n=>Hr(n.map(e=>e.pipe(lt(1),Ht(pl)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===pl)return pl;if(t===!1||GR(t))return t}return!0}),Ne(e=>e!==pl),lt(1)))}function GR(n){return Ho(n)||n instanceof Xo}function HR(n,e){return Ut(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?G(ye(N({},t),{guardsResult:!0})):WR(o,i,r,n).pipe(Ut(c=>c&&UR(c)?KR(i,s,n,e):G(c)),se(c=>ye(N({},t),{guardsResult:c})))})}function WR(n,e,t,i){return yt(n).pipe(Ut(r=>ZR(r.component,r.route,t,e,i)),bi(r=>r!==!0,!0))}function KR(n,e,t,i){return yt(e).pipe(wi(r=>$c(QR(r.route.parent,i),YR(r.route,i),JR(n,r.path,t),XR(n,r.route,t))),bi(r=>r!==!0,!0))}function YR(n,e){return n!==null&&e&&e(new Vf(n)),G(!0)}function QR(n,e){return n!==null&&e&&e(new Nf(n)),G(!0)}function XR(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return G(!0);let r=i.map(s=>er(()=>{let o=na(e)??t,c=us(s,o),l=BR(c)?c.canActivate(e,n):on(o,()=>c(e,n));return Di(l).pipe(bi())}));return G(r).pipe(ls())}function JR(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>FR(o)).filter(o=>o!==null).map(o=>er(()=>{let c=o.guards.map(l=>{let u=na(o.node)??t,d=us(l,u),p=zR(d)?d.canActivateChild(i,n):on(u,()=>d(i,n));return Di(p).pipe(bi())});return G(c).pipe(ls())}));return G(s).pipe(ls())}function ZR(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(c=>{let l=na(e)??r,u=us(c,l),d=$R(u)?u.canDeactivate(n,e,t,i):on(l,()=>u(n,e,t,i));return Di(d).pipe(bi())});return G(o).pipe(ls())}function eD(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return G(!0);let s=r.map(o=>{let c=us(o,n),l=jR(c)?c.canLoad(e,t):on(n,()=>c(e,t));return Di(l)});return G(s).pipe(ls(),V0(i))}function V0(n){return zv(Oe(e=>{if(typeof e!="boolean")throw Sl(n,e)}),se(e=>e===!0))}function tD(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return G(!0);let s=r.map(o=>{let c=us(o,n),l=qR(c)?c.canMatch(e,t):on(n,()=>c(e,t));return Di(l)});return G(s).pipe(ls(),V0(i))}var Jo=class{constructor(e){this.segmentGroup=e||null}},Zo=class extends Error{constructor(e){super(),this.urlTree=e}};function Zr(n){return Zi(new Jo(n))}function nD(n){return Zi(new Se(4e3,!1))}function iD(n){return Zi(M0(!1,Gt.GuardRejected))}var Gf=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return G(i);if(r.numberOfChildren>1||!r.children[ce])return nD(`${e.redirectTo}`);r=r.children[ce]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:u,routeConfig:d,url:p,outlet:g,params:v,data:S,title:P}=r,k=on(s,()=>c({params:v,data:S,queryParams:l,fragment:u,routeConfig:d,url:p,outlet:g,title:P}));if(k instanceof Gn)throw new Zo(k);t=k}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Zo(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Gn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new xe(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Se(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Hf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rD(n,e,t,i,r){let s=L0(n,e,t);return s.matched?(i=AR(e,i),tD(i,e,t,r).pipe(se(o=>o===!0?s:N({},Hf)))):G(s)}function L0(n,e,t){if(e.path==="**")return sD(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Hf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||eR)(t,n,e);if(!r)return N({},Hf);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function sD(n){return{matched:!0,parameters:n.length>0?_0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function h0(n,e,t,i){return t.length>0&&cD(n,t,i)?{segmentGroup:new xe(e,aD(i,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&lD(n,t,i)?{segmentGroup:new xe(n.segments,oD(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function oD(n,e,t,i){let r={};for(let s of t)if(kl(n,e,s)&&!i[dn(s)]){let o=new xe([],{});r[dn(s)]=o}return N(N({},i),r)}function aD(n,e){let t={};t[ce]=e;for(let i of n)if(i.path===""&&dn(i)!==ce){let r=new xe([],{});t[dn(i)]=r}return t}function cD(n,e,t){return t.some(i=>kl(n,e,i)&&dn(i)!==ce)}function lD(n,e,t){return t.some(i=>kl(n,e,i))}function kl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uD(n,e,t){return e.length===0&&!n.children[t]}var Wf=class{};function hD(n,e,t,i,r,s,o="emptyOnly"){return new Kf(n,e,t,i,r,o,s).recognize()}var dD=31,Kf=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Gf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){let e=h0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:i})=>{let r=new qt(i,t),s=new Al("",r),o=vR(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ns([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(se(i=>({children:i,rootSnapshot:t})),En(i=>{if(i instanceof Zo)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Jo?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(se(o=>o instanceof qt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return yt(s).pipe(wi(o=>{let c=i.children[o],l=SR(t,o);return this.processSegmentGroup(e,l,c,o,r)}),Kv((o,c)=>(o.push(...c),o)),Ud(null),Wv(),Ut(o=>{if(o===null)return Zr(i);let c=U0(o);return fD(c),G(c)}))}processSegment(e,t,i,r,s,o,c){return yt(t).pipe(wi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(En(u=>{if(u instanceof Jo)return G(null);throw u}))),bi(l=>!!l),En(l=>{if(F0(l))return uD(i,r,s)?G(new Wf):Zr(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return dn(i)!==o&&(o===ce||!kl(r,s,i))?Zr(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Zr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:u,consumedSegments:d,positionalParamSegments:p,remainingSegments:g}=L0(t,r,s);if(!l)return Zr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dD&&(this.allowRedirects=!1));let v=new ns(s,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,d0(r),dn(r),r.component??r._loadedComponent??null,r,f0(r)),S=Cl(v,c,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let P=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(r,P).pipe(Ut(k=>this.processSegment(e,i,t,k.concat(g),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=rD(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(jt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(jt(({routes:u})=>{let d=i._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=l,S=new ns(g,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,d0(i),dn(i),i.component??i._loadedComponent??null,i,f0(i)),P=Cl(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:k,slicedSegments:M}=h0(t,g,v,u);if(M.length===0&&k.hasChildren())return this.processChildren(d,u,k,S).pipe(se(H=>new qt(S,H)));if(u.length===0&&M.length===0)return G(new qt(S,[]));let B=dn(i)===s;return this.processSegment(d,u,k,M,B?ce:s,!0,S).pipe(se(H=>new qt(S,H instanceof qt?[H]:[])))}))):Zr(t)))}getChildConfig(e,t,i){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):eD(e,t,i,this.urlSerializer).pipe(Ut(r=>r?this.configLoader.loadChildren(e,t).pipe(Oe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):iD(t))):G({routes:[],injector:e})}};function fD(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function pD(n){let e=n.value.routeConfig;return e&&e.path===""}function U0(n){let e=[],t=new Set;for(let i of n){if(!pD(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=U0(i.children);e.push(new qt(i.value,r))}return e.filter(i=>!t.has(i))}function d0(n){return n.data||{}}function f0(n){return n.resolve||{}}function mD(n,e,t,i,r,s){return Ut(o=>hD(n,e,t,i,o.extractedUrl,r,s).pipe(se(({state:c,tree:l})=>ye(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function gD(n,e){return Ut(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return G(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of j0(l))o.add(u);let c=0;return yt(o).pipe(wi(l=>s.has(l)?_D(l,i,n,e):(l.data=Cl(l,l.parent,n).resolve,G(void 0))),Oe(()=>c++),Bd(1),Ut(l=>c===o.size?G(t):In))})}function j0(n){let e=n.children.map(t=>j0(t)).flat();return[n,...e]}function _D(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!k0(r)&&(s[ea]=r.title),yD(s,n,e,i).pipe(se(o=>(n._resolvedData=o,n.data=Cl(n,n.parent,t).resolve,null)))}function yD(n,e,t,i){let r=Cf(n);if(r.length===0)return G({});let s={};return yt(r).pipe(Ut(o=>vD(n[o],e,t,i).pipe(bi(),Oe(c=>{if(c instanceof Xo)throw Sl(new ss,c);s[o]=c}))),Bd(1),Hv(s),En(o=>F0(o)?In:Zi(o)))}function vD(n,e,t,i){let r=na(e)??i,s=us(n,r),o=s.resolve?s.resolve(e,t):on(r,()=>s(e,t));return Di(o)}function Ef(n){return jt(e=>{let t=n(e);return t?yt(t).pipe(se(()=>e)):G(e)})}var B0=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ce);return i}getResolvedTitleForRoute(t){return t.data[ea]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(wD),providedIn:"root"})}}return n})(),wD=(()=>{class n extends B0{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(D(r0))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sa=new $("",{providedIn:"root",factory:()=>({})}),bD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=me({type:n,selectors:[["ng-component"]],standalone:!0,features:[nt],decls:1,vars:0,template:function(i,r){i&1&&He(0,"router-outlet")},dependencies:[RR],encapsulation:2})}}return n})();function Xf(n){let e=n.children&&n.children.map(Xf),t=e?ye(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=bD),t}var Rl=new $(""),Jf=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(ol)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Di(t.loadComponent()).pipe(se(z0),Oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),tr(()=>{this.componentLoaders.delete(t)})),r=new kd(i,()=>new re).pipe(Pd());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ID(i,this.compiler,t,this.onLoadEndListener).pipe(tr(()=>{this.childrenLoaders.delete(i)})),o=new kd(s,()=>new re).pipe(Pd());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ID(n,e,t,i){return Di(n.loadChildren()).pipe(se(z0),Ut(r=>r instanceof lw||Array.isArray(r)?G(r):yt(e.compileModuleAsync(r))),se(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Rl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Xf),injector:s}}))}function ED(n){return n&&typeof n=="object"&&"default"in n}function z0(n){return ED(n)?n.default:n}var Zf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(TD),providedIn:"root"})}}return n})(),TD=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$0=new $(""),q0=new $("");function CD(n,e,t){let i=n.get(q0),r=n.get(J);return n.get(ne).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),c=r.startViewTransition(()=>(s(),AD(n))),{onViewTransitionCreated:l}=i;return l&&on(n,()=>l({transition:c,from:e,to:t})),o})}function AD(n){return new Promise(e=>{Ci({read:()=>setTimeout(e)},{injector:n})})}var SD=new $(""),ep=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new re,this.transitionAbortSubject=new re,this.configLoader=j(Jf),this.environmentInjector=j(Ei),this.urlSerializer=j(ta),this.rootContexts=j(ia),this.location=j($n),this.inputBindingEnabled=j(Pl,{optional:!0})!==null,this.titleStrategy=j(B0),this.options=j(sa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Zf),this.createViewTransition=j($0,{optional:!0}),this.navigationErrorHandler=j(SD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Of(r)),i=r=>this.events.next(new Mf(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ye(N(N({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new _t({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qo,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ne(s=>s.id!==0),se(s=>ye(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jt(s=>{let o=!1,c=!1;return G(s).pipe(jt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),In;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let p="";return this.events.next(new Ri(l.id,this.urlSerializer.serialize(l.rawUrl),p,wl.IgnoredSameUrlNavigation)),l.resolve(!1),In}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(jt(p=>{let g=this.transitions?.getValue();return this.events.next(new os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?In:Promise.resolve(p)}),mD(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ye(N({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new bl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:g,source:v,restoredState:S,extras:P}=l,k=new os(p,this.urlSerializer.serialize(g),v,S);this.events.next(k);let M=D0(this.rootComponentType).snapshot;return this.currentTransition=s=ye(N({},l),{targetSnapshot:M,urlAfterRedirects:g,extras:ye(N({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,G(s)}else{let p="";return this.events.next(new Ri(l.id,this.urlSerializer.serialize(l.extractedUrl),p,wl.IgnoredByUrlHandlingStrategy)),l.resolve(!1),In}}),Oe(l=>{let u=new Rf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),se(l=>(this.currentTransition=s=ye(N({},l),{guards:NR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),HR(this.environmentInjector,l=>this.events.next(l)),Oe(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Sl(this.urlSerializer,l.guardsResult);let u=new Df(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ne(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Gt.GuardRejected),!1)),Ef(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(Oe(u=>{let d=new Pf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),jt(u=>{let d=!1;return G(u).pipe(gD(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Gt.NoDataFromResolver)}}))}),Oe(u=>{let d=new kf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Ef(l=>{let u=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Oe(g=>{d.component=g}),se(()=>{})));for(let g of d.children)p.push(...u(g));return p};return Hr(u(l.targetSnapshot.root)).pipe(Ud(null),lt(1))}),Ef(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?yt(d).pipe(se(()=>s)):G(s)}),se(l=>{let u=DR(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ye(N({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Oe(()=>{this.events.next(new Yo)}),MR(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),lt(1),Oe({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Tn(this.transitionAbortSubject.pipe(Oe(l=>{throw l}))),tr(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),En(l=>{if(c=!0,N0(l))this.events.next(new qn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),OR(l)?this.events.next(new as(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Ko(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=on(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Xo){let{message:p,cancellationCode:g}=Sl(this.urlSerializer,d);this.events.next(new qn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,g)),this.events.next(new as(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let p=t.errorHandler(l);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return In}))}))}cancelNavigationTransition(t,i,r){let s=new qn(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xD(n){return n!==qo}var RD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(DD),providedIn:"root"})}}return n})(),Yf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},DD=(()=>{class n extends Yf{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),G0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(PD),providedIn:"root"})}}return n})(),PD=(()=>{class n extends G0{constructor(){super(...arguments),this.location=j($n),this.urlSerializer=j(ta),this.options=j(sa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Zf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=D0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof os)this.stateMemento=this.createStateMemento();else if(t instanceof Ri)this.rawUrlTree=i.initialUrl;else if(t instanceof bl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Yo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof qn&&(t.code===Gt.GuardRejected||t.code===Gt.NoDataFromResolver)?this.restoreHistory(i):t instanceof Ko?this.restoreHistory(i,!0):t instanceof Hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Gn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zo=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(zo||{});function H0(n,e){n.events.pipe(Ne(t=>t instanceof Hn||t instanceof qn||t instanceof Ko||t instanceof Ri),se(t=>t instanceof Hn||t instanceof Ri?zo.COMPLETE:(t instanceof qn?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?zo.REDIRECTING:zo.FAILED),Ne(t=>t!==zo.REDIRECTING),lt(1)).subscribe(()=>{e()})}function kD(n){throw n}var OD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(tl),this.stateManager=j(G0),this.options=j(sa,{optional:!0})||{},this.pendingTasks=j(qd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(ep),this.urlSerializer=j(ta),this.location=j($n),this.urlHandlingStrategy=j(Zf),this._events=new re,this.errorHandler=this.options.errorHandler||kD,this.navigated=!1,this.routeReuseStrategy=j(RD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Rl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Pl,{optional:!0}),this.eventsSubscription=new Pt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof qn&&i.code!==Gt.Redirect&&i.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hn)this.navigated=!0;else if(i instanceof as){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||xD(r.source)},o);this.scheduleNavigation(c,qo,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}FD(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Xf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:o,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let g=r?r.snapshot:this.routerState.snapshot.root;p=A0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return S0(p,t,d,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Ho(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,qo,null,i)}navigate(t,i={skipLocationChange:!1}){return ND(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=N({},OD):i===!1?r=N({},MD):r=i,Ho(t))return o0(this.currentUrlTree,t,r);let s=this.parseUrl(t);return o0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,u;o?(c=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,g)=>{c=p,l=g});let d=this.pendingTasks.add();return H0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ND(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Se(4008,!1)}function FD(n){return!(n instanceof Yo)&&!(n instanceof as)}var Dl=class{};var VD=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ne(t=>t instanceof Hn),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Wd(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return yt(r).pipe(Fd())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=G(null);let s=r.pipe(Ut(o=>o===null?G(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return yt([s,o]).pipe(Fd())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(D(lr),D(ol),D(Ei),D(Dl),D(Jf))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),W0=new $(""),LD=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ri&&t.code===wl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Il&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Il(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Wc()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function UD(n){return n.routerState.root}function oa(n,e){return{\u0275kind:n,\u0275providers:e}}function jD(){let n=j(Ve);return e=>{let t=n.get(rr);if(e!==t.components[0])return;let i=n.get(lr),r=n.get(K0);n.get(tp)===1&&i.initialNavigation(),n.get(Y0,null,zd.Optional)?.setUpPreloading(),n.get(W0,null,zd.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var K0=new $("",{factory:()=>new re}),tp=new $("",{providedIn:"root",factory:()=>1});function BD(){return oa(2,[{provide:tp,useValue:0},{provide:Xd,multi:!0,deps:[Ve],useFactory:e=>{let t=e.get(xw,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(lr),s=e.get(K0);H0(r,()=>{i(!0)}),e.get(ep).afterPreactivation=()=>(i(!0),s.closed?G(void 0):s),r.initialNavigation()}))}}])}function zD(){return oa(3,[{provide:Xd,multi:!0,useFactory:()=>{let e=j(lr);return()=>{e.setUpLocationChangeListener()}}},{provide:tp,useValue:2}])}var Y0=new $("");function $D(n){return oa(0,[{provide:Y0,useExisting:VD},{provide:Dl,useExisting:n}])}function qD(){return oa(8,[u0,{provide:Pl,useExisting:u0}])}function GD(n){let e=[{provide:$0,useValue:CD},{provide:q0,useValue:N({skipNextTransition:!!n?.skipInitialTransition},n)}];return oa(9,e)}var p0=new $("ROUTER_FORROOT_GUARD"),HD=[$n,{provide:ta,useClass:ss},lr,ia,{provide:cs,useFactory:UD,deps:[lr]},Jf,[]],np=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[HD,[],{provide:Rl,multi:!0,useValue:t},{provide:p0,useFactory:QD,deps:[[lr,new tt,new $d]]},{provide:sa,useValue:i||{}},i?.useHash?KD():YD(),WD(),i?.preloadingStrategy?$D(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?XD(i):[],i?.bindToComponentInputs?qD().\u0275providers:[],i?.enableViewTransitions?GD().\u0275providers:[],JD()]}}static forChild(t){return{ngModule:n,providers:[{provide:Rl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(D(p0,8))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function WD(){return{provide:W0,useFactory:()=>{let n=j(Mw),e=j(ne),t=j(sa),i=j(ep),r=j(ta);return t.scrollOffset&&n.setOffset(t.scrollOffset),new LD(r,i,n,e,t)}}}function KD(){return{provide:Jd,useClass:Dw}}function YD(){return{provide:Jd,useClass:Rw}}function QD(n){return"guarded"}function XD(n){return[n.initialNavigation==="disabled"?zD().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BD().\u0275providers:[]]}var m0=new $("");function JD(){return[{provide:m0,useFactory:jD},{provide:sl,multi:!0,useExisting:m0}]}var xp={};mx(xp,{FirebaseError:()=>Mt,SDK_VERSION:()=>pn,_DEFAULT_ENTRY_NAME:()=>Dn,_addComponent:()=>fs,_addOrOverwriteComponent:()=>Sp,_apps:()=>Pi,_clearComponents:()=>ZP,_components:()=>ds,_getProvider:()=>dr,_isFirebaseApp:()=>Tb,_isFirebaseServerApp:()=>Pn,_registerComponent:()=>fn,_removeServiceInstance:()=>Eb,_serverApps:()=>hs,deleteApp:()=>fa,getApp:()=>fr,getApps:()=>da,initializeApp:()=>ps,initializeServerApp:()=>Cb,onLog:()=>Ul,registerVersion:()=>Fe,setLogLevel:()=>jl});var X0=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},ZD=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},J0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,d=s>>2,p=(s&3)<<4|c>>4,g=(c&15)<<2|u>>6,v=u&63;l||(v=64,o||(g=64)),i.push(t[d],t[p],t[g],t[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(X0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let p=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new rp;let g=s<<2|c>>4;if(i.push(g),u!==64){let v=c<<4&240|u>>2;if(i.push(v),p!==64){let S=u<<6&192|p;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eP=function(n){let e=X0(n);return J0.encodeByteArray(e,!0)},aa=function(n){return eP(n).replace(/\./g,"")},op=function(n){try{return J0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ca(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!tP(t)||(n[t]=ca(n[t],e[t]));return n}function tP(n){return n!=="__proto__"}function ap(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nP=()=>ap().__FIREBASE_DEFAULTS__,iP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&op(n[1]);return e&&JSON.parse(e)},Ml=()=>{try{return nP()||iP()||rP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cp=n=>{var e,t;return(t=(e=Ml())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Z0=n=>{let e=cp(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},lp=()=>{var n;return(n=Ml())===null||n===void 0?void 0:n.config},up=n=>{var e;return(e=Ml())===null||e===void 0?void 0:e[`_${n}`]};var Ol=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function eb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[aa(JSON.stringify(t)),aa(JSON.stringify(o)),""].join(".")}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function sP(){var n;let e=(n=Ml())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nb(){return typeof window<"u"||hp()}function hp(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ib(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ob(){let n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ab(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dp(){try{return typeof indexedDB=="object"}catch{return!1}}function cb(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var oP="FirebaseError",Mt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=oP,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}},Qt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?aP(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Mt(r,c,i)}};function aP(n,e){return n.replace(cP,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var cP=/\{\$([^}]+)}/g;function fp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function lb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ur(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(Q0(s)&&Q0(o)){if(!ur(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Q0(n){return n!==null&&typeof n=="object"}function la(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Nl(n,e){let t=new sp(n,e);return t.subscribe.bind(t)}var sp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=ip),r.error===void 0&&(r.error=ip),r.complete===void 0&&(r.complete=ip);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lP(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ip(){}var tB=4*60*60*1e3;function Wn(n){return n&&n._delegate?n._delegate:n}var Nt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var hr="[DEFAULT]";var pp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Ol;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hP(e))try{this.getOrInitializeService({instanceIdentifier:hr})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=hr){return this.instances.has(e)}getOptions(e=hr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hr){return this.component?this.component.multipleInstances?e:hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uP(n){return n===hr?void 0:n}function hP(n){return n.instantiationMode==="EAGER"}var ua=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new pp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var mp=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),ub={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},dP=pe.INFO,fP={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},pP=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=fP[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xn=class{constructor(e){this.name=e,this._logLevel=dP,this._logHandler=pP,this._userLogHandler=null,mp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};function hb(n){mp.forEach(e=>{e.setLogLevel(n)})}function db(n,e){for(let t of mp){let i=null;e&&e.level&&(i=ub[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...o)=>{let c=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&n({level:pe[s].toLowerCase(),message:c,args:o,type:r.name})}}}var mP=(n,e)=>e.some(t=>n instanceof t),fb,pb;function gP(){return fb||(fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _P(){return pb||(pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var mb=new WeakMap,_p=new WeakMap,gb=new WeakMap,gp=new WeakMap,vp=new WeakMap;function yP(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&mb.set(t,n)}).catch(()=>{}),vp.set(e,n),e}function vP(n){if(_p.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});_p.set(n,e)}var yp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _p.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _b(n){yp=n(yp)}function wP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Fl(this),e,...t);return gb.set(i,e.sort?e.sort():[e]),Rn(i)}:_P().includes(n)?function(...e){return n.apply(Fl(this),e),Rn(mb.get(this))}:function(...e){return Rn(n.apply(Fl(this),e))}}function bP(n){return typeof n=="function"?wP(n):(n instanceof IDBTransaction&&vP(n),mP(n,gP())?new Proxy(n,yp):n)}function Rn(n){if(n instanceof IDBRequest)return yP(n);if(gp.has(n))return gp.get(n);let e=bP(n);return e!==n&&(gp.set(n,e),vp.set(e,n)),e}var Fl=n=>vp.get(n);function vb(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=Rn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Rn(o.result),l.oldVersion,l.newVersion,Rn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var IP=["get","getKey","getAll","getAllKeys","count"],EP=["put","add","delete","clear"],wp=new Map;function yb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=EP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||IP.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]})};return wp.set(e,s),s}_b(n=>ye(N({},n),{get:(e,t,i)=>yb(e,t)||n.get(e,t,i),has:(e,t)=>!!yb(e,t)||n.has(e,t)}));var Ip=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TP(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function TP(n){let e=n.getComponent();return e?.type==="VERSION"}var Vl="@firebase/app",Ep="0.10.12";var Kn=new xn("@firebase/app"),CP="@firebase/app-compat",AP="@firebase/analytics-compat",SP="@firebase/analytics",xP="@firebase/app-check-compat",RP="@firebase/app-check",DP="@firebase/auth",PP="@firebase/auth-compat",kP="@firebase/database",OP="@firebase/data-connect",MP="@firebase/database-compat",NP="@firebase/functions",FP="@firebase/functions-compat",VP="@firebase/installations",LP="@firebase/installations-compat",UP="@firebase/messaging",jP="@firebase/messaging-compat",BP="@firebase/performance",zP="@firebase/performance-compat",$P="@firebase/remote-config",qP="@firebase/remote-config-compat",GP="@firebase/storage",HP="@firebase/storage-compat",WP="@firebase/firestore",KP="@firebase/vertexai-preview",YP="@firebase/firestore-compat",QP="firebase",XP="10.14.0";var Dn="[DEFAULT]",JP={[Vl]:"fire-core",[CP]:"fire-core-compat",[SP]:"fire-analytics",[AP]:"fire-analytics-compat",[RP]:"fire-app-check",[xP]:"fire-app-check-compat",[DP]:"fire-auth",[PP]:"fire-auth-compat",[kP]:"fire-rtdb",[OP]:"fire-data-connect",[MP]:"fire-rtdb-compat",[NP]:"fire-fn",[FP]:"fire-fn-compat",[VP]:"fire-iid",[LP]:"fire-iid-compat",[UP]:"fire-fcm",[jP]:"fire-fcm-compat",[BP]:"fire-perf",[zP]:"fire-perf-compat",[$P]:"fire-rc",[qP]:"fire-rc-compat",[GP]:"fire-gcs",[HP]:"fire-gcs-compat",[WP]:"fire-fst",[YP]:"fire-fst-compat",[KP]:"fire-vertex","fire-js":"fire-js",[QP]:"fire-js-all"};var Pi=new Map,hs=new Map,ds=new Map;function fs(n,e){try{n.container.addComponent(e)}catch(t){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sp(n,e){n.container.addOrOverwriteComponent(e)}function fn(n){let e=n.name;if(ds.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;ds.set(e,n);for(let t of Pi.values())fs(t,n);for(let t of hs.values())fs(t,n);return!0}function dr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Eb(n,e,t=Dn){dr(n,e).clearInstance(t)}function Tb(n){return n.options!==void 0}function Pn(n){return n.settings!==void 0}function ZP(){ds.clear()}var ek={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Qt("app","Firebase",ek);var Ll=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};var Tp=class extends Ll{constructor(e,t,i,r){let s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{let c=e;super(c.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Fe(Vl,Ep,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){fa(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}};var pn=XP;function ps(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Dn,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Xt.create("bad-app-name",{appName:String(r)});if(t||(t=lp()),!t)throw Xt.create("no-options");let s=Pi.get(r);if(s){if(ur(t,s.options)&&ur(i,s.config))return s;throw Xt.create("duplicate-app",{appName:r})}let o=new ua(r);for(let l of ds.values())o.addComponent(l);let c=new Ll(t,i,o);return Pi.set(r,c),c}function Cb(n,e){if(nb()&&!hp())throw Xt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Tb(n)?t=n.options:t=n;let i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;let r=u=>[...u].reduce((d,p)=>Math.imul(31,d)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(i)),o=hs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let c=new ua(s);for(let u of ds.values())c.addComponent(u);let l=new Tp(t,e,s,c);return hs.set(s,l),l}function fr(n=Dn){let e=Pi.get(n);if(!e&&n===Dn&&lp())return ps();if(!e)throw Xt.create("no-app",{appName:n});return e}function da(){return Array.from(Pi.values())}function fa(n){return E(this,null,function*(){let e=!1,t=n.name;Pi.has(t)?(e=!0,Pi.delete(t)):hs.has(t)&&n.decRefCount()<=0&&(hs.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)})}function Fe(n,e,t){var i;let r=(i=JP[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(c.join(" "));return}fn(new Nt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Ul(n,e){if(n!==null&&typeof n!="function")throw Xt.create("invalid-log-argument");db(n,e)}function jl(n){hb(n)}var tk="firebase-heartbeat-database",nk=1,ha="firebase-heartbeat-store",bp=null;function Ab(){return bp||(bp=vb(tk,nk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ha)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xt.create("idb-open",{originalErrorMessage:n.message})})),bp}function ik(n){return E(this,null,function*(){try{let t=(yield Ab()).transaction(ha),i=yield t.objectStore(ha).get(Sb(n));return yield t.done,i}catch(e){if(e instanceof Mt)Kn.warn(e.message);else{let t=Xt.create("idb-get",{originalErrorMessage:e?.message});Kn.warn(t.message)}}})}function wb(n,e){return E(this,null,function*(){try{let i=(yield Ab()).transaction(ha,"readwrite");yield i.objectStore(ha).put(e,Sb(n)),yield i.done}catch(t){if(t instanceof Mt)Kn.warn(t.message);else{let i=Xt.create("idb-set",{originalErrorMessage:t?.message});Kn.warn(i.message)}}})}function Sb(n){return`${n.name}!${n.options.appId}`}var rk=1024,sk=30*24*60*60*1e3,Cp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ap(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=sk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Kn.warn(i)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=bb(),{heartbeatsToSend:i,unsentEntries:r}=ok(this._heartbeatsCache.heartbeats),s=aa(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Kn.warn(t),""}})}};function bb(){return new Date().toISOString().substring(0,10)}function ok(n,e=rk){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ib(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ib(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Ap=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return dp()?cb().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ik(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return wb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return wb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Ib(n){return aa(JSON.stringify({version:2,heartbeats:n})).length}function ak(n){fn(new Nt("platform-logger",e=>new Ip(e),"PRIVATE")),fn(new Nt("heartbeat",e=>new Cp(e),"PRIVATE")),Fe(Vl,Ep,n),Fe(Vl,Ep,"esm2017"),Fe("fire-js","")}ak("");var ck="firebase",lk="10.14.0";Fe(ck,lk,"app");var kn=new Jr("ANGULARFIRE2_VERSION");function zl(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var pa=(n,e)=>{let t=e?[e]:da(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},gs=class{constructor(){return pa(uk)}},uk="app-check";function ms(){}var Bl=class{zone;delegate;constructor(e,t=qv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Rp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)),t.pipe(Oe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_s=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Bl(Zone.current)),this.insideAngular=t.run(()=>new Bl(Zone.current,$v)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(D(ne))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $l(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function hk(n){return $l().ngZone.runOutsideAngular(()=>n())}function pr(n){return $l().ngZone.run(()=>n())}function dk(n){return fk($l())(n)}function fk(n){return function(t){return t=t.lift(new Rp(n.ngZone)),t.pipe(Nd(n.outsideAngular),Md(n.insideAngular))}}var pk=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),pr(()=>n.apply(void 0,i))},ki=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=pr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms))),i[s]=pk(i[s],t));let r=hk(()=>n.apply(this,i));if(!e)if(r instanceof Lt){let s=$l();return r.pipe(Nd(s.outsideAngular),Md(s.insideAngular))}else return pr(()=>r);return r instanceof Lt?r.pipe(dk):r instanceof Promise?pr(()=>new Promise((s,o)=>r.then(c=>pr(()=>s(c)),c=>pr(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:pr(()=>r)};var Yn=class{constructor(e){return e}},mr=class{constructor(){return da()}};function mk(n){return n&&n.length===1?n[0]:new Yn(fr())}var Dp=new $("angularfire2._apps"),gk={provide:Yn,useFactory:mk,deps:[[new tt,Dp]]},_k={provide:mr,deps:[[new tt,Dp]]};function yk(n){return(e,t)=>{let i=t.get(xt);Fe("angularfire",kn.full,"core"),Fe("angularfire",kn.full,"app"),Fe("angular",el.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Yn(r)}}function xb(n,...e){return Wt([gk,_k,{provide:Dp,useFactory:yk(n),multi:!0,deps:[ne,Ve,_s,...e]}])}var Rb=ki(ps,!0);function qb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Gb=qb,Hb=new Qt("auth","Firebase",qb());var Yl=new xn("@firebase/auth");function vk(n,...e){Yl.logLevel<=pe.WARN&&Yl.warn(`Auth (${pn}): ${n}`,...e)}function Gl(n,...e){Yl.logLevel<=pe.ERROR&&Yl.error(`Auth (${pn}): ${n}`,...e)}function Mi(n,...e){throw Qp(n,...e)}function _r(n,...e){return Qp(n,...e)}function Wb(n,e,t){let i=Object.assign(Object.assign({},Gb()),{[e]:t});return new Qt("auth","Firebase",i).create(e,{appName:n.name})}function gr(n){return Wb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qp(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Hb.create(n,...e)}function ie(n,e,...t){if(!n)throw Qp(e,...t)}function Qn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gl(e),new Error(e)}function Ni(n,e){n||Qn(e)}function Mp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wk(){return Db()==="http:"||Db()==="https:"}function Db(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function bk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wk()||rb()||"connection"in navigator)?navigator.onLine:!0}function Ik(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var yr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=tb()||sb()}get(){return bk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xp(n,e){Ni(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ql=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ek={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Tk=new yr(3e4,6e4);function Jp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vs(s,o,c,l){return E(this,arguments,function*(n,e,t,i,r={}){return Kb(n,r,()=>E(this,null,function*(){let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});let p=la(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:g},u);return ib()||(v.referrerPolicy="no-referrer"),Ql.fetch()(Yb(n,n.config.apiHost,t,p),v)}))})}function Kb(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Ek),e);try{let r=new Np(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ql(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ql(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ql(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ql(n,"user-disabled",o);let d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Wb(n,d,u);Mi(n,d)}}catch(r){if(r instanceof Mt)throw r;Mi(n,"network-request-failed",{message:String(r)})}})}function Ck(s,o,c,l){return E(this,arguments,function*(n,e,t,i,r={}){let u=yield vs(n,e,t,i,r);return"mfaPendingCredential"in u&&Mi(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function Yb(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Xp(n.config,r):`${n.config.apiScheme}://${r}`}var Np=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_r(this.auth,"network-request-failed")),Tk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ql(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=_r(n,e,i);return r.customData._tokenResponse=t,r}function Ak(n,e){return E(this,null,function*(){return vs(n,"POST","/v1/accounts:delete",e)})}function Qb(n,e){return E(this,null,function*(){return vs(n,"POST","/v1/accounts:lookup",e)})}function ma(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Zp(n,e=!1){return E(this,null,function*(){let t=Wn(n),i=yield t.getIdToken(e),r=em(i);ie(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ma(Pp(r.auth_time)),issuedAtTime:ma(Pp(r.iat)),expirationTime:ma(Pp(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Pp(n){return Number(n)*1e3}function em(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{let r=op(t);return r?JSON.parse(r):(Gl("Failed to decode base64 JWT payload"),null)}catch(r){return Gl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Pb(n){let e=em(n);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _a(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Mt&&Sk(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function Sk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Fp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ya=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ma(this.lastLoginAt),this.creationTime=ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xl(n){return E(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield _a(n,Qb(t,{idToken:i}));ie(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Xb(s.providerUserInfo):[],c=xk(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ya(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)})}function tm(n){return E(this,null,function*(){let e=Wn(n);yield Xl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function xk(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Xb(n){return n.map(e=>{var{providerId:t}=e,i=Od(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Rk(n,e){return E(this,null,function*(){let t=yield Kb(n,{},()=>E(this,null,function*(){let i=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Yb(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ql.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Dk(n,e){return E(this,null,function*(){return vs(n,"POST","/v2/accounts:revokeToken",Jp(n,e))})}var ga=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");let t=Pb(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield Rk(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ie(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ie(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Qn("not implemented")}};function Oi(n,e){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ys=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Od(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ya(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield _a(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Zp(this,e)}reload(){return tm(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Xl(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Pn(this.auth.app))return Promise.reject(gr(this.auth));let e=yield this.getIdToken();return yield _a(this,Ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,u,d;let p=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,M=(u=t.createdAt)!==null&&u!==void 0?u:void 0,B=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:Q,isAnonymous:Ie,providerData:ae,stsTokenManager:I}=t;ie(H&&I,e,"internal-error");let _=ga.fromJSON(this.name,I);ie(typeof H=="string",e,"internal-error"),Oi(p,e.name),Oi(g,e.name),ie(typeof Q=="boolean",e,"internal-error"),ie(typeof Ie=="boolean",e,"internal-error"),Oi(v,e.name),Oi(S,e.name),Oi(P,e.name),Oi(k,e.name),Oi(M,e.name),Oi(B,e.name);let y=new n({uid:H,auth:e,email:g,emailVerified:Q,displayName:p,isAnonymous:Ie,photoURL:S,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:M,lastLoginAt:B});return ae&&Array.isArray(ae)&&(y.providerData=ae.map(b=>Object.assign({},b))),k&&(y._redirectEventId=k),y}static _fromIdTokenResponse(e,t,i=!1){return E(this,null,function*(){let r=new ga;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Xl(s),s})}static _fromGetAccountInfoResponse(e,t,i){return E(this,null,function*(){let r=t.users[0];ie(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Xb(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new ga;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ya(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var kb=new Map;function Xn(n){Ni(n instanceof Function,"Expected a class definition");let e=kb.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kb.set(n,e),e)}var Pk=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,i){return E(this,null,function*(){this.storage[t]=i})}_get(t){return E(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Vp=Pk;function Hl(n,e,t){return`firebase:${n}:${e}:${t}`}var Jl=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Hl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Hl("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return E(this,null,function*(){if(!t.length)return new n(Xn(Vp),e,i);let r=(yield Promise.all(t.map(u=>E(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||Xn(Vp),o=Hl(i,e.config.apiKey,e.name),c=null;for(let u of t)try{let d=yield u._get(o);if(d){let p=ys._fromJSON(e,d);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(u=>E(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,i))})}};function Ob(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iI(e))return"Blackberry";if(rI(e))return"Webos";if(Zb(e))return"Safari";if((e.includes("chrome/")||eI(e))&&!e.includes("edge/"))return"Chrome";if(nI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Jb(n=rt()){return/firefox\//i.test(n)}function Zb(n=rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eI(n=rt()){return/crios\//i.test(n)}function tI(n=rt()){return/iemobile/i.test(n)}function nI(n=rt()){return/android/i.test(n)}function iI(n=rt()){return/blackberry/i.test(n)}function rI(n=rt()){return/webos/i.test(n)}function nm(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kk(n=rt()){var e;return nm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ok(){return ob()&&document.documentMode===10}function sI(n=rt()){return nm(n)||nI(n)||rI(n)||iI(n)||/windows phone/i.test(n)||tI(n)}function oI(n,e=[]){let t;switch(n){case"Browser":t=Ob(rt());break;case"Worker":t=`${Ob(rt())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pn}/${i}`}var Lp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Mk(t){return E(this,arguments,function*(n,e={}){return vs(n,"GET","/v2/passwordPolicy",Jp(n,e))})}var Nk=6,Up=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Nk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var jp=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zl(this),this.idTokenSubscription=new Zl(this),this.beforeStateQueue=new Lp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Jl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Qb(this,{idToken:e}),i=yield ys._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Pn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Xl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ik()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Pn(this.app))return Promise.reject(gr(this));let t=e?Wn(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Pn(this.app)?Promise.reject(gr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Pn(this.app)?Promise.reject(gr(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield Mk(this),t=new Up(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Dk(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xn(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=yield Jl.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&vk(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function im(n){return Wn(n)}var Zl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nl(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rm={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fk(n){rm=n}function Vk(n){return rm.loadJS(n)}function Lk(){return rm.gapiScript}function aI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function sm(n,e){let t=dr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(ur(s,e??{}))return r;Mi(r,"already-initialized")}return t.initialize({options:e})}function Uk(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function om(n,e,t){let i=im(n);ie(i._canInitEmulator,i,"emulator-config-failed"),ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=cI(e),{host:o,port:c}=jk(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Bk()}function cI(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jk(n){let e=cI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:Mb(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:Mb(o)}}}function Mb(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Bk(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var eu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,t){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}};function kp(n,e){return E(this,null,function*(){return Ck(n,"POST","/v1/accounts:signInWithIdp",Jp(n,e))})}var tu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bp=class extends tu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var va=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return E(this,null,function*(){let s=yield ys._fromIdTokenResponse(e,i,r),o=Nb(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return E(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Nb(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Nb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var zp=class n extends Mt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function lI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zp._fromErrorAndOperation(n,s,e,i):s})}function zk(n,e,t=!1){return E(this,null,function*(){let i=yield _a(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return va._forOperation(n,"link",i)})}function $k(n,e,t=!1){return E(this,null,function*(){let{auth:i}=n;if(Pn(i.app))return Promise.reject(gr(i));let r="reauthenticate";try{let s=yield _a(n,lI(i,r,e,n),t);ie(s.idToken,i,"internal-error");let o=em(s.idToken);ie(o,i,"internal-error");let{sub:c}=o;return ie(n.uid===c,i,"user-mismatch"),va._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mi(i,"user-mismatch"),s}})}function qk(n,e,t=!1){return E(this,null,function*(){if(Pn(n.app))return Promise.reject(gr(n));let i="signIn",r=yield lI(n,i,e),s=yield va._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function am(n,e,t,i){return Wn(n).onIdTokenChanged(e,t,i)}function cm(n,e,t){return Wn(n).beforeAuthStateChanged(e,t)}var nu="__sak";var iu=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Gk=1e3,Hk=10,Wk=(()=>{class n extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);Ok()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Hk):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},Gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return E(this,null,function*(){yield vi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return E(this,null,function*(){let i=yield vi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return E(this,null,function*(){yield vi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),uI=Wk;var Kk=(()=>{class n extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),lm=Kk;function Yk(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Qk=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(d=>E(this,null,function*(){return d(i.origin,o)})),u=yield Yk(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function hI(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var $p=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return E(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=hI("",20);r.port1.start();let d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function On(){return window}function Xk(n){On().location.href=n}function dI(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}function Jk(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Zk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function eO(){return dI()?self:null}var fI="firebaseLocalStorageDb",tO=1,ru="firebaseLocalStorage",pI="fbase_key",vr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ou(n,e){return n.transaction([ru],e?"readwrite":"readonly").objectStore(ru)}function nO(){let n=indexedDB.deleteDatabase(fI);return new vr(n).toPromise()}function qp(){let n=indexedDB.open(fI,tO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ru,{keyPath:pI})}catch(r){t(r)}}),n.addEventListener("success",()=>E(this,null,function*(){let i=n.result;i.objectStoreNames.contains(ru)?e(i):(i.close(),yield nO(),e(yield qp()))}))})}function Fb(n,e,t){return E(this,null,function*(){let i=ou(n,!0).put({[pI]:e,value:t});return new vr(i).toPromise()})}function iO(n,e){return E(this,null,function*(){let t=ou(n,!1).get(e),i=yield new vr(t).toPromise();return i===void 0?null:i.value})}function Vb(n,e){let t=ou(n,!0).delete(e);return new vr(t).toPromise()}var rO=800,sO=3,oO=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield qp(),this.db)})}_withRetries(t){return E(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>sO)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return dI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=Qk._getInstance(eO()),this.receiver._subscribe("keyChanged",(t,i)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,i;if(this.activeServiceWorker=yield Jk(),!this.activeServiceWorker)return;this.sender=new $p(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Zk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield qp();return yield Fb(t,nu,"1"),yield Vb(t,nu),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>Fb(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let i=yield this._withRetries(r=>iO(r,t));return this.localCache[t]=i,i})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>Vb(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=ou(s,!1).getAll();return new vr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),mI=oO;var BB=aI("rcb"),zB=new yr(3e4,6e4);function aO(n,e){return e?Xn(e):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var wa=class extends eu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kp(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function cO(n){return qk(n.auth,new wa(n),n.bypassAuthState)}function lO(n){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),$k(t,new wa(n),n.bypassAuthState)}function uO(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),zk(t,new wa(n),n.bypassAuthState)})}var Gp=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cO;case"linkViaPopup":case"linkViaRedirect":return uO;case"reauthViaPopup":case"reauthViaRedirect":return lO;default:Mi(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $B=new yr(2e3,1e4);var hO="pendingRedirect",Wl=new Map,Hp=class n extends Gp{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return E(this,null,function*(){let e=Wl.get(this.auth._key());if(!e){try{let i=(yield dO(this.resolver,this.auth))?yield vi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Wl.set(this.auth._key(),e)}return this.bypassAuthState||Wl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return vi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function dO(n,e){return E(this,null,function*(){let t=mO(e),i=pO(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function fO(n,e){Wl.set(n._key(),e)}function pO(n){return Xn(n._redirectPersistence)}function mO(n){return Hl(hO,n.config.apiKey,n.name)}function gO(n,e,t=!1){return E(this,null,function*(){if(Pn(n.app))return Promise.reject(gr(n));let i=im(n),r=aO(i,e),o=yield new Hp(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var _O=10*60*1e3,Wp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gI(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_O&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lb(e))}saveEventToCache(e){this.cachedEventUids.add(Lb(e)),this.lastProcessedEventTime=Date.now()}};function Lb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function yO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gI(n);default:return!1}}function vO(t){return E(this,arguments,function*(n,e={}){return vs(n,"GET","/v1/projects",e)})}var wO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bO=/^https?/;function IO(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield vO(n);for(let t of e)try{if(EO(t))return}catch{}Mi(n,"unauthorized-domain")})}function EO(n){let e=Mp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!bO.test(t))return!1;if(wO.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var TO=new yr(3e4,6e4);function Ub(){let n=On().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CO(n){return new Promise((e,t)=>{var i,r,s;function o(){Ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ub(),t(_r(n,"network-request-failed"))},timeout:TO.get()})}if(!((r=(i=On().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{let c=aI("iframefcb");return On()[c]=()=>{gapi.load?o():t(_r(n,"network-request-failed"))},Vk(`${Lk()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Kl=null,e})}var Kl=null;function AO(n){return Kl=Kl||CO(n),Kl}var SO=new yr(5e3,15e3),xO="__/auth/iframe",RO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kO(n){let e=n.config;ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Xp(e,RO):`https://${n.config.authDomain}/${xO}`,i={apiKey:e.apiKey,appName:n.name,v:pn},r=PO.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${la(i).slice(1)}`}function OO(n){return E(this,null,function*(){let e=yield AO(n),t=On().gapi;return ie(t,n,"internal-error"),e.open({where:document.body,url:kO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},i=>new Promise((r,s)=>E(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=_r(n,"network-request-failed"),c=On().setTimeout(()=>{s(o)},SO.get());function l(){On().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var MO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NO=500,FO=600,VO="_blank",LO="http://localhost",su=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function UO(n,e,t,i=NO,r=FO){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},MO),{width:i.toString(),height:r.toString(),top:s,left:o}),u=rt().toLowerCase();t&&(c=eI(u)?VO:t),Jb(u)&&(e=e||LO,l.scrollbars="yes");let d=Object.entries(l).reduce((g,[v,S])=>`${g}${v}=${S},`,"");if(kk(u)&&c!=="_self")return jO(e||"",c),new su(null);let p=window.open(e||"",c,d);ie(p,n,"popup-blocked");try{p.focus()}catch{}return new su(p)}function jO(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var BO="__/auth/handler",zO="emulator/auth/handler",$O=encodeURIComponent("fac");function jb(n,e,t,i,r,s){return E(this,null,function*(){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:pn,eventId:r};if(e instanceof tu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",lb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Bp){let d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let d of Object.keys(c))c[d]===void 0&&delete c[d];let l=yield n._getAppCheckToken(),u=l?`#${$O}=${encodeURIComponent(l)}`:"";return`${qO(n)}?${la(c).slice(1)}${u}`})}function qO({config:n}){return n.emulator?Xp(n,zO):`https://${n.authDomain}/${BO}`}var Op="webStorageSupport",Kp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lm,this._completeRedirectFn=gO,this._overrideRedirectResult=fO}_openPopup(e,t,i,r){return E(this,null,function*(){var s;Ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield jb(e,t,i,Mp(),r);return UO(e,o,hI())})}_openRedirect(e,t,i,r){return E(this,null,function*(){yield this._originValidation(e);let s=yield jb(e,t,i,Mp(),r);return Xk(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Ni(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return E(this,null,function*(){let t=yield OO(e),i=new Wp(e);return t.register("authEvent",r=>(ie(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Op,{type:Op},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Op];o!==void 0&&t(!!o),Mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sI()||Zb()||nm()}},_I=Kp;var Bb="@firebase/auth",zb="1.7.9";var Yp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function GO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HO(n){fn(new Nt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oI(n)},u=new jp(i,r,s,l);return Uk(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),fn(new Nt("auth-internal",e=>{let t=im(e.getProvider("auth").getImmediate());return(i=>new Yp(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(Bb,zb,GO(n)),Fe(Bb,zb,"esm2017")}var WO=5*60,KO=up("authIdTokenMaxAge")||WO,$b=null,YO=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>KO)return;let r=t?.token;$b!==r&&($b=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function um(n=fr()){let e=dr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=sm(n,{popupRedirectResolver:_I,persistence:[mI,uI,lm]}),i=up("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=YO(s.toString());cm(t,o,()=>o(t.currentUser)),am(t,c=>o(c))}}let r=cp("auth");return r&&om(t,`http://${r}`),t}function QO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Fk({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=_r("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",QO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HO("Browser");var yI="auth",ba=class{constructor(e){return e}},Ia=class{constructor(){return pa(yI)}};var hm=new $("angularfire2.auth-instances");function qM(n,e){let t=zl(yI,n,e);return t&&new ba(t)}function GM(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new ba(i)}}var HM={provide:Ia,deps:[[new tt,hm]]},WM={provide:ba,useFactory:qM,deps:[[new tt,hm],Yn]};function vI(n,...e){return Fe("angularfire",kn.full,"auth"),Wt([WM,HM,{provide:hm,useFactory:GM(n),multi:!0,deps:[ne,Ve,_s,mr,[new tt,gs],...e]}])}var wI=ki(um,!0);var bI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},II={};var Fi,dm;(function(){var n;function e(I,_){function y(){}y.prototype=_.prototype,I.D=_.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(b,T,A){for(var w=Array(arguments.length-2),R=2;R<arguments.length;R++)w[R-2]=arguments[R];return _.prototype[T].apply(b,w)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,y){y||(y=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(T=0;16>T;++T)b[T]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=I.g[0],y=I.g[1],T=I.g[2];var A=I.g[3],w=_+(A^y&(T^A))+b[0]+3614090360&4294967295;_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[2]+606105819&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[3]+3250441966&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[4]+4118548399&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[6]+2821735955&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[7]+4249261313&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[8]+1770035416&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[10]+4294925233&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[11]+2304563134&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[12]+1804603682&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[14]+2792965006&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[15]+1236535329&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(T^A&(y^T))+b[1]+4129170786&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[11]+643717713&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[0]+3921069994&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[5]+3593408605&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[15]+3634488961&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[4]+3889429448&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[9]+568446438&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[3]+4107603335&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[8]+1163531501&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[13]+2850285829&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[7]+1735328473&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[12]+2368359562&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(y^T^A)+b[5]+4294588738&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[11]+1839030562&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[14]+4259657740&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[1]+2763975236&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[7]+4139469664&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[10]+3200236656&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[13]+681279174&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[3]+3572445317&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[6]+76029189&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[9]+3654602809&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[15]+530742520&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[2]+3299628645&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(T^(y|~A))+b[0]+4096336452&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[14]+2878612391&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[5]+4237533241&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[12]+1700485571&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[10]+4293915773&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[1]+2240044497&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[8]+1873313359&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[6]+2734768916&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[13]+1309151649&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[4]+4149444226&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[2]+718787259&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+A&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var y=_-this.blockSize,b=this.B,T=this.h,A=0;A<_;){if(T==0)for(;A<=y;)r(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(b[T++]=I.charCodeAt(A++),T==this.blockSize){r(this,b),T=0;break}}else for(;A<_;)if(b[T++]=I[A++],T==this.blockSize){r(this,b),T=0;break}}this.h=T,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var y=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=y&255,y/=256;for(this.u(I),I=Array(16),_=y=0;4>_;++_)for(var b=0;32>b;b+=8)I[y++]=this.g[_]>>>b&255;return I};function s(I,_){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=_(I)}function o(I,_){this.h=_;for(var y=[],b=!0,T=I.length-1;0<=T;T--){var A=I[T]|0;b&&A==_||(y[T]=A,b=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return k(u(-I));for(var _=[],y=1,b=0;I>=y;b++)_[b]=I/y|0,y*=4294967296;return new o(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return k(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(_,8)),b=p,T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T),w=parseInt(I.substring(T,T+A),_);8>A?(A=u(Math.pow(_,A)),b=b.j(A).add(u(w))):(b=b.j(y),b=b.add(u(w)))}return b}var p=l(0),g=l(1),v=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-k(this).m();for(var I=0,_=1,y=0;y<this.g.length;y++){var b=this.i(y);I+=(0<=b?b:4294967296+b)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(P(this))return"-"+k(this).toString(I);for(var _=u(Math.pow(I,6)),y=this,b="";;){var T=Q(y,_).g;y=M(y,T.j(_));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=T,S(y))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=M(this,I),P(I)?-1:S(I)?0:1};function k(I){for(var _=I.g.length,y=[],b=0;b<_;b++)y[b]=~I.g[b];return new o(y,~I.h).add(g)}n.abs=function(){return P(this)?k(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0,T=0;T<=_;T++){var A=b+(this.i(T)&65535)+(I.i(T)&65535),w=(A>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);b=w>>>16,A&=65535,w&=65535,y[T]=w<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function M(I,_){return I.add(k(_))}n.j=function(I){if(S(this)||S(I))return p;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var _=this.g.length+I.g.length,y=[],b=0;b<2*_;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<I.g.length;T++){var A=this.i(b)>>>16,w=this.i(b)&65535,R=I.i(T)>>>16,q=I.i(T)&65535;y[2*b+2*T]+=w*q,B(y,2*b+2*T),y[2*b+2*T+1]+=A*q,B(y,2*b+2*T+1),y[2*b+2*T+1]+=w*R,B(y,2*b+2*T+1),y[2*b+2*T+2]+=A*R,B(y,2*b+2*T+2)}for(b=0;b<_;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=_;b<2*_;b++)y[b]=0;return new o(y,0)};function B(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function H(I,_){this.g=I,this.h=_}function Q(I,_){if(S(_))throw Error("division by zero");if(S(I))return new H(p,p);if(P(I))return _=Q(k(I),_),new H(k(_.g),k(_.h));if(P(_))return _=Q(I,k(_)),new H(k(_.g),_.h);if(30<I.g.length){if(P(I)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,b=_;0>=b.l(I);)y=Ie(y),b=Ie(b);var T=ae(y,1),A=ae(b,1);for(b=ae(b,2),y=ae(y,2);!S(b);){var w=A.add(b);0>=w.l(I)&&(T=T.add(y),A=w),b=ae(b,1),y=ae(y,1)}return _=M(I,T.j(_)),new H(T,_)}for(T=p;0<=I.l(_);){for(y=Math.max(1,Math.floor(I.m()/_.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=u(y),w=A.j(_);P(w)||0<w.l(I);)y-=b,A=u(y),w=A.j(_);S(A)&&(A=g),T=T.add(A),I=M(I,w)}return new H(T,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)&I.i(b);return new o(y,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)|I.i(b);return new o(y,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)^I.i(b);return new o(y,this.h^I.h)};function Ie(I){for(var _=I.g.length+1,y=[],b=0;b<_;b++)y[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(y,I.h)}function ae(I,_){var y=_>>5;_%=32;for(var b=I.g.length-y,T=[],A=0;A<b;A++)T[A]=0<_?I.i(A+y)>>>_|I.i(A+y+1)<<32-_:I.i(A+y);return new o(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,dm=II.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Fi=II.Integer=o}).apply(typeof bI<"u"?bI:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={};var fm,KM,ws,pm,Ea,cu,mm,gm,_m;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=t(this);function r(a,h){if(h)e:{var f=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in f))break e;f=f[C]}a=a[a.length-1],m=f[a],h=h(m),h!=m&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var f=0,m=!1,C={next:function(){if(!m&&f<a.length){var x=f++;return{value:h(x,a[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(a){return a||function(){return s(this,function(h,f){return f})}});var o=o||{},c=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function v(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function S(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,C,x){for(var L=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)L[Pe-2]=arguments[Pe];return h.prototype[C].apply(m,L)}}function P(a){let h=a.length;if(0<h){let f=Array(h);for(let m=0;m<h;m++)f[m]=a[m];return f}return[]}function k(a,h){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let C=a.length||0,x=m.length||0;a.length=C+x;for(let L=0;L<x;L++)a[C+L]=m[L]}else a.push(m)}}class M{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Q(a){return Q[" "](a),a}Q[" "]=function(){};var Ie=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ae(a,h,f){for(let m in a)h.call(f,a[m],m,a)}function I(a,h){for(let f in a)h.call(void 0,a[f],f,a)}function _(a){let h={};for(let f in a)h[f]=a[f];return h}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)a[f]=m[f];for(let x=0;x<y.length;x++)f=y[x],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function T(a){var h=1;a=a.split(":");let f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function w(){var a=he;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class R{constructor(){this.h=this.g=null}add(h,f){let m=q.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var q=new M(()=>new F,a=>a.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Z=!1,he=new R,fe=()=>{let a=c.Promise.resolve(void 0);K=()=>{a.then(Re)}};var Re=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(f){A(f)}var h=q;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Z=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function ot(a,h){if(De.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(Ie){e:{try{Q(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ot.aa.h.call(this)}}S(ot,De);var nn={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),rn=0;function oo(a,h,f,m,C){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=C,this.key=++rn,this.da=this.fa=!1}function Cc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ac(a){this.src=a,this.g={},this.h=0}Ac.prototype.add=function(a,h,f,m,C){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var L=cd(a,h,m,C);return-1<L?(h=a[L],f||(h.fa=!1)):(h=new oo(h,this.src,x,!!m,C),h.fa=f,a.push(h)),h};function ad(a,h){var f=h.type;if(f in a.g){var m=a.g[f],C=Array.prototype.indexOf.call(m,h,void 0),x;(x=0<=C)&&Array.prototype.splice.call(m,C,1),x&&(Cc(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function cd(a,h,f,m){for(var C=0;C<a.length;++C){var x=a[C];if(!x.da&&x.listener==h&&x.capture==!!f&&x.ha==m)return C}return-1}var ld="closure_lm_"+(1e6*Math.random()|0),ud={};function By(a,h,f,m,C){if(m&&m.once)return $y(a,h,f,m,C);if(Array.isArray(h)){for(var x=0;x<h.length;x++)By(a,h[x],f,m,C);return null}return f=pd(f),a&&a[at]?a.K(h,f,u(m)?!!m.capture:!!m,C):zy(a,h,f,!1,m,C)}function zy(a,h,f,m,C,x){if(!h)throw Error("Invalid event type");var L=u(C)?!!C.capture:!!C,Pe=dd(a);if(Pe||(a[ld]=Pe=new Ac(a)),f=Pe.add(h,f,m,L,x),f.proxy)return f;if(m=BS(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)Xe||(C=L),C===void 0&&(C=!1),a.addEventListener(h.toString(),m,C);else if(a.attachEvent)a.attachEvent(Gy(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BS(){function a(f){return h.call(a.src,a.listener,f)}let h=zS;return a}function $y(a,h,f,m,C){if(Array.isArray(h)){for(var x=0;x<h.length;x++)$y(a,h[x],f,m,C);return null}return f=pd(f),a&&a[at]?a.L(h,f,u(m)?!!m.capture:!!m,C):zy(a,h,f,!0,m,C)}function qy(a,h,f,m,C){if(Array.isArray(h))for(var x=0;x<h.length;x++)qy(a,h[x],f,m,C);else m=u(m)?!!m.capture:!!m,f=pd(f),a&&a[at]?(a=a.i,h=String(h).toString(),h in a.g&&(x=a.g[h],f=cd(x,f,m,C),-1<f&&(Cc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete a.g[h],a.h--)))):a&&(a=dd(a))&&(h=a.g[h.toString()],a=-1,h&&(a=cd(h,f,m,C)),(f=-1<a?h[a]:null)&&hd(f))}function hd(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[at])ad(h.i,a);else{var f=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(f,m,a.capture):h.detachEvent?h.detachEvent(Gy(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=dd(h))?(ad(f,a),f.h==0&&(f.src=null,h[ld]=null)):Cc(a)}}}function Gy(a){return a in ud?ud[a]:ud[a]="on"+a}function zS(a,h){if(a.da)a=!0;else{h=new ot(h,this);var f=a.listener,m=a.ha||a.src;a.fa&&hd(a),a=f.call(m,h)}return a}function dd(a){return a=a[ld],a instanceof Ac?a:null}var fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function pd(a){return typeof a=="function"?a:(a[fd]||(a[fd]=function(h){return a.handleEvent(h)}),a[fd])}function pt(){Ae.call(this),this.i=new Ac(this),this.M=this,this.F=null}S(pt,Ae),pt.prototype[at]=!0,pt.prototype.removeEventListener=function(a,h,f,m){qy(this,a,h,f,m)};function Ct(a,h){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new De(h,a);else if(h instanceof De)h.target=h.target||a;else{var C=h;h=new De(m,a),b(h,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var L=h.g=f[x];C=Sc(L,m,!0,h)&&C}if(L=h.g=a,C=Sc(L,m,!0,h)&&C,C=Sc(L,m,!1,h)&&C,f)for(x=0;x<f.length;x++)L=h.g=f[x],C=Sc(L,m,!1,h)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],m=0;m<f.length;m++)Cc(f[m]);delete a.g[h],a.h--}}this.F=null},pt.prototype.K=function(a,h,f,m){return this.i.add(String(a),h,!1,f,m)},pt.prototype.L=function(a,h,f,m){return this.i.add(String(a),h,!0,f,m)};function Sc(a,h,f,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,x=0;x<h.length;++x){var L=h[x];if(L&&!L.da&&L.capture==f){var Pe=L.listener,ct=L.ha||L.src;L.fa&&ad(a.i,L),C=Pe.call(ct,m)!==!1&&C}}return C&&!m.defaultPrevented}function Hy(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Wy(a){a.g=Hy(()=>{a.g=null,a.i&&(a.i=!1,Wy(a))},a.l);let h=a.h;a.h=null,a.m.apply(null,h)}class $S extends Ae{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Wy(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ao(a){Ae.call(this),this.h=a,this.g={}}S(ao,Ae);var Ky=[];function Yy(a){ae(a.g,function(h,f){this.g.hasOwnProperty(f)&&hd(h)},a),a.g={}}ao.prototype.N=function(){ao.aa.N.call(this),Yy(this)},ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=c.JSON.stringify,qS=c.JSON.parse,GS=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function gd(){}gd.prototype.h=null;function Qy(a){return a.h||(a.h=a.i())}function Xy(){}var co={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _d(){De.call(this,"d")}S(_d,De);function yd(){De.call(this,"c")}S(yd,De);var Yi={},Jy=null;function xc(){return Jy=Jy||new pt}Yi.La="serverreachability";function Zy(a){De.call(this,Yi.La,a)}S(Zy,De);function lo(a){let h=xc();Ct(h,new Zy(h))}Yi.STAT_EVENT="statevent";function ev(a,h){De.call(this,Yi.STAT_EVENT,a),this.stat=h}S(ev,De);function At(a){let h=xc();Ct(h,new ev(h,a))}Yi.Ma="timingevent";function tv(a,h){De.call(this,Yi.Ma,a),this.size=h}S(tv,De);function uo(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function ho(){this.g=!0}ho.prototype.xa=function(){this.g=!1};function HS(a,h,f,m,C,x){a.info(function(){if(a.g)if(x)for(var L="",Pe=x.split("&"),ct=0;ct<Pe.length;ct++){var Ee=Pe[ct].split("=");if(1<Ee.length){var mt=Ee[0];Ee=Ee[1];var gt=mt.split("_");L=2<=gt.length&&gt[1]=="type"?L+(mt+"="+Ee+"&"):L+(mt+"=redacted&")}}else L=null;else L=x;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+f+`
`+L})}function WS(a,h,f,m,C,x,L){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+f+`
`+x+" "+L})}function zr(a,h,f,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+YS(a,f)+(m?" "+m:"")})}function KS(a,h){a.info(function(){return"TIMEOUT: "+h})}ho.prototype.info=function(){};function YS(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return md(f)}catch{return h}}var Rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vd;function Dc(){}S(Dc,gd),Dc.prototype.g=function(){return new XMLHttpRequest},Dc.prototype.i=function(){return{}},vd=new Dc;function gi(a,h,f,m){this.j=a,this.i=h,this.l=f,this.R=m||1,this.U=new ao(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iv}function iv(){this.i=null,this.g="",this.h=!1}var rv={},wd={};function bd(a,h,f){a.L=1,a.v=Mc(jn(h)),a.m=f,a.P=!0,sv(a,null)}function sv(a,h){a.F=Date.now(),Pc(a),a.A=jn(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),vv(f.i,"t",m),a.C=0,f=a.j.J,a.h=new iv,a.g=Vv(a.j,f?h:null,!a.m),0<a.O&&(a.M=new $S(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,m=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Ky[0]=C.toString()),C=Ky);for(var x=0;x<C.length;x++){var L=By(f,C[x],m||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),lo(),HS(a.i,a.u,a.A,a.l,a.R,a.m)}gi.prototype.ca=function(a){a=a.target;let h=this.M;h&&Bn(a)==3?h.j():this.Y(a)},gi.prototype.Y=function(a){try{if(a==this.g)e:{let gt=Bn(this.g);var h=this.g.Ba();let Gr=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Av(this.g)))){this.J||gt!=4||h==7||(h==8||0>=Gr?lo(3):lo(2)),Id(this);var f=this.g.Z();this.X=f;t:if(ov(this)){var m=Av(this.g);a="";var C=m.length,x=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qi(this),fo(this);var L="";break t}this.h.i=new c.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(m[h],{stream:!(x&&h==C-1)});m.length=0,this.h.g+=a,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,WS(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,ct=this.g;if((Pe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Pe)){var Ee=Pe;break t}}Ee=null}if(f=Ee)zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ed(this,f);else{this.o=!1,this.s=3,At(12),Qi(this),fo(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=QS(this,L),sn==wd){gt==4&&(this.s=4,At(14),f=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==rv){this.s=4,At(15),zr(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else zr(this.i,this.l,sn,null),Ed(this,sn);if(ov(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||L.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)zr(this.i,this.l,L,"[Invalid Chunked Response]"),Qi(this),fo(this);else if(0<L.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Rd(mt),mt.M=!0,At(11))}}else zr(this.i,this.l,L,null),Ed(this,L);gt==4&&Qi(this),this.o&&!this.J&&(gt==4?Ov(this.j,this):(this.o=!1,Pc(this)))}else fx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Qi(this),fo(this)}}}catch{}finally{}};function ov(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function QS(a,h){var f=a.C,m=h.indexOf(`
`,f);return m==-1?wd:(f=Number(h.substring(f,m)),isNaN(f)?rv:(m+=1,m+f>h.length?wd:(h=h.slice(m,m+f),a.C=m+f,h)))}gi.prototype.cancel=function(){this.J=!0,Qi(this)};function Pc(a){a.S=Date.now()+a.I,av(a,a.I)}function av(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=uo(g(a.ba,a),h)}function Id(a){a.B&&(c.clearTimeout(a.B),a.B=null)}gi.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(KS(this.i,this.A),this.L!=2&&(lo(),At(17)),Qi(this),this.s=2,fo(this)):av(this,this.S-a)};function fo(a){a.j.G==0||a.J||Ov(a.j,a)}function Qi(a){Id(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Yy(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ed(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Td(f.h,a))){if(!a.K&&Td(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Uc(f),Vc(f);else break e;xd(f),At(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=uo(g(f.Za,f),6e3));if(1>=uv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ji(f,11)}else if((a.K||f.g==a)&&Uc(f),!B(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let Ee=C[h];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let mt=Ee[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let gt=Ee[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let Gr=Ee[5];Gr!=null&&typeof Gr=="number"&&0<Gr&&(m=1.5*Gr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let sn=a.g;if(sn){let Bc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bc){var x=m.h;x.g||Bc.indexOf("spdy")==-1&&Bc.indexOf("quic")==-1&&Bc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Cd(x,x.h),x.h=null))}if(m.D){let Dd=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(m.ya=Dd,Me(m.I,m.D,Dd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=a;if(m.qa=Fv(m,m.J?m.ia:null,m.W),L.K){hv(m.h,L);var Pe=L,ct=m.L;ct&&(Pe.I=ct),Pe.B&&(Id(Pe),Pc(Pe)),m.g=L}else Pv(m);0<f.i.length&&Lc(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Ji(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ji(f,7):Sd(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}lo(4)}catch{}}var XS=class{constructor(a,h){this.g=a,this.map=h}};function cv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function uv(a){return a.h?1:a.g?a.g.size:0}function Td(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Cd(a,h){a.g?a.g.add(h):a.h=h}function hv(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}cv.prototype.cancel=function(){if(this.i=dv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function dv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(let f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function JS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],f=a.length,m=0;m<f;m++)h.push(a[m]);return h}h=[],f=0;for(m in a)h[f++]=a[m];return h}function ZS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(let m in a)h[f++]=m;return h}}}function fv(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=ZS(a),m=JS(a),C=m.length,x=0;x<C;x++)h.call(void 0,m[x],f&&f[x],a)}var pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ex(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),C=null;if(0<=m){var x=a[f].substring(0,m);C=a[f].substring(m+1)}else x=a[f];h(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Xi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Xi){this.h=a.h,kc(this,a.j),this.o=a.o,this.g=a.g,Oc(this,a.s),this.l=a.l;var h=a.i,f=new go;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),mv(this,f),this.m=a.m}else a&&(h=String(a).match(pv))?(this.h=!1,kc(this,h[1]||"",!0),this.o=po(h[2]||""),this.g=po(h[3]||"",!0),Oc(this,h[4]),this.l=po(h[5]||"",!0),mv(this,h[6]||"",!0),this.m=po(h[7]||"")):(this.h=!1,this.i=new go(null,this.h))}Xi.prototype.toString=function(){var a=[],h=this.j;h&&a.push(mo(h,gv,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(mo(h,gv,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(mo(f,f.charAt(0)=="/"?ix:nx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",mo(f,sx)),a.join("")};function jn(a){return new Xi(a)}function kc(a,h,f){a.j=f?po(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Oc(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function mv(a,h,f){h instanceof go?(a.i=h,ox(a.i,a.h)):(f||(h=mo(h,rx)),a.i=new go(h,a.h))}function Me(a,h,f){a.i.set(h,f)}function Mc(a){return Me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function po(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function mo(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,tx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function tx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var gv=/[#\/\?@]/g,nx=/[#\?:]/g,ix=/[#\?]/g,rx=/[#\?@]/g,sx=/#/g;function go(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function _i(a){a.g||(a.g=new Map,a.h=0,a.i&&ex(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=go.prototype,n.add=function(a,h){_i(this),this.i=null,a=$r(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function _v(a,h){_i(a),h=$r(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function yv(a,h){return _i(a),h=$r(a,h),a.g.has(h)}n.forEach=function(a,h){_i(this),this.g.forEach(function(f,m){f.forEach(function(C){a.call(h,C,m,this)},this)},this)},n.na=function(){_i(this);let a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){let C=a[m];for(let x=0;x<C.length;x++)f.push(h[m])}return f},n.V=function(a){_i(this);let h=[];if(typeof a=="string")yv(this,a)&&(h=h.concat(this.g.get($r(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},n.set=function(a,h){return _i(this),this.i=null,a=$r(this,a),yv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function vv(a,h,f){_v(a,h),0<f.length&&(a.i=null,a.g.set($r(a,h),P(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];let x=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=x;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),a.push(C)}}return this.i=a.join("&")};function $r(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function ox(a,h){h&&!a.j&&(_i(a),a.i=null,a.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(_v(this,m),vv(this,C,f))},a)),a.j=h}function ax(a,h){let f=new ho;if(c.Image){let m=new Image;m.onload=v(yi,f,"TestLoadImage: loaded",!0,h,m),m.onerror=v(yi,f,"TestLoadImage: error",!1,h,m),m.onabort=v(yi,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=v(yi,f,"TestLoadImage: timeout",!1,h,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function cx(a,h){let f=new ho,m=new AbortController,C=setTimeout(()=>{m.abort(),yi(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(x=>{clearTimeout(C),x.ok?yi(f,"TestPingServer: ok",!0,h):yi(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),yi(f,"TestPingServer: error",!1,h)})}function yi(a,h,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function lx(){this.g=new GS}function ux(a,h,f){let m=f||"";try{fv(a,function(C,x){let L=C;u(C)&&(L=md(C)),h.push(m+x+"="+encodeURIComponent(L))})}catch(C){throw h.push(m+"type="+encodeURIComponent("_badmap")),C}}function _o(a){this.l=a.Ub||null,this.j=a.eb||!1}S(_o,gd),_o.prototype.g=function(){return new Nc(this.l,this.j)},_o.prototype.i=function(a){return function(){return a}}({});function Nc(a,h){pt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Nc,pt),n=Nc.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,vo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function wv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?yo(this):vo(this),this.readyState==3&&wv(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,yo(this))},n.Qa=function(a){this.g&&(this.response=a,yo(this))},n.ga=function(){this.g&&yo(this)};function yo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vo(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Nc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bv(a){let h="";return ae(a,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function Ad(a,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=bv(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Me(a,h,f))}function je(a){pt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(je,pt);var hx=/^https?$/i,dx=["POST","PUT"];n=je.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vd.g(),this.v=this.o?Qy(this.o):Qy(vd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(x){Iv(this,x);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(dx,h,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,L]of f)this.g.setRequestHeader(x,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cv(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){Iv(this,x)}};function Iv(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Ev(a),Fc(a)}function Ev(a){a.A||(a.A=!0,Ct(a,"complete"),Ct(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ct(this,"complete"),Ct(this,"abort"),Fc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fc(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tv(this):this.bb())},n.bb=function(){Tv(this)};function Tv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Bn(a)!=4||a.Z()!=2)){if(a.u&&Bn(a)==4)Hy(a.Ea,0,a);else if(Ct(a,"readystatechange"),Bn(a)==4){a.h=!1;try{let L=a.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=L===0){var C=String(a.D).match(pv)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),m=!hx.test(C?C.toLowerCase():"")}f=m}if(f)Ct(a,"complete"),Ct(a,"success");else{a.m=6;try{var x=2<Bn(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",Ev(a)}}finally{Fc(a)}}}}function Fc(a,h){if(a.g){Cv(a);let f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ct(a,"ready");try{f.onreadystatechange=m}catch{}}}function Cv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Bn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),qS(h)}};function Av(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fx(a){let h={};a=(a.g&&2<=Bn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(B(a[m]))continue;var f=T(a[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=h[C]||[];h[C]=x,x.push(f)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wo(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Sv(a){this.Aa=0,this.i=[],this.j=new ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wo("baseRetryDelayMs",5e3,a),this.cb=wo("retryDelaySeedMs",1e4,a),this.Wa=wo("forwardChannelMaxRetries",2,a),this.wa=wo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new cv(a&&a.concurrentRequestLimit),this.Da=new lx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sv.prototype,n.la=8,n.G=1,n.connect=function(a,h,f,m){At(0),this.W=a,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Fv(this,null,this.W),Lc(this)};function Sd(a){if(xv(a),a.G==3){var h=a.U++,f=jn(a.I);if(Me(f,"SID",a.K),Me(f,"RID",h),Me(f,"TYPE","terminate"),bo(a,f),h=new gi(a,a.j,h),h.L=2,h.v=Mc(jn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Vv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Pc(h)}Nv(a)}function Vc(a){a.g&&(Rd(a),a.g.cancel(),a.g=null)}function xv(a){Vc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Uc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Lc(a){if(!lv(a.h)&&!a.s){a.s=!0;var h=a.Ga;K||fe(),Z||(K(),Z=!0),he.add(h,a),a.B=0}}function px(a,h){return uv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=uo(g(a.Ga,a,h),Mv(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new gi(this,this.j,a),x=this.o;if(this.S&&(x?(x=_(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Dv(this,C,h),f=jn(this.I),Me(f,"RID",a),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),bo(this,f),x&&(this.O?h="headers="+encodeURIComponent(String(bv(x)))+"&"+h:this.m&&Ad(f,this.m,x)),Cd(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",h),Me(f,"SID","null"),C.T=!0,bd(C,f,null)):bd(C,f,h),this.G=2}}else this.G==3&&(a?Rv(this,a):this.i.length==0||lv(this.h)||Rv(this))};function Rv(a,h){var f;h?f=h.l:f=a.U++;let m=jn(a.I);Me(m,"SID",a.K),Me(m,"RID",f),Me(m,"AID",a.T),bo(a,m),a.m&&a.o&&Ad(m,a.m,a.o),f=new gi(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Dv(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Cd(a.h,f),bd(f,m,h)}function bo(a,h){a.H&&ae(a.H,function(f,m){Me(h,m,f)}),a.l&&fv({},function(f,m){Me(h,m,f)})}function Dv(a,h,f){f=Math.min(a.i.length,f);var m=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let x=-1;for(;;){let L=["count="+f];x==-1?0<f?(x=C[0].g,L.push("ofs="+x)):x=0:L.push("ofs="+x);let Pe=!0;for(let ct=0;ct<f;ct++){let Ee=C[ct].g,mt=C[ct].map;if(Ee-=x,0>Ee)x=Math.max(0,C[ct].g-100),Pe=!1;else try{ux(mt,L,"req"+Ee+"_")}catch{m&&m(mt)}}if(Pe){m=L.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,m}function Pv(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;K||fe(),Z||(K(),Z=!0),he.add(h,a),a.v=0}}function xd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=uo(g(a.Fa,a),Mv(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,kv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=uo(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Vc(this),kv(this))};function Rd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function kv(a){a.g=new gi(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=jn(a.qa);Me(h,"RID","rpc"),Me(h,"SID",a.K),Me(h,"AID",a.T),Me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Me(h,"TO",a.ja),Me(h,"TYPE","xmlhttp"),bo(a,h),a.m&&a.o&&Ad(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Mc(jn(h)),f.m=null,f.P=!0,sv(f,a)}n.Za=function(){this.C!=null&&(this.C=null,Vc(this),xd(this),At(19))};function Uc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Ov(a,h){var f=null;if(a.g==h){Uc(a),Rd(a),a.g=null;var m=2}else if(Td(a.h,h))f=h.D,hv(a.h,h),m=1;else return;if(a.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;m=xc(),Ct(m,new tv(m,f)),Lc(a)}else Pv(a);else if(C=h.s,C==3||C==0&&0<h.X||!(m==1&&px(a,h)||m==2&&xd(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),C){case 1:Ji(a,5);break;case 4:Ji(a,10);break;case 3:Ji(a,6);break;default:Ji(a,2)}}}function Mv(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Ji(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),m=a.Xa;let C=!m;m=new Xi(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||kc(m,"https"),Mc(m),C?ax(m.toString(),f):cx(m.toString(),f)}else At(2);a.G=0,a.l&&a.l.sa(h),Nv(a),xv(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Nv(a){if(a.G=0,a.ka=[],a.l){let h=dv(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Fv(a,h,f){var m=f instanceof Xi?jn(f):new Xi(f);if(m.g!="")h&&(m.g=h+"."+m.g),Oc(m,m.s);else{var C=c.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var x=new Xi(null);m&&kc(x,m),h&&(x.g=h),C&&Oc(x,C),f&&(x.l=f),m=x}return f=a.D,h=a.ya,f&&h&&Me(m,f,h),Me(m,"VER",a.la),bo(a,m),m}function Vv(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new je(new _o({eb:f})):new je(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lv(){}n=Lv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jc(){}jc.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){pt.call(this),this.g=new Sv(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!B(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new qr(this)}S(Vt,pt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Sd(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=md(a),a=f);h.i.push(new XS(h.Ya++,a)),h.G==3&&Lc(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,Vt.aa.N.call(this)};function Uv(a){_d.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(let f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(Uv,_d);function jv(){yd.call(this),this.status=1}S(jv,yd);function qr(a){this.g=a}S(qr,Lv),qr.prototype.ua=function(){Ct(this.g,"a")},qr.prototype.ta=function(a){Ct(this.g,new Uv(a))},qr.prototype.sa=function(a){Ct(this.g,new jv)},qr.prototype.ra=function(){Ct(this.g,"b")},jc.prototype.createWebChannel=jc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,_m=Jn.createWebChannelTransport=function(){return new jc},gm=Jn.getStatEventTarget=function(){return xc()},mm=Jn.Event=Yi,cu=Jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rc.NO_ERROR=0,Rc.TIMEOUT=8,Rc.HTTP_ERROR=6,Ea=Jn.ErrorCode=Rc,nv.COMPLETE="complete",pm=Jn.EventType=nv,Xy.EventType=co,co.OPEN="a",co.CLOSE="b",co.ERROR="c",co.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ws=Jn.WebChannel=Xy,KM=Jn.FetchXmlHttpFactory=_o,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,fm=Jn.XhrIo=je}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});var EI="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var Us="10.14.0";var Er=new xn("@firebase/firestore");function Ta(){return Er.logLevel}function W(n,...e){if(Er.logLevel<=pe.DEBUG){let t=e.map(Zg);Er.debug(`Firestore (${Us}): ${n}`,...t)}}function ni(n,...e){if(Er.logLevel<=pe.ERROR){let t=e.map(Zg);Er.error(`Firestore (${Us}): ${n}`,...t)}}function Ss(n,...e){if(Er.logLevel<=pe.WARN){let t=e.map(Zg);Er.warn(`Firestore (${Us}): ${n}`,...t)}}function Zg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ue(n="Unexpected state"){let e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Be(n,e){n||ue()}function we(n,e){return n}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ei=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var du=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Em=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},Tm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Cm=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new du(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new st(e)}},Am=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Am(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);let i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string"),this.R=t.token,new xm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function YM(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var fu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=YM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function Ce(n,e){return n<e?-1:n>e?1:0}function xs(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Jt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pu=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ue(),i===void 0?i=e.length-t:i>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Qe=class n extends pu{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},QM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class n extends pu{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return QM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qe.fromString(e))}static fromName(e){return new n(Qe.fromString(e).popFirst(5))}static empty(){return new n(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qe(e.slice()))}};var Dm=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Dm.UNKNOWN_ID=-1;function XM(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=le.fromTimestamp(i===1e9?new Jt(t+1,0):new Jt(t,i));return new Tr(r,X.empty(),e)}function JM(n){return new Tr(n.readTime,n.key,-1)}var Tr=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(le.min(),X.empty(),-1)}static max(){return new n(le.max(),X.empty(),-1)}};function ZM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var eN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function e_(n){return E(this,null,function*(){if(n.code!==U.FAILED_PRECONDITION||n.message!==eN)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let u=l;t(e[u]).next(d=>{o[u]=d,++c,c===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function tN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $a(n){return n.name==="IndexedDbTransactionError"}var tE=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Lu(n){return n==null}function mu(n){return n===0&&1/n==-1/0}var nN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bz=[...nN,"documentOverlays"],iN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rN=iN,sN=[...rN,"indexConfiguration","indexState","indexEntries"];var zz=[...sN,"globals"];function TI(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ts(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ts(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ts(this.root,e,this.comparator,!0)}},Ts=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var It=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gu(this.data.getIterator())}getIteratorFrom(e){return new gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var wr=class n{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new n([])}unionWith(e){let t=new It(mn.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var _u=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _u("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var aN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(n){if(Be(!!n),typeof n=="string"){let e=0,t=aN.exec(n);if(Be(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ue(n.seconds),nanos:Ue(n.nanos)}}function Ue(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}function t_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function n_(n){let e=n.mapValue.fields.__previous_value__;return t_(e)?n_(e):e}function Pa(n){let e=ii(n.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}var km=class{constructor(e,t,i,r,s,o,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},yu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?t_(n)?4:iE(n)?9007199254740991:nE(n)?10:11:ue()}function Vn(n,e){if(n===e)return!0;let t=Cr(n);if(t!==Cr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pa(n).isEqual(Pa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ii(r.timestampValue),c=ii(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Vi(r.bytesValue).isEqual(Vi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ue(r.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(r.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ue(r.integerValue)===Ue(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ue(r.doubleValue),c=Ue(s.doubleValue);return o===c?mu(o)===mu(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return xs(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(TI(o)!==TI(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Vn(o[l],c[l])))return!1;return!0}(n,e);default:return ue()}}function ka(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function Rs(n,e){if(n===e)return 0;let t=Cr(n),i=Cr(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ue(s.integerValue||s.doubleValue),l=Ue(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return CI(n.timestampValue,e.timestampValue);case 4:return CI(Pa(n),Pa(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Vi(s),l=Vi(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){let d=Ce(c[u],l[u]);if(d!==0)return d}return Ce(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ce(Ue(s.latitude),Ue(o.latitude));return c!==0?c:Ce(Ue(s.longitude),Ue(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return AI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,u,d;let p=s.fields||{},g=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,P=Ce(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=S?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:AI(v,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===lu.mapValue&&o===lu.mapValue)return 0;if(s===lu.mapValue)return 1;if(o===lu.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){let g=Ce(l[p],d[p]);if(g!==0)return g;let v=Rs(c[l[p]],u[d[p]]);if(v!==0)return v}return Ce(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ue()}}function CI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=ii(n),i=ii(e),r=Ce(t.seconds,i.seconds);return r!==0?r:Ce(t.nanos,i.nanos)}function AI(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Rs(t[r],i[r]);if(s)return s}return Ce(t.length,i.length)}function Ds(n){return Om(n)}function Om(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ii(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Om(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Om(t.fields[o])}`;return r+"}"}(n.mapValue):ue()}function Mm(n){return!!n&&"integerValue"in n}function i_(n){return!!n&&"arrayValue"in n}function SI(n){return!!n&&"nullValue"in n}function xI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ym(n){return!!n&&"mapValue"in n}function nE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Aa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Uu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Aa(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Aa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Zn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(t)}setAll(e){let t=mn.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Aa(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];ym(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Uu(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Aa(this.value))}};var gn=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Zn.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,le.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ps=class{constructor(e,t){this.position=e,this.inclusive=t}};function RI(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=X.comparator(X.fromName(o.referenceValue),t.key):i=Rs(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function DI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var ks=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function cN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vu=class{},Ze=class n extends vu{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Fm(e,t,i):t==="array-contains"?new Um(e,i):t==="in"?new jm(e,i):t==="not-in"?new Bm(e,i):t==="array-contains-any"?new zm(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Vm(e,i):new Lm(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Rs(t,this.value)):t!==null&&Cr(this.value)===Cr(t)&&this.matchesComparison(Rs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ln=class n extends vu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return rE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function rE(n){return n.op==="and"}function sE(n){return lN(n)&&rE(n)}function lN(n){for(let e of n.filters)if(e instanceof Ln)return!1;return!0}function Nm(n){if(n instanceof Ze)return n.field.canonicalString()+n.op.toString()+Ds(n.value);if(sE(n))return n.filters.map(e=>Nm(e)).join(",");{let e=n.filters.map(t=>Nm(t)).join(",");return`${n.op}(${e})`}}function oE(n,e){return n instanceof Ze?function(i,r){return r instanceof Ze&&i.op===r.op&&i.field.isEqual(r.field)&&Vn(i.value,r.value)}(n,e):n instanceof Ln?function(i,r){return r instanceof Ln&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&oE(o,r.filters[c]),!0):!1}(n,e):void ue()}function aE(n){return n instanceof Ze?function(t){return`${t.field.canonicalString()} ${t.op} ${Ds(t.value)}`}(n):n instanceof Ln?function(t){return t.op.toString()+" {"+t.getFilters().map(aE).join(" ,")+"}"}(n):"Filter"}var Fm=class extends Ze{constructor(e,t,i){super(e,t,i),this.key=X.fromName(i.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},Vm=class extends Ze{constructor(e,t){super(e,"in",t),this.keys=cE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Lm=class extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=cE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function cE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>X.fromName(i.referenceValue))}var Um=class extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return i_(t)&&ka(t.arrayValue,this.value)}},jm=class extends Ze{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ka(this.value.arrayValue,t)}},Bm=class extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ka(this.value.arrayValue,t)}},zm=class extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!i_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ka(this.value.arrayValue,i))}};var $m=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function PI(n,e=null,t=[],i=[],r=null,s=null,o=null){return new $m(n,e,t,i,r,s,o)}function r_(n){let e=we(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Nm(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ds(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ds(i)).join(",")),e.ue=t}return e.ue}function s_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DI(n.startAt,e.startAt)&&DI(n.endAt,e.endAt)}function qm(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Os=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function uN(n,e,t,i,r,s,o,c){return new Os(n,e,t,i,r,s,o,c)}function o_(n){return new Os(n)}function kI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hN(n){return n.collectionGroup!==null}function Sa(n){let e=we(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new It(mn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ks(s,i))}),t.has(mn.keyField().canonicalString())||e.ce.push(new ks(mn.keyField(),i))}return e.ce}function Fn(n){let e=we(n);return e.le||(e.le=dN(e,Sa(n))),e.le}function dN(n,e){if(n.limitType==="F")return PI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ks(r.field,s)});let t=n.endAt?new Ps(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ps(n.startAt.position,n.startAt.inclusive):null;return PI(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Gm(n,e,t){return new Os(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ju(n,e){return s_(Fn(n),Fn(e))&&n.limitType===e.limitType}function lE(n){return`${r_(Fn(n))}|lt:${n.limitType}`}function bs(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>aE(r)).join(", ")}]`),Lu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Ds(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Ds(r)).join(",")),`Target(${i})`}(Fn(n))}; limitType=${n.limitType})`}function Bu(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Sa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let u=RI(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,Sa(i),r)||i.endAt&&!function(o,c,l){let u=RI(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,Sa(i),r))}(n,e)}function fN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uE(n){return(e,t)=>{let i=!1;for(let r of Sa(n)){let s=pN(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function pN(n,e,t){let i=n.field.isKeyField()?X.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),u=c.data.field(s);return l!==null&&u!==null?Rs(l,u):ue()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}var Li=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Uu(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return oN(this.inner)}size(){return this.innerSize}};var mN=new $e(X.comparator);function Ui(){return mN}var hE=new $e(X.comparator);function Ca(...n){let e=hE;for(let t of n)e=e.insert(t.key,t);return e}function gN(n){let e=hE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function br(){return xa()}function dE(){return xa()}function xa(){return new Li(n=>n.toString(),(n,e)=>n.isEqual(e))}var qz=new $e(X.comparator),_N=new It(X.comparator);function be(...n){let e=_N;for(let t of n)e=e.add(t);return e}var yN=new It(Ce);function vN(){return yN}function wN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function bN(n){return{integerValue:""+n}}var Ms=class{constructor(){this._=void 0}};function IN(n,e,t){return n instanceof Oa?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&t_(s)&&(s=n_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ns?fE(n,e):n instanceof Fs?pE(n,e):function(r,s){let o=TN(r,s),c=OI(o)+OI(r.Pe);return Mm(o)&&Mm(r.Pe)?bN(c):wN(r.serializer,c)}(n,e)}function EN(n,e,t){return n instanceof Ns?fE(n,e):n instanceof Fs?pE(n,e):t}function TN(n,e){return n instanceof Ma?function(i){return Mm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Oa=class extends Ms{},Ns=class extends Ms{constructor(e){super(),this.elements=e}};function fE(n,e){let t=mE(e);for(let i of n.elements)t.some(r=>Vn(r,i))||t.push(i);return{arrayValue:{values:t}}}var Fs=class extends Ms{constructor(e){super(),this.elements=e}};function pE(n,e){let t=mE(e);for(let i of n.elements)t=t.filter(r=>!Vn(r,i));return{arrayValue:{values:t}}}var Ma=class extends Ms{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function OI(n){return Ue(n.integerValue||n.doubleValue)}function mE(n){return i_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function CN(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Ns&&r instanceof Ns||i instanceof Fs&&r instanceof Fs?xs(i.elements,r.elements,Vn):i instanceof Ma&&r instanceof Ma?Vn(i.Pe,r.Pe):i instanceof Oa&&r instanceof Oa}(n.transform,e.transform)}var Ra=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Na=class{};function gE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hm(n.key,Ra.none()):new Fa(n.key,n.data,Ra.none());{let t=n.data,i=Zn.empty(),r=new It(mn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Vs(n.key,i,new wr(r.toArray()),Ra.none())}}function AN(n,e,t){n instanceof Fa?function(r,s,o){let c=r.value.clone(),l=NI(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(r,s,o){if(!hu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=NI(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(_E(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Da(n,e,t,i){return n instanceof Fa?function(s,o,c,l){if(!hu(s.precondition,o))return c;let u=s.value.clone(),d=FI(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof Vs?function(s,o,c,l){if(!hu(s.precondition,o))return c;let u=FI(s.fieldTransforms,l,o),d=o.data;return d.setAll(_E(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(s,o,c){return hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function MI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&xs(i,r,(s,o)=>CN(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fa=class extends Na{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Vs=class extends Na{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function _E(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function NI(n,e,t){let i=new Map;Be(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,EN(o,c,t[r]))}return i}function FI(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,IN(s,o,e))}return i}var Hm=class extends Na{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Wm=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&AN(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Da(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Da(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=dE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=gE(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(t,i)=>MI(t,i))&&xs(this.baseMutations,e.baseMutations,(t,i)=>MI(t,i))}};var Km=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ym=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,ve;function yE(n){if(n===void 0)return ni("GRPC error has no .code"),U.UNKNOWN;switch(n){case Ke.OK:return U.OK;case Ke.CANCELLED:return U.CANCELLED;case Ke.UNKNOWN:return U.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return U.INTERNAL;case Ke.UNAVAILABLE:return U.UNAVAILABLE;case Ke.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ke.NOT_FOUND:return U.NOT_FOUND;case Ke.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ke.ABORTED:return U.ABORTED;case Ke.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ke.DATA_LOSS:return U.DATA_LOSS;default:return ue()}}(ve=Ke||(Ke={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var VI=null;function SN(){return new TextEncoder}var xN=new Fi([4294967295,4294967295],0);function LI(n){let e=SN().encode(n),t=new dm;return t.update(e),new Uint8Array(t.digest())}function UI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([t,i],0),new Fi([r,s],0)]}var Qm=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ir(`Invalid padding: ${t}`);if(i<0)throw new Ir(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ir(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ir(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fi.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Fi.fromNumber(i)));return r.compare(xN)===1&&(r=new Fi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=LI(e),[i,r]=UI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=LI(e),[i,r]=UI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Ir=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wu=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Va.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(le.min(),r,new $e(Ce),Ui(),be())}},Va=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,be(),be(),be())}};var Cs=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},bu=class{constructor(e,t){this.targetId=e,this.me=t}},Iu=class{constructor(e,t,i=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Eu=class{constructor(){this.fe=0,this.ge=BI(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),i=be();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new Va(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=BI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Xm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=jI(),this.Qe=new $e(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(qm(s))if(i===0){let o=new X(s.path);this.Ue(t,o,gn.newNoDocument(o,le.min()))}else Be(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}VI?.et(function(d,p,g,v,S){var P,k,M,B,H,Q;let Ie={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ae=p.unchangedNames;return ae&&(Ie.bloomFilter={applied:S===0,hashCount:(P=ae?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(B=(M=(k=ae?.bits)===null||k===void 0?void 0:k.bitmap)===null||M===void 0?void 0:M.length)!==null&&B!==void 0?B:0,padding:(Q=(H=ae?.bits)===null||H===void 0?void 0:H.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var _;return(_=v?.mightContain(I))!==null&&_!==void 0&&_}}),Ie}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Vi(i).toUint8Array()}catch(l){if(l instanceof _u)return Ss("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Qm(o,r,s)}catch(l){return Ss(l instanceof Ir?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&qm(c.target)){let l=new X(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,gn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=be();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new wu(e,t,this.Qe,this.ke,i);return this.ke=Ui(),this.qe=jI(),this.Qe=new $e(Ce),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Eu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new It(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Eu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function jI(){return new $e(X.comparator)}function BI(){return new $e(X.comparator)}var RN={asc:"ASCENDING",desc:"DESCENDING"},DN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PN={and:"AND",or:"OR"},Jm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Zm(n,e){return n.useProto3Json||Lu(e)?e:{value:e}}function kN(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ON(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function As(n){return Be(!!n),le.fromTimestamp(function(t){let i=ii(t);return new Jt(i.seconds,i.nanos)}(n))}function MN(n,e){return eg(n,e).canonicalString()}function eg(n,e){let t=function(r){return new Qe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vE(n){let e=Qe.fromString(n);return Be(TE(e)),e}function vm(n,e){let t=vE(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(bE(t))}function wE(n,e){return MN(n.databaseId,e)}function NN(n){let e=vE(n);return e.length===4?Qe.emptyPath():bE(e)}function zI(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bE(n){return Be(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function FN(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Be(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(Be(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(u){let d=u.code===void 0?U.UNKNOWN:yE(u.code);return new Y(d,u.message||"")}(o);t=new Iu(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=vm(n,i.document.name),s=As(i.document.updateTime),o=i.document.createTime?As(i.document.createTime):le.min(),c=new Zn({mapValue:{fields:i.document.fields}}),l=gn.newFoundDocument(r,s,o,c),u=i.targetIds||[],d=i.removedTargetIds||[];t=new Cs(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=vm(n,i.document),s=i.readTime?As(i.readTime):le.min(),o=gn.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Cs([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=vm(n,i.document),s=i.removedTargetIds||[];t=new Cs([],s,r,null)}else{if(!("filter"in e))return ue();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Ym(r,s),c=i.targetId;t=new bu(c,o)}}return t}function VN(n,e){return{documents:[wE(n,e.path)]}}function LN(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=wE(n,r);let s=function(u){if(u.length!==0)return EE(Ln.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Is(g.field),direction:BN(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Zm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:r}}function UN(n){let e=NN(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Be(i===1);let d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(p){let g=IE(p);return g instanceof Ln&&sE(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(S){return new ks(Es(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Lu(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){let g=!!p.before,v=p.values||[];return new Ps(v,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let g=!p.before,v=p.values||[];return new Ps(v,g)}(t.endAt)),uN(e,r,o,s,c,"F",l,u)}function jN(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Es(t.unaryFilter.field);return Ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Es(t.unaryFilter.field);return Ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Es(t.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Es(t.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(t){return Ze.create(Es(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ln.create(t.compositeFilter.filters.map(i=>IE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(t.compositeFilter.op))}(n):ue()}function BN(n){return RN[n]}function zN(n){return DN[n]}function $N(n){return PN[n]}function Is(n){return{fieldPath:n.canonicalString()}}function Es(n){return mn.fromServerFormat(n.fieldPath)}function EE(n){return n instanceof Ze?function(t){if(t.op==="=="){if(xI(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NAN"}};if(SI(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xI(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NAN"}};if(SI(t.value))return{unaryFilter:{field:Is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(t.field),op:zN(t.op),value:t.value}}}(n):n instanceof Ln?function(t){let i=t.getFilters().map(r=>EE(r));return i.length===1?i[0]:{compositeFilter:{op:$N(t.op),filters:i}}}(n):ue()}function TE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var La=class n{constructor(e,t,i,r,s=le.min(),o=le.min(),c=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tg=class{constructor(e){this.ct=e}};function qN(n){let e=UN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gm(e,e.limit,"L"):e}var Tu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ue(e.integerValue));else if("doubleValue"in e){let i=Ue(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),mu(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=ii(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?iE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nE(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ue()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Ue(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),X.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Tu.vt=new Tu;var ng=class{constructor(){this.un=new ig}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Tr.min())}updateCollectionGroup(e,t,i){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},ig=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new It(Qe.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}};var Gz=new Uint8Array(0);var Mn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(41943040,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);var Ua=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var rg=class{constructor(){this.changes=new Li(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?V.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var og=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Da(i.mutation,r,wr.empty(),Jt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=be()){let r=br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ca();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=br();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,be()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=Ui(),o=xa(),c=function(){return xa()}();return t.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Vs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Da(d.mutation,u,d.mutation.getFieldMask(),Jt.now())):o.set(u.key,wr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var p;return c.set(u,new sg(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let i=xa(),r=new $e((o,c)=>o-c),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let d=i.get(l)||wr.empty();d=c.applyToLocalView(u,d),i.set(l,d);let p=(r.get(c.batchId)||be()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,d=l.value,p=dE();d.forEach(g=>{if(!s.has(g)){let v=gE(t.get(g),i.get(g));v!==null&&p.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return V.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):V.resolve(br()),c=-1,l=s;return o.next(u=>V.forEach(u,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,be())).next(d=>({batchId:c,changes:gN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(i=>{let r=Ca();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Ca();return this.indexManager.getCollectionParents(e,s).next(c=>V.forEach(c,l=>{let u=function(p,g){return new Os(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,gn.newInvalidDocument(d)))});let c=Ca();return o.forEach((l,u)=>{let d=s.get(l);d!==void 0&&Da(d.mutation,u,wr.empty(),Jt.now()),Bu(t,u)&&(c=c.insert(l,u))}),c})}};var ag=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:As(r.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:qN(r.bundledQuery),readTime:As(r.readTime)}}(t)),V.resolve()}};var cg=class{constructor(){this.overlays=new $e(X.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let i=br();return V.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),V.resolve()}getOverlaysForCollection(e,t,i){let r=br(),s=t.length+1,o=new X(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return V.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new $e((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let d=s.get(u.largestBatchId);d===null&&(d=br(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let c=br(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>c.set(u,d)),!(c.size()>=r)););return V.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Km(t,i));let s=this.Ir.get(t);s===void 0&&(s=be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var lg=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var ja=class{constructor(){this.Tr=new It(Ye.Er),this.dr=new It(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Ye(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Ye(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new X(new Qe([])),i=new Ye(t,e),r=new Ye(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new X(new Qe([])),i=new Ye(t,e),r=new Ye(t,e+1),s=be();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ye(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Ye=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return X.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||X.comparator(e.key,t.key)}};var ug=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new It(Ye.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Wm(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Ye(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Ye(t,0),r=new Ye(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(Ce);return t.forEach(r=>{let s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),V.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;X.isDocumentKey(s)||(s=s.child(""));let o=new Ye(new X(s),0),c=new It(Ce);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.wr)),!0)},o),V.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Be(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return V.forEach(t.mutations,r=>{let s=new Ye(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Ye(t,0),r=this.br.firstAfterOrEqual(i);return V.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hg=class{constructor(e){this.Mr=e,this.docs=function(){return new $e(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return V.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let i=Ui();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():gn.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ui(),o=t.path,c=new X(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ZM(JM(d),i)<=0||(r.has(d.key)||Bu(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ue()}Or(e,t){return V.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new dg(this)}getSize(e){return V.resolve(this.size)}},dg=class extends rg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var fg=class{constructor(e){this.persistence=e,this.Nr=new Li(t=>r_(t),s_),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ja,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),V.waitFor(s).next(()=>r)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return V.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),V.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return V.resolve(i)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var pg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new tE(0),this.Kr=!1,this.Kr=!0,this.$r=new lg,this.referenceDelegate=e(this),this.Ur=new fg(this),this.indexManager=new ng,this.remoteDocumentCache=function(r){return new hg(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new tg(t),this.Gr=new ag(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new ug(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);let r=new mg(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return V.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},mg=class extends Pm{constructor(e){super(),this.currentSequenceNumber=e}},gg=class n{constructor(e){this.persistence=e,this.Jr=new ja,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),V.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,i=>{let r=X.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var _g=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=be(),r=be();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var yg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ab()?8:tN(rt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new yg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Ta()<=pe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Ta()<=pe.DEBUG&&W("QueryEngine","Query:",bs(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ta()<=pe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):V.resolve())}Yi(e,t){if(kI(t))return V.resolve(null);let i=Fn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Gm(t,null,"F"),i=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=be(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.ts(t,c);return this.ns(t,u,o,l.readTime)?this.Yi(e,Gm(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,i,r){return kI(t)||r.isEqual(le.min())?V.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?V.resolve(null):(Ta()<=pe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),bs(t)),this.rs(e,o,t,XM(r,-1)).next(c=>c))})}ts(e,t){let i=new It(uE(e));return t.forEach((r,s)=>{Bu(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Ta()<=pe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",bs(t)),this.Ji.getDocumentsMatchingQuery(e,t,Tr.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var wg=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new $e(Ce),this._s=new Li(s=>r_(s),s_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new og(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function GN(n,e,t,i){return new wg(n,e,t,i)}function CE(n,e){return E(this,null,function*(){let t=we(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=be();for(let u of r){o.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of s){c.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:c}))})})})}function AE(n){let e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function HN(n,e){let t=we(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((d,p)=>{let g=r.get(p);if(!g)return;c.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,p)));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Et.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),r=r.insert(p,v),function(P,k,M){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(g,v,d)&&c.push(t.Ur.updateTargetData(s,v))});let l=Ui(),u=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(WN(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(le.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(d)}return V.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=r,s))}function WN(n,e,t){let i=be(),r=be();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ui();return t.forEach((c,l)=>{let u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function KN(n,e){let t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,V.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new La(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function bg(n,e,t){return E(this,null,function*(){let i=we(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!$a(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function $I(n,e,t){let i=we(n),r=le.min(),s=be();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){let p=we(l),g=p._s.get(d);return g!==void 0?V.resolve(p.os.get(g)):p.Ur.getTargetData(u,d)}(i,o,Fn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:le.min(),t?s:be())).next(c=>(YN(i,fN(e),c),{documents:c,Ts:s})))}function YN(n,e,t){let i=n.us.get(e)||le.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var Cu=class{constructor(){this.activeTargetIds=vN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ig=class{constructor(){this.so=new Cu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cu,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Eg=class{_o(e){}shutdown(){}};var Au=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uu=null;function wm(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}var QN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tg=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var bt="WebChannelConnection",Cg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=wm(),l=this.xo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,r).then(d=>(W("RestConnection",`Received RPC '${t}' ${c}: `,d),d),d=>{throw Ss("RestConnection",`RPC '${t}' ${c} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=QN[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=wm();return new Promise((o,c)=>{let l=new fm;l.setWithCredentials(!0),l.listenOnce(pm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ea.NO_ERROR:let d=l.getResponseJson();W(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ea.TIMEOUT:W(bt,`RPC '${e}' ${s} timed out`),c(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ea.HTTP_ERROR:let p=l.getStatus();if(W(bt,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let v=g?.error;if(v&&v.status&&v.message){let S=function(k){let M=k.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(M)>=0?M:U.UNKNOWN}(v.status);c(new Y(S,v.message))}else c(new Y(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{W(bt,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);W(bt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,i,15)})}Bo(e,t,i){let r=wm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_m(),c=gm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let d=s.join("");W(bt,`Creating RPC '${e}' stream ${r}: ${d}`,l);let p=o.createWebChannel(d,l),g=!1,v=!1,S=new Tg({Io:k=>{v?W(bt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(g||(W(bt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),W(bt,`RPC '${e}' stream ${r} sending:`,k),p.send(k))},To:()=>p.close()}),P=(k,M,B)=>{k.listen(M,H=>{try{B(H)}catch(Q){setTimeout(()=>{throw Q},0)}})};return P(p,ws.EventType.OPEN,()=>{v||(W(bt,`RPC '${e}' stream ${r} transport opened.`),S.yo())}),P(p,ws.EventType.CLOSE,()=>{v||(v=!0,W(bt,`RPC '${e}' stream ${r} transport closed`),S.So())}),P(p,ws.EventType.ERROR,k=>{v||(v=!0,Ss(bt,`RPC '${e}' stream ${r} transport errored:`,k),S.So(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),P(p,ws.EventType.MESSAGE,k=>{var M;if(!v){let B=k.data[0];Be(!!B);let H=B,Q=H.error||((M=H[0])===null||M===void 0?void 0:M.error);if(Q){W(bt,`RPC '${e}' stream ${r} received error:`,Q);let Ie=Q.status,ae=function(y){let b=Ke[y];if(b!==void 0)return yE(b)}(Ie),I=Q.message;ae===void 0&&(ae=U.INTERNAL,I="Unknown error status: "+Ie+" with message "+Q.message),v=!0,S.So(new Y(ae,I)),p.close()}else W(bt,`RPC '${e}' stream ${r} received:`,B),S.bo(B)}}),P(c,mm.STAT_EVENT,k=>{k.stat===cu.PROXY?W(bt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===cu.NOPROXY&&W(bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function bm(){return typeof document<"u"?document:null}function SE(n){return new Jm(n,!0)}var Su=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ag=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Su(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new Y(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sg=class extends Ag{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=FN(this.serializer,e),i=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?As(o.readTime):le.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=zI(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=qm(l)?{documents:VN(s,l)}:{query:LN(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=ON(s,o.resumeToken);let u=Zm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=kN(s,o.snapshotVersion.toTimestamp());let u=Zm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let i=jN(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=zI(this.serializer),t.removeTarget=e,this.a_(t)}};var xg=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,eg(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(U.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,eg(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Rg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ni(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Dg=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>E(this,null,function*(){Ga(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let u=we(l);u.L_.add(4),yield qa(u),u.q_.set("Unknown"),u.L_.delete(4),yield zu(u)})}(this))}))}),this.q_=new Rg(i,r)}};function zu(n){return E(this,null,function*(){if(Ga(n))for(let e of n.B_)yield e(!0)})}function qa(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function xE(n,e){let t=we(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),u_(t)?l_(t):js(t).r_()&&c_(t,e))}function a_(n,e){let t=we(n),i=js(t);t.N_.delete(e),i.r_()&&RE(t,e),t.N_.size===0&&(i.r_()?i.o_():Ga(t)&&t.q_.set("Unknown"))}function c_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}js(n).A_(e)}function RE(n,e){n.Q_.xe(e),js(n).R_(e)}function l_(n){n.Q_=new Xm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),js(n).start(),n.q_.v_()}function u_(n){return Ga(n)&&!js(n).n_()&&n.N_.size>0}function Ga(n){return we(n).L_.size===0}function DE(n){n.Q_=void 0}function XN(n){return E(this,null,function*(){n.q_.set("Online")})}function JN(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{c_(n,e)})})}function ZN(n,e){return E(this,null,function*(){DE(n),u_(n)?(n.q_.M_(e),l_(n)):n.q_.set("Unknown")})}function e1(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof Iu&&e.state===2&&e.cause)try{yield function(r,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield qI(n,i)}else if(e instanceof Cs?n.Q_.Ke(e):e instanceof bu?n.Q_.He(e):n.Q_.We(e),!t.isEqual(le.min()))try{let i=yield AE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{let d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),RE(s,l);let p=new La(d.target,l,u,d.sequenceNumber);c_(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield qI(n,i)}})}function qI(n,e,t){return E(this,null,function*(){if(!$a(e))throw e;n.L_.add(1),yield qa(n),n.q_.set("Offline"),t||(t=()=>AE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zu(n)}))})}function GI(n,e){return E(this,null,function*(){let t=we(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=Ga(t);t.L_.add(3),yield qa(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zu(t)})}function t1(n,e){return E(this,null,function*(){let t=we(n);e?(t.L_.delete(2),yield zu(t)):e||(t.L_.add(2),yield qa(t),t.q_.set("Unknown"))})}function js(n){return n.K_||(n.K_=function(t,i,r){let s=we(t);return s.w_(),new Sg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:XN.bind(null,n),Ro:JN.bind(null,n),mo:ZN.bind(null,n),d_:e1.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),u_(n)?l_(n):n.q_.set("Unknown")):(yield n.K_.stop(),DE(n))}))),n.K_}var Pg=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function PE(n,e){if(ni("AsyncQueue",`${e}: ${n}`),$a(n))return new Y(U.UNAVAILABLE,`${e}: ${n}`);throw n}var xu=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||X.comparator(t.key,i.key):(t,i)=>X.comparator(t.key,i.key),this.keyedMap=Ca(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ru=class{constructor(){this.W_=new $e(X.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Ls=class n{constructor(e,t,i,r,s,o,c,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,xu.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var kg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Og=class{constructor(){this.queries=HI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=we(t),s=r.queries;r.queries=HI(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}};function HI(){return new Li(n=>lE(n),ju)}function n1(n,e){return E(this,null,function*(){let t=we(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new kg,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=PE(o,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&h_(t)})}function i1(n,e){return E(this,null,function*(){let t=we(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function r1(n,e){let t=we(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&h_(t)}function s1(n,e,t){let i=we(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function h_(n){n.Y_.forEach(e=>{e.next()})}var Mg,WI;(WI=Mg||(Mg={})).ea="default",WI.Cache="cache";var Ng=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ls(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mg.Cache}};var Du=class{constructor(e){this.key=e}},Pu=class{constructor(e){this.key=e}},Fg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=uE(e),this.Ra=new xu(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new Ru,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,p)=>{let g=r.get(d),v=Bu(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),k=!1;g&&v?g.data.isEqual(v.data)?S!==P&&(i.track({type:3,doc:v}),k=!0):this.ga(g,v)||(i.track({type:2,doc:v}),k=!0,(l&&this.Aa(v,l)>0||u&&this.Aa(v,u)<0)&&(c=!0)):!g&&v?(i.track({type:0,doc:v}),k=!0):g&&!v&&(i.track({type:1,doc:g}),k=!0,(l||u)&&(c=!0)),k&&(v?(o=o.add(v),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,p)=>function(v,S){let P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return P(v)-P(S)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Ls(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ru,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=be(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Pu(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Du(i))}),t}ba(e){this.Ta=e.Ts,this.da=be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Vg=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Lg=class{constructor(e){this.key=e,this.va=!1}},Ug=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Li(c=>lE(c),ju),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(X.comparator),this.Na=new Map,this.La=new ja,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function o1(n,e,t=!0){return E(this,null,function*(){let i=FE(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield kE(i,e,t,!0),r})}function a1(n,e){return E(this,null,function*(){let t=FE(n);yield kE(t,e,!0,!1)})}function kE(n,e,t,i){return E(this,null,function*(){let r=yield KN(n.localStore,Fn(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield c1(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&xE(n.remoteStore,r),c})}function c1(n,e,t,i,r){return E(this,null,function*(){n.Ka=(p,g,v)=>function(P,k,M,B){return E(this,null,function*(){let H=k.view.ma(M);H.ns&&(H=yield $I(P.localStore,k.query,!1).then(({documents:I})=>k.view.ma(I,H)));let Q=B&&B.targetChanges.get(k.targetId),Ie=B&&B.targetMismatches.get(k.targetId)!=null,ae=k.view.applyChanges(H,P.isPrimaryClient,Q,Ie);return YI(P,k.targetId,ae.wa),ae.snapshot})}(n,p,g,v);let s=yield $I(n.localStore,e,!0),o=new Fg(e,s.Ts),c=o.ma(s.documents),l=Va.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),u=o.applyChanges(c,n.isPrimaryClient,l);YI(n,t,u.wa);let d=new Vg(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function l1(n,e,t){return E(this,null,function*(){let i=we(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ju(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&a_(i.remoteStore,r.targetId),jg(i,r.targetId)}).catch(e_))):(jg(i,r.targetId),yield bg(i.localStore,r.targetId,!0))})}function u1(n,e){return E(this,null,function*(){let t=we(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),a_(t.remoteStore,i.targetId))})}function OE(n,e){return E(this,null,function*(){let t=we(n);try{let i=yield HN(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(Be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Be(o.va):r.removedDocuments.size>0&&(Be(o.va),o.va=!1))}),yield NE(t,i,e)}catch(i){yield e_(i)}})}function KI(n,e,t){let i=we(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=we(o);l.onlineState=c;let u=!1;l.queries.forEach((d,p)=>{for(let g of p.j_)g.Z_(c)&&(u=!0)}),u&&h_(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function h1(n,e,t){return E(this,null,function*(){let i=we(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new $e(X.comparator);o=o.insert(s,gn.newNoDocument(s,le.min()));let c=be().add(s),l=new wu(le.min(),new Map,new $e(Ce),o,c);yield OE(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),d_(i)}else yield bg(i.localStore,e,!1).then(()=>jg(i,e,t)).catch(e_)})}function jg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||ME(n,i)})}function ME(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(a_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),d_(n))}function YI(n,e,t){for(let i of t)i instanceof Du?(n.La.addReference(i.key,e),d1(n,i)):i instanceof Pu?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||ME(n,i.key)):ue()}function d1(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(i),d_(n))}function d_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new X(Qe.fromString(e)),i=n.qa.next();n.Na.set(i,new Lg(t)),n.Oa=n.Oa.insert(t,i),xE(n.remoteStore,new La(Fn(o_(t.path)),i,"TargetPurposeLimboResolution",tE.oe))}}function NE(n,e,t){return E(this,null,function*(){let i=we(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(u=>{var d;if((u||t)&&i.isPrimaryClient){let p=u?!u.fromCache:(d=t?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);let p=_g.Wi(l.targetId,u);s.push(p)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,u){return E(this,null,function*(){let d=we(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(u,g=>V.forEach(g.$i,v=>d.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>V.forEach(g.Ui,v=>d.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!$a(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let v=d.os.get(g),S=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(g,P)}}})}(i.localStore,s))})}function f1(n,e){return E(this,null,function*(){let t=we(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield CE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new Y(U.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield NE(t,i.hs)}})}function p1(n,e){let t=we(n),i=t.Na.get(e);if(i&&i.va)return be().add(i.key);{let r=be(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function FE(n){let e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h1.bind(null,e),e.Ca.d_=r1.bind(null,e.eventManager),e.Ca.$a=s1.bind(null,e.eventManager),e}var QI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=SE(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return GN(this.persistence,new vg,t.initialUser,this.serializer)}Ga(t){return new pg(gg.Zr,this.serializer)}Wa(t){return new Ig}terminate(){return E(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var m1=(()=>{class n{initialize(t,i){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f1.bind(null,this.syncEngine),yield t1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Og}()}createDatastore(t){let i=SE(t.databaseInfo.databaseId),r=function(o){return new Cg(o)}(t.databaseInfo);return function(o,c,l,u){return new xg(o,c,l,u)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,c,l){return new Dg(r,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,i=>KI(this.syncEngine,i,0),function(){return Au.D()?new Au:new Eg}())}createSyncEngine(t,i){return function(s,o,c,l,u,d,p){let g=new Ug(s,o,c,l,u,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return E(this,null,function*(){var t,i;yield function(s){return E(this,null,function*(){let o=we(s);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield qa(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Bg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var zg=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=st.UNAUTHENTICATED,this.clientId=fu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>E(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=PE(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Im(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>E(this,null,function*(){i.isEqual(r)||(yield CE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function XI(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield g1(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>GI(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>GI(e.remoteStore,r)),n._onlineComponents=e})}function g1(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Im(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Ss("Error using user provided cache. Falling back to memory cache: "+t),yield Im(n,new QI)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Im(n,new QI);return n._offlineComponents})}function _1(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield XI(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield XI(n,new m1))),n._onlineComponents})}function y1(n){return E(this,null,function*(){let e=yield _1(n),t=e.eventManager;return t.onListen=o1.bind(null,e.syncEngine),t.onUnlisten=l1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=u1.bind(null,e.syncEngine),t})}function v1(n,e,t={}){let i=new ei;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,c,l,u){let d=new Bg({next:g=>{d.Za(),o.enqueueAndForget(()=>i1(s,p));let v=g.docs.has(c);!v&&g.fromCache?u.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?u.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Ng(o_(c.path),d,{includeMetadataChanges:!0,_a:!0});return n1(s,p)}(yield y1(n),n.asyncQueue,e,t,i)})),i.promise}function VE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var JI=new Map;function w1(n,e,t){if(!t)throw new Y(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b1(n,e,t,i){if(e===!0&&i===!0)throw new Y(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZI(n){if(!X.isDocumentKey(n))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue()}function $g(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=I1(n);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ku=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ba=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ku({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ku(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Em;switch(i.type){case"firstParty":return new Sm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=JI.get(t);i&&(W("ComponentProvider","Removing Datastore"),JI.delete(t),i.terminate())}(this),Promise.resolve()}};function LE(n,e,t,i={}){var r;let s=(n=$g(n,Ba))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=st.MOCK_USER;else{c=eb(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new st(u)}n._authCredentials=new Tm(new du(c,l))}}var qg=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ti=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},za=class n extends qg{constructor(e,t,i){super(e,t,o_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function UE(n,e,...t){if(n=Wn(n),arguments.length===1&&(e=fu.newId()),w1("doc","path",e),n instanceof Ba){let i=Qe.fromString(e,...t);return ZI(i),new ti(n,null,new X(i))}{if(!(n instanceof ti||n instanceof za))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Qe.fromString(e,...t));return ZI(i),new ti(n.firestore,n instanceof za?n.converter:null,new X(i))}}var Ou=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Su(this,"async_queue_retry"),this.Vu=()=>{let i=bm();i&&W("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ei;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$a(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Pg.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ue()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Mu=class extends Ba{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Ou,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ou(e),this._firestoreClient=void 0,yield e}})}};function jE(n,e){let t=typeof n=="object"?n:fr(),i=typeof n=="string"?n:e||"(default)",r=dr(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Z0("firestore");s&&LE(r,...s)}return r}function E1(n){if(n._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||T1(n),n._firestoreClient}function T1(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,u,d){return new km(c,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VE(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new zg(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var Gg=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hg=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var Wg=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var C1=new RegExp("[~\\*/\\[\\]]");function A1(n,e,t){if(e.search(C1)>=0)throw eE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nu(...e.split("."))._internalPath}catch{throw eE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eE(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Y(U.INVALID_ARGUMENT,c+n+l)}var Fu=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(BE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kg=class extends Fu{data(){return super.data()}};function BE(n,e){return typeof e=="string"?A1(n,e):e instanceof Nu?e._internalPath:e._delegate._internalPath}var Yg=class{convertValue(e,t="none"){switch(Cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Uu(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ue(o.doubleValue));return new Wg(s)}convertGeoPoint(e){return new Hg(Ue(e.latitude),Ue(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=n_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){let t=ii(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Qe.fromString(e);Be(TE(i));let r=new yu(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(t)||ni(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Qg=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vu=class extends Fu{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(BE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Xg=class extends Vu{data(e={}){return super.data(e)}};function zE(n){n=$g(n,ti);let e=$g(n.firestore,Mu);return v1(E1(e),n._key).then(t=>S1(e,n,t))}var Jg=class extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,t)}};function S1(n,e,t){let i=t.docs.get(e._key),r=new Jg(n);return new Vu(n,r,e._key,i,new Qg(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Us=r})(pn),fn(new Nt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Mu(new Cm(i.getProvider("auth-internal")),new Rm(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(u.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Fe(EI,"4.7.3",e),Fe(EI,"4.7.3","esm2017")})();var Ar=class{constructor(e){return e}},$E="firestore",f_=class{constructor(){return pa($E)}};var p_=new $("angularfire2.firestore-instances");function x1(n,e){let t=zl($E,n,e);return t&&new Ar(t)}function R1(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ar(i)}}var D1={provide:f_,deps:[[new tt,p_]]},P1={provide:Ar,useFactory:x1,deps:[[new tt,p_],Yn]};function qE(n,...e){return Fe("angularfire",kn.full,"fst"),Wt([P1,D1,{provide:p_,useFactory:R1(n),multi:!0,deps:[ne,Ve,_s,mr,[new tt,Ia],[new tt,gs],...e]}])}var $u=ki(UE,!0);var qu=ki(zE,!0);var GE=ki(jE,!0);var g_;try{g_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{g_=!1}var qe=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?al(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||g_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(D(xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ha;function k1(){if(Ha==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ha=!0}))}finally{Ha=Ha||!1}return Ha}function Bs(n){return k1()?n:!!n.capture}var _n=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(_n||{}),Gu,Sr;function Hu(){if(Sr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Sr=!1,Sr;if("scrollBehavior"in document.documentElement.style)Sr=!0;else{let n=Element.prototype.scrollTo;n?Sr=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Sr=!1}}return Sr}function zs(){if(typeof document!="object"||!document)return _n.NORMAL;if(Gu==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Gu=_n.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Gu=n.scrollLeft===0?_n.NEGATED:_n.INVERTED),n.remove()}return Gu}var m_;function O1(){if(m_==null){let n=typeof document<"u"?document.head:null;m_=!!(n&&(n.createShadowRoot||n.attachShadow))}return m_}function HE(n){if(O1()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Wa(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function yn(n){return n.composedPath?n.composedPath()[0]:n.target}function Ka(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ji(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ri(n,e=0){return M1(n)?Number(n):arguments.length===2?e:0}function M1(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function $s(n){return Array.isArray(n)?n:[n]}function Ge(n){return n==null?"":typeof n=="string"?n:`${n}px`}function si(n){return n instanceof Te?n.nativeElement:n}var N1=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[N1]})}}return n})();var KE=new Set,xr,F1=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):L1}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&V1(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(So,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V1(n,e){if(!KE.has(n))try{xr||(xr=document.createElement("style"),e&&xr.setAttribute("nonce",e),xr.setAttribute("type","text/css"),document.head.appendChild(xr)),xr.sheet&&(xr.sheet.insertRule(`@media ${n} {body{ }}`,0),KE.add(n))}catch(t){console.error(t)}}function L1(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var QE=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new re}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return YE($s(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=YE($s(t)).map(o=>this._registerQuery(o).observable),s=Hr(r);return s=$c(s.pipe(lt(1)),s.pipe(Gc(1),qc(0))),s.pipe(se(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new Lt(o=>{let c=l=>this._zone.run(()=>o.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Ht(i),se(({matches:o})=>({query:t,matches:o})),Tn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(D(F1),D(ne))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var iF=200,y_=class{constructor(e,t){this._letterKeyStream=new re,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new re,this.selectedItem=this._selectedItem;let i=typeof t?.debounceInterval=="number"?t.debounceInterval:iF;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Oe(t=>this._pressedLetters.push(t)),qc(e),Ne(()=>this._pressedLetters.length>0),se(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},v_=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=Pt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new re,this.change=new re,e instanceof Co?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Hd(e)&&(this._effectRef=Tw(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new y_(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||ji(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem=r??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return Hd(this._items)?this._items():this._items instanceof Co?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}};var Yu=class extends v_{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var Qa=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return sF(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=rF(fF(t));if(i&&(XE(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=XE(t);return t.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!hF(t)?!1:r==="audio"?t.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return dF(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||n)(D(qe))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rF(n){try{return n.frameElement}catch{return null}}function sF(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function oF(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function aF(n){return lF(n)&&n.type=="hidden"}function cF(n){return uF(n)&&n.hasAttribute("href")}function lF(n){return n.nodeName.toLowerCase()=="input"}function uF(n){return n.nodeName.toLowerCase()=="a"}function eT(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function XE(n){if(!eT(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function hF(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function dF(n){return aF(n)?!1:oF(n)||cF(n)||n.hasAttribute("contenteditable")||eT(n)}function fF(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var w_=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1,o){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Ci(e,{injector:this._injector}):setTimeout(e)}},Qu=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._injector=j(Ve),this._document=r}create(t,i=!1){return new w_(t,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(D(Qa),D(ne),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b_(n){return n.buttons===0||n.detail===0}function I_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var pF=new $("cdk-input-modality-detector-options"),mF={ignoreKeys:[18,17,224,91,16]},tT=650,qs=Bs({passive:!0,capture:!0}),gF=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new _t(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yn(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<tT||(this._modality.next(b_(o)?"keyboard":"mouse"),this._mostRecentTarget=yn(o))},this._onTouchstart=o=>{if(I_(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yn(o)},this._options=N(N({},mF),s),this.modalityDetected=this._modality.pipe(Gc(1)),this.modalityChanged=this.modalityDetected.pipe(jd()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,qs),r.addEventListener("mousedown",this._onMousedown,qs),r.addEventListener("touchstart",this._onTouchstart,qs)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,qs),document.removeEventListener("mousedown",this._onMousedown,qs),document.removeEventListener("touchstart",this._onTouchstart,qs))}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(ne),D(J),D(pF,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ku=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Ku||{}),_F=new $("cdk-focus-monitor-default-options"),Wu=Bs({passive:!0,capture:!0}),Gs=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new re,this._rootNodeFocusAndBlurListener=c=>{let l=yn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=o?.detectionMode||Ku.IMMEDIATE}monitor(t,i=!1){let r=si(t);if(!this._platform.isBrowser||r.nodeType!==1)return G();let s=HE(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let c={checkChildren:i,subject:new re,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let i=si(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=si(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Ku.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Ku.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?tT:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=yn(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wu)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Tn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(D(ne),D(qe),D(gF),D(J,8),D(_F,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rr=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Rr||{}),JE="cdk-high-contrast-black-on-white",ZE="cdk-high-contrast-white-on-black",__="cdk-high-contrast-active",E_=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=j(QE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Rr.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Rr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Rr.BLACK_ON_WHITE}return Rr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(__,JE,ZE),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Rr.BLACK_ON_WHITE?t.add(__,JE):i===Rr.WHITE_ON_BLACK&&t.add(__,ZE)}}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nT=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||n)(D(E_))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[WE]})}}return n})();var yF=new $("cdk-dir-doc",{providedIn:"root",factory:vF});function vF(){return j(J)}var wF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function bF(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?wF.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var oi=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ke,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=bF(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(D(yF,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function IF(){return!0}var EF=new $("mat-sanity-checks",{providedIn:"root",factory:IF}),Tt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Ka()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(D(E_),D(EF,8),D(J))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Bi,Bi]})}}return n})();var S_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})(),Zt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Zt||{}),C_=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Zt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},iT=Bs({passive:!0,capture:!0}),A_=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=yn(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,iT)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,iT)))}},rT={enterDuration:225,exitDuration:150},TF=800,sT=Bs({passive:!0,capture:!0}),oT=["mousedown","touchstart"],aT=["mouseup","mouseleave","touchend","touchcancel"],cT=class n{static{this._eventManager=new A_}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=si(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},rT),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||CF(e,t,r),c=e-r.left,l=t-r.top,u=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${c-o}px`,d.style.top=`${l-o}px`,d.style.height=`${o*2}px`,d.style.width=`${o*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(d);let p=window.getComputedStyle(d),g=p.transitionProperty,v=p.transitionDuration,S=g==="none"||v==="0s"||v==="0s, 0s"||r.width===0&&r.height===0,P=new C_(this,d,i,S);d.style.transform="scale3d(1, 1, 1)",P.state=Zt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let k=null;return!S&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{k&&(k.fallbackTimer=null),clearTimeout(H),this._finishRippleTransition(P)},B=()=>this._destroyRipple(P),H=setTimeout(B,u+100);d.addEventListener("transitionend",M),d.addEventListener("transitioncancel",B),k={onTransitionEnd:M,onTransitionCancel:B,fallbackTimer:H}}),this._activeRipples.set(P,k),(S||!u)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Zt.FADING_OUT||e.state===Zt.HIDDEN)return;let t=e.element,i=N(N({},rT),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Zt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=si(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,oT.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{aT.forEach(t=>{this._triggerElement.addEventListener(t,this,sT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Zt.FADING_IN?this._startFadeOutTransition(e):e.state===Zt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Zt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Zt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=b_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+TF;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!I_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Zt.VISIBLE||e.config.terminateOnPointerUp&&e.state===Zt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(oT.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(aT.forEach(t=>e.removeEventListener(t,this,sT)),this._pointerUpEventsRegistered=!1))}};function CF(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var lT=["*"];var AF=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}",x_=class{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){let e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){let t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new R_(this.rowIndex,t)}_findMatchingGap(e){e>this.tracker.length;let t=-1,i=-1;do{if(this.columnIndex+e>this.tracker.length){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t);continue}if(t=this.tracker.indexOf(0,this.columnIndex),t==-1){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t);continue}i=this._findGapEndIndex(t),this.columnIndex=t+1}while(i-t<e||i==0);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(this.tracker[t]!=0)return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}},R_=class{constructor(e,t){this.row=e,this.col=t}},uT=new $("MAT_GRID_LIST"),O_=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(ri(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(ri(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(uT,8))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(i,r){i&2&&ut("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],standalone:!0,features:[nt],ngContentSelectors:lT,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(i,r){i&1&&(Kt(),oe(0,"div",0),ht(1),de())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}}return n})();var SF=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,Xa=class{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=hT(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return t===0?"0":Dr(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r),o=this._direction==="rtl"?"right":"left";e._setStyle(o,this.getTilePosition(s,t)),e._setStyle("width",Dr(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}},D_=class extends Xa{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=hT(this.fixedRowHeight),SF.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",Dr(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",Dr(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}},P_=class extends Xa{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){let s=i/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(s,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",Dr(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",Dr(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){let t=e.split(":");t.length,this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}},k_=class extends Xa{setRowStyles(e,t){let i=100/this._rowspan,r=(this._rows-1)/this._rows,s=this.getBaseTileSize(i,r);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",Dr(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}};function Dr(n){return`calc(${n})`}function hT(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}var xF="fit",dT=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(ri(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${t??""}`}get rowHeight(){return this._rowHeight}set rowHeight(t){let i=`${t??""}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),t===xF?this._tileStyler=new k_:t&&t.indexOf(":")>-1?this._tileStyler=new P_(t):this._tileStyler=new D_(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new x_);let t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{let c=t.positions[o];this._tileStyler.setStyle(s,c.row,c.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(oi,8))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-grid-list"]],contentQueries:function(i,r,s){if(i&1&&Si(s,O_,5),i&2){let o;zt(o=$t())&&(r._tiles=o)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(i,r){i&2&&ut("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],standalone:!0,features:[dt([{provide:uT,useExisting:n}]),nt],ngContentSelectors:lT,decls:2,vars:0,template:function(i,r){i&1&&(Kt(),oe(0,"div"),ht(1),de())},styles:[AF],encapsulation:2,changeDetection:0})}}return n})(),fT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[S_,Tt,S_,Tt]})}}return n})();var Ju=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DF=0,M_=new $("CdkAccordion"),mT=(()=>{class n{constructor(){this._stateChanges=new re,this._openCloseAllActions=new re,this.id=`cdk-accordion-${DF++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",wt]},exportAs:["cdkAccordion"],standalone:!0,features:[dt([{provide:M_,useExisting:n}]),Rt,St]})}}return n})(),PF=0,gT=(()=>{class n{get expanded(){return this._expanded}set expanded(t){if(this._expanded!==t){if(this._expanded=t,this.expandedChange.emit(t),t){this.opened.emit();let i=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,i)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Pt.EMPTY,this.closed=new ke,this.opened=new ke,this.destroyed=new ke,this.expandedChange=new ke,this.id=`cdk-accordion-child-${PF++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static{this.\u0275fac=function(i){return new(i||n)(O(M_,12),O(Ot),O(Ju))}}static{this.\u0275dir=ge({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",wt],disabled:[2,"disabled","disabled",wt]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[dt([{provide:M_,useValue:void 0}]),Rt]})}}return n})(),_T=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var Ja=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Hs=class extends Ja{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},zi=class extends Ja{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},N_=class extends Ja{constructor(e){super(),this.element=e instanceof Te?e.nativeElement:e}},Ws=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Hs)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof zi)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof N_)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Zu=class extends Ws{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ve.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Pr=(()=>{class n extends Ws{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ke,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(c,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(o,c)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||n)(O(Kc),O(Ti),O(J))}}static{this.\u0275dir=ge({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Je]})}}return n})();var ai=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var MF=["body"],NF=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],FF=["mat-expansion-panel-header","*","mat-action-row"];function VF(n,e){}var LF=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],UF=["mat-panel-title","mat-panel-description","*"];function jF(n,e){if(n&1&&(oe(0,"span",1),Hc(),oe(1,"svg",2),He(2,"path",3),de()()),n&2){let t=Ai();hn("@indicatorRotate",t._getExpandedState())}}var F_=new $("MAT_ACCORDION"),yT="225ms cubic-bezier(0.4,0.0,0.2,1)",wT={indicatorRotate:ef("indicatorRotate",[Mo("collapsed, void",Oo({transform:"rotate(0deg)"})),Mo("expanded",Oo({transform:"rotate(180deg)"})),nf("expanded <=> collapsed, void => collapsed",tf(yT))]),bodyExpansion:ef("bodyExpansion",[Mo("collapsed, void",Oo({height:"0px",visibility:"hidden"})),Mo("expanded",Oo({height:"*",visibility:""})),nf("expanded <=> collapsed, void => collapsed",tf(yT))])},bT=new $("MAT_EXPANSION_PANEL"),BF=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static{this.\u0275fac=function(i){return new(i||n)(O(ir),O(bT,8))}}static{this.\u0275dir=ge({type:n,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return n})(),zF=0,IT=new $("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),V_=(()=>{class n extends gT{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,c,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new ke,this.afterCollapse=new ke,this._inputChanges=new re,this._headerId=`mat-expansion-panel-header-${zF++}`,this.accordion=t,this._document=o,this._animationsDisabled=c==="NoopAnimations",l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ht(null),Ne(()=>this.expanded&&!this._portal),lt(1)).subscribe(()=>{this._portal=new zi(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_animationStarted(t){!vT(t)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(t){vT(t)||(t.toState==="expanded"?this.afterExpand.emit():t.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(i){return new(i||n)(O(F_,12),O(Ot),O(Ju),O(Ti),O(J),O(un,8),O(IT,8))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(i&1&&Si(s,BF,5),i&2){let o;zt(o=$t())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(i&1&&Xr(MF,5),i&2){let s;zt(s=$t())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){i&2&&vt("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[dt([{provide:F_,useValue:void 0},{provide:bT,useExisting:n}]),Rt,Je,St,nt],ngContentSelectors:FF,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(i&1){let s=zn();Kt(NF),ht(0),oe(1,"div",1,0),We("@bodyExpansion.start",function(c){return an(s),cn(r._animationStarted(c))})("@bodyExpansion.done",function(c){return an(s),cn(r._animationDone(c))}),oe(3,"div",2),ht(4,1),Cn(5,VF,0,0,"ng-template",3),de(),ht(6,2),de()}i&2&&(kt(),hn("@bodyExpansion",r._getExpandedState())("id",r.id),ut("aria-labelledby",r._headerId),kt(4),hn("cdkPortalOutlet",r._portal))},dependencies:[Pr],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[wT.bodyExpansion]},changeDetection:0})}}return n})();function vT(n){return n.fromState==="void"}var L_=(()=>{class n{constructor(t,i,r,s,o,c,l){this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=Pt.EMPTY,this.tabIndex=0;let u=t.accordion?t.accordion._stateChanges.pipe(Ne(d=>!!(d.hideToggle||d.togglePosition))):In;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Kr(t.opened,t.closed,u,t._inputChanges.pipe(Ne(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ne(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ji(t)||(t.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t);return}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(i){return new(i||n)(O(V_,1),O(Te),O(Gs),O(Ot),O(IT,8),O(un,8),To("tabindex"))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){i&1&&We("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),i&2&&(ut("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Do("height",r._getHeaderHeight()),vt("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before")("_mat-animation-noopable",r._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:Ew(t)]},standalone:!0,features:[Rt,nt],ngContentSelectors:UF,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){i&1&&(Kt(LF),oe(0,"span",0),ht(1),ht(2,1),ht(3,2),de(),Cn(4,jF,3,1,"span",1)),i&2&&(vt("mat-content-hide-toggle",!r._showToggle()),kt(4),Kd(r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[wT.indicatorRotate]},changeDetection:0})}}return n})();var ET=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return n})(),TT=(()=>{class n extends mT{constructor(){super(...arguments),this._ownHeaders=new Co,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(Ht(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Yu(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=ge({type:n,selectors:[["mat-accordion"]],contentQueries:function(i,r,s){if(i&1&&Si(s,L_,5),i&2){let o;zt(o=$t())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(i,r){i&2&&vt("mat-accordion-multi",r.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[dt([{provide:F_,useExisting:n}]),Rt,Je]})}}return n})(),CT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,_T,ai]})}}return n})();var qF={value:()=>{}};function ST(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new eh(t)}function eh(n){this._=n}function GF(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}eh.prototype=ST.prototype={constructor:eh,on:function(n,e){var t=this._,i=GF(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=HF(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=AT(t[r],n.name,e);else if(e==null)for(r in t)t[r]=AT(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new eh(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function HF(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function AT(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=qF,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Za=ST;var th="http://www.w3.org/1999/xhtml",U_={svg:"http://www.w3.org/2000/svg",xhtml:th,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ci(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),U_.hasOwnProperty(e)?{space:U_[e],local:n}:n}function WF(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===th&&e.documentElement.namespaceURI===th?e.createElement(n):e.createElementNS(t,n)}}function KF(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function nh(n){var e=ci(n);return(e.local?KF:WF)(e)}function YF(){}function kr(n){return n==null?YF:function(){return this.querySelector(n)}}function xT(n){typeof n!="function"&&(n=kr(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=new Array(o),l,u,d=0;d<o;++d)(l=s[d])&&(u=n.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),c[d]=u);return new ze(i,this._parents)}function j_(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function QF(){return[]}function ec(n){return n==null?QF:function(){return this.querySelectorAll(n)}}function XF(n){return function(){return j_(n.apply(this,arguments))}}function RT(n){typeof n=="function"?n=XF(n):n=ec(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],c=o.length,l,u=0;u<c;++u)(l=o[u])&&(i.push(n.call(l,l.__data__,u,o)),r.push(l));return new ze(i,r)}function tc(n){return function(){return this.matches(n)}}function ih(n){return function(e){return e.matches(n)}}var JF=Array.prototype.find;function ZF(n){return function(){return JF.call(this.children,n)}}function eV(){return this.firstElementChild}function DT(n){return this.select(n==null?eV:ZF(typeof n=="function"?n:ih(n)))}var tV=Array.prototype.filter;function nV(){return Array.from(this.children)}function iV(n){return function(){return tV.call(this.children,n)}}function PT(n){return this.selectAll(n==null?nV:iV(typeof n=="function"?n:ih(n)))}function kT(n){typeof n!="function"&&(n=tc(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&c.push(l);return new ze(i,this._parents)}function rh(n){return new Array(n.length)}function OT(){return new ze(this._enter||this._groups.map(rh),this._parents)}function nc(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}nc.prototype={constructor:nc,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function MT(n){return function(){return n}}function rV(n,e,t,i,r,s){for(var o=0,c,l=e.length,u=s.length;o<u;++o)(c=e[o])?(c.__data__=s[o],i[o]=c):t[o]=new nc(n,s[o]);for(;o<l;++o)(c=e[o])&&(r[o]=c)}function sV(n,e,t,i,r,s,o){var c,l,u=new Map,d=e.length,p=s.length,g=new Array(d),v;for(c=0;c<d;++c)(l=e[c])&&(g[c]=v=o.call(l,l.__data__,c,e)+"",u.has(v)?r[c]=l:u.set(v,l));for(c=0;c<p;++c)v=o.call(n,s[c],c,s)+"",(l=u.get(v))?(i[c]=l,l.__data__=s[c],u.delete(v)):t[c]=new nc(n,s[c]);for(c=0;c<d;++c)(l=e[c])&&u.get(g[c])===l&&(r[c]=l)}function oV(n){return n.__data__}function NT(n,e){if(!arguments.length)return Array.from(this,oV);var t=e?sV:rV,i=this._parents,r=this._groups;typeof n!="function"&&(n=MT(n));for(var s=r.length,o=new Array(s),c=new Array(s),l=new Array(s),u=0;u<s;++u){var d=i[u],p=r[u],g=p.length,v=aV(n.call(d,d&&d.__data__,u,i)),S=v.length,P=c[u]=new Array(S),k=o[u]=new Array(S),M=l[u]=new Array(g);t(d,p,P,k,M,v,e);for(var B=0,H=0,Q,Ie;B<S;++B)if(Q=P[B]){for(B>=H&&(H=B+1);!(Ie=k[H])&&++H<S;);Q._next=Ie||null}}return o=new ze(o,i),o._enter=c,o._exit=l,o}function aV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function FT(){return new ze(this._exit||this._groups.map(rh),this._parents)}function VT(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function LT(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),c=new Array(r),l=0;l<o;++l)for(var u=t[l],d=i[l],p=u.length,g=c[l]=new Array(p),v,S=0;S<p;++S)(v=u[S]||d[S])&&(g[S]=v);for(;l<r;++l)c[l]=t[l];return new ze(c,this._parents)}function UT(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function jT(n){n||(n=cV);function e(p,g){return p&&g?n(p.__data__,g.__data__):!p-!g}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],c=o.length,l=r[s]=new Array(c),u,d=0;d<c;++d)(u=o[d])&&(l[d]=u);l.sort(e)}return new ze(r,this._parents).order()}function cV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function BT(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function zT(){return Array.from(this)}function $T(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function qT(){let n=0;for(let e of this)++n;return n}function GT(){return!this.node()}function HT(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,c;s<o;++s)(c=r[s])&&n.call(c,c.__data__,s,r);return this}function lV(n){return function(){this.removeAttribute(n)}}function uV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function hV(n,e){return function(){this.setAttribute(n,e)}}function dV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function fV(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function pV(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function WT(n,e){var t=ci(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?uV:lV:typeof e=="function"?t.local?pV:fV:t.local?dV:hV)(t,e))}function sh(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function mV(n){return function(){this.style.removeProperty(n)}}function gV(n,e,t){return function(){this.style.setProperty(n,e,t)}}function _V(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function KT(n,e,t){return arguments.length>1?this.each((e==null?mV:typeof e=="function"?_V:gV)(n,e,t??"")):$i(this.node(),n)}function $i(n,e){return n.style.getPropertyValue(e)||sh(n).getComputedStyle(n,null).getPropertyValue(e)}function yV(n){return function(){delete this[n]}}function vV(n,e){return function(){this[n]=e}}function wV(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function YT(n,e){return arguments.length>1?this.each((e==null?yV:typeof e=="function"?wV:vV)(n,e)):this.node()[n]}function QT(n){return n.trim().split(/^|\s+/)}function B_(n){return n.classList||new XT(n)}function XT(n){this._node=n,this._names=QT(n.getAttribute("class")||"")}XT.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function JT(n,e){for(var t=B_(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function ZT(n,e){for(var t=B_(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function bV(n){return function(){JT(this,n)}}function IV(n){return function(){ZT(this,n)}}function EV(n,e){return function(){(e.apply(this,arguments)?JT:ZT)(this,n)}}function eC(n,e){var t=QT(n+"");if(arguments.length<2){for(var i=B_(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?EV:e?bV:IV)(t,e))}function TV(){this.textContent=""}function CV(n){return function(){this.textContent=n}}function AV(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function tC(n){return arguments.length?this.each(n==null?TV:(typeof n=="function"?AV:CV)(n)):this.node().textContent}function SV(){this.innerHTML=""}function xV(n){return function(){this.innerHTML=n}}function RV(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function nC(n){return arguments.length?this.each(n==null?SV:(typeof n=="function"?RV:xV)(n)):this.node().innerHTML}function DV(){this.nextSibling&&this.parentNode.appendChild(this)}function iC(){return this.each(DV)}function PV(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rC(){return this.each(PV)}function sC(n){var e=typeof n=="function"?n:nh(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kV(){return null}function oC(n,e){var t=typeof n=="function"?n:nh(n),i=e==null?kV:typeof e=="function"?e:kr(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function OV(){var n=this.parentNode;n&&n.removeChild(this)}function aC(){return this.each(OV)}function MV(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function NV(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function cC(n){return this.select(n?NV:MV)}function lC(n){return arguments.length?this.property("__data__",n):this.node().__data__}function FV(n){return function(e){n.call(this,e,this.__data__)}}function VV(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function LV(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function UV(n,e,t){return function(){var i=this.__on,r,s=FV(e);if(i){for(var o=0,c=i.length;o<c;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function uC(n,e,t){var i=VV(n+""),r,s=i.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,u=c.length,d;l<u;++l)for(r=0,d=c[l];r<s;++r)if((o=i[r]).type===d.type&&o.name===d.name)return d.value}return}for(c=e?UV:LV,r=0;r<s;++r)this.each(c(i[r],e,t));return this}function hC(n,e,t){var i=sh(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function jV(n,e){return function(){return hC(this,n,e)}}function BV(n,e){return function(){return hC(this,n,e.apply(this,arguments))}}function dC(n,e){return this.each((typeof e=="function"?BV:jV)(n,e))}function*fC(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var z_=[null];function ze(n,e){this._groups=n,this._parents=e}function pC(){return new ze([[document.documentElement]],z_)}function zV(){return this}ze.prototype=pC.prototype={constructor:ze,select:xT,selectAll:RT,selectChild:DT,selectChildren:PT,filter:kT,data:NT,enter:OT,exit:FT,join:VT,merge:LT,selection:zV,order:UT,sort:jT,call:BT,nodes:zT,node:$T,size:qT,empty:GT,each:HT,attr:WT,style:KT,property:YT,classed:eC,text:tC,html:nC,raise:iC,lower:rC,append:sC,insert:oC,remove:aC,clone:cC,datum:lC,on:uC,dispatch:dC,[Symbol.iterator]:fC};var li=pC;function en(n){return typeof n=="string"?new ze([[document.querySelector(n)]],[document.documentElement]):new ze([[n]],z_)}function mC(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ui(n,e){if(n=mC(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}var oh={capture:!0,passive:!1};function ah(n){n.preventDefault(),n.stopImmediatePropagation()}function $_(n){var e=n.document.documentElement,t=en(n).on("dragstart.drag",ah,oh);"onselectstart"in e?t.on("selectstart.drag",ah,oh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function q_(n,e){var t=n.document.documentElement,i=en(n).on("dragstart.drag",null);e&&(i.on("click.drag",ah,oh),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function ch(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function G_(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function sc(){}var ic=.7,hh=1/ic,Ks="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$V=/^#([0-9a-f]{3,8})$/,qV=new RegExp(`^rgb\\(${Ks},${Ks},${Ks}\\)$`),GV=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),HV=new RegExp(`^rgba\\(${Ks},${Ks},${Ks},${rc}\\)$`),WV=new RegExp(`^rgba\\(${Un},${Un},${Un},${rc}\\)$`),KV=new RegExp(`^hsl\\(${rc},${Un},${Un}\\)$`),YV=new RegExp(`^hsla\\(${rc},${Un},${Un},${rc}\\)$`),gC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ch(sc,qi,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:_C,formatHex:_C,formatHex8:QV,formatHsl:XV,formatRgb:yC,toString:yC});function _C(){return this.rgb().formatHex()}function QV(){return this.rgb().formatHex8()}function XV(){return TC(this).formatHsl()}function yC(){return this.rgb().formatRgb()}function qi(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=$V.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?vC(e):t===3?new Ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?lh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?lh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qV.exec(n))?new Ft(e[1],e[2],e[3],1):(e=GV.exec(n))?new Ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=HV.exec(n))?lh(e[1],e[2],e[3],e[4]):(e=WV.exec(n))?lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KV.exec(n))?IC(e[1],e[2]/100,e[3]/100,1):(e=YV.exec(n))?IC(e[1],e[2]/100,e[3]/100,e[4]):gC.hasOwnProperty(n)?vC(gC[n]):n==="transparent"?new Ft(NaN,NaN,NaN,0):null}function vC(n){return new Ft(n>>16&255,n>>8&255,n&255,1)}function lh(n,e,t,i){return i<=0&&(n=e=t=NaN),new Ft(n,e,t,i)}function JV(n){return n instanceof sc||(n=qi(n)),n?(n=n.rgb(),new Ft(n.r,n.g,n.b,n.opacity)):new Ft}function Ys(n,e,t,i){return arguments.length===1?JV(n):new Ft(n,e,t,i??1)}function Ft(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}ch(Ft,Ys,G_(sc,{brighter(n){return n=n==null?hh:Math.pow(hh,n),new Ft(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ic:Math.pow(ic,n),new Ft(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ft(Mr(this.r),Mr(this.g),Mr(this.b),dh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wC,formatHex:wC,formatHex8:ZV,formatRgb:bC,toString:bC}));function wC(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}`}function ZV(){return`#${Or(this.r)}${Or(this.g)}${Or(this.b)}${Or((isNaN(this.opacity)?1:this.opacity)*255)}`}function bC(){let n=dh(this.opacity);return`${n===1?"rgb(":"rgba("}${Mr(this.r)}, ${Mr(this.g)}, ${Mr(this.b)}${n===1?")":`, ${n})`}`}function dh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Mr(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Or(n){return n=Mr(n),(n<16?"0":"")+n.toString(16)}function IC(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new vn(n,e,t,i)}function TC(n){if(n instanceof vn)return new vn(n.h,n.s,n.l,n.opacity);if(n instanceof sc||(n=qi(n)),!n)return new vn;if(n instanceof vn)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,c=s-r,l=(s+r)/2;return c?(e===s?o=(t-i)/c+(t<i)*6:t===s?o=(i-e)/c+2:o=(e-t)/c+4,c/=l<.5?s+r:2-s-r,o*=60):c=l>0&&l<1?0:o,new vn(o,c,l,n.opacity)}function CC(n,e,t,i){return arguments.length===1?TC(n):new vn(n,e,t,i??1)}function vn(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}ch(vn,CC,G_(sc,{brighter(n){return n=n==null?hh:Math.pow(hh,n),new vn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ic:Math.pow(ic,n),new vn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Ft(H_(n>=240?n-240:n+120,r,i),H_(n,r,i),H_(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new vn(EC(this.h),uh(this.s),uh(this.l),dh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=dh(this.opacity);return`${n===1?"hsl(":"hsla("}${EC(this.h)}, ${uh(this.s)*100}%, ${uh(this.l)*100}%${n===1?")":`, ${n})`}`}}));function EC(n){return n=(n||0)%360,n<0?n+360:n}function uh(n){return Math.max(0,Math.min(1,n||0))}function H_(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function W_(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function AC(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,c=i<e-1?n[i+2]:2*s-r;return W_((t-i/e)*e,o,r,s,c)}}function SC(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),r=n[(i+e-1)%e],s=n[i%e],o=n[(i+1)%e],c=n[(i+2)%e];return W_((t-i/e)*e,r,s,o,c)}}var K_=n=>()=>n;function eL(n,e){return function(t){return n+t*e}}function tL(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function xC(n){return(n=+n)==1?fh:function(e,t){return t-e?tL(e,t,n):K_(isNaN(e)?t:e)}}function fh(n,e){var t=e-n;return t?eL(n,t):K_(isNaN(n)?e:n)}var ph=function n(e){var t=xC(e);function i(r,s){var o=t((r=Ys(r)).r,(s=Ys(s)).r),c=t(r.g,s.g),l=t(r.b,s.b),u=fh(r.opacity,s.opacity);return function(d){return r.r=o(d),r.g=c(d),r.b=l(d),r.opacity=u(d),r+""}}return i.gamma=n,i}(1);function RC(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,c;for(o=0;o<t;++o)c=Ys(e[o]),i[o]=c.r||0,r[o]=c.g||0,s[o]=c.b||0;return i=n(i),r=n(r),s=n(s),c.opacity=1,function(l){return c.r=i(l),c.g=r(l),c.b=s(l),c+""}}}var nL=RC(AC),iL=RC(SC);function tn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Q_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y_=new RegExp(Q_.source,"g");function rL(n){return function(){return n}}function sL(n){return function(e){return n(e)+""}}function X_(n,e){var t=Q_.lastIndex=Y_.lastIndex=0,i,r,s,o=-1,c=[],l=[];for(n=n+"",e=e+"";(i=Q_.exec(n))&&(r=Y_.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),c[o]?c[o]+=s:c[++o]=s),(i=i[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,l.push({i:o,x:tn(i,r)})),t=Y_.lastIndex;return t<e.length&&(s=e.slice(t),c[o]?c[o]+=s:c[++o]=s),c.length<2?l[0]?sL(l[0].x):rL(e):(e=l.length,function(u){for(var d=0,p;d<e;++d)c[(p=l[d]).i]=p.x(u);return c.join("")})}var DC=180/Math.PI,mh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function J_(n,e,t,i,r,s){var o,c,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(c=Math.sqrt(t*t+i*i))&&(t/=c,i/=c,l/=c),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*DC,skewX:Math.atan(l)*DC,scaleX:o,scaleY:c}}var gh;function PC(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?mh:J_(e.a,e.b,e.c,e.d,e.e,e.f)}function kC(n){return n==null?mh:(gh||(gh=document.createElementNS("http://www.w3.org/2000/svg","g")),gh.setAttribute("transform",n),(n=gh.transform.baseVal.consolidate())?(n=n.matrix,J_(n.a,n.b,n.c,n.d,n.e,n.f)):mh)}function OC(n,e,t,i){function r(u){return u.length?u.pop()+" ":""}function s(u,d,p,g,v,S){if(u!==p||d!==g){var P=v.push("translate(",null,e,null,t);S.push({i:P-4,x:tn(u,p)},{i:P-2,x:tn(d,g)})}else(p||g)&&v.push("translate("+p+e+g+t)}function o(u,d,p,g){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),g.push({i:p.push(r(p)+"rotate(",null,i)-2,x:tn(u,d)})):d&&p.push(r(p)+"rotate("+d+i)}function c(u,d,p,g){u!==d?g.push({i:p.push(r(p)+"skewX(",null,i)-2,x:tn(u,d)}):d&&p.push(r(p)+"skewX("+d+i)}function l(u,d,p,g,v,S){if(u!==p||d!==g){var P=v.push(r(v)+"scale(",null,",",null,")");S.push({i:P-4,x:tn(u,p)},{i:P-2,x:tn(d,g)})}else(p!==1||g!==1)&&v.push(r(v)+"scale("+p+","+g+")")}return function(u,d){var p=[],g=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,p,g),o(u.rotate,d.rotate,p,g),c(u.skewX,d.skewX,p,g),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,p,g),u=d=null,function(v){for(var S=-1,P=g.length,k;++S<P;)p[(k=g[S]).i]=k.x(v);return p.join("")}}}var Z_=OC(PC,"px, ","px)","deg)"),ey=OC(kC,", ",")",")");var oL=1e-12;function MC(n){return((n=Math.exp(n))+1/n)/2}function aL(n){return((n=Math.exp(n))-1/n)/2}function cL(n){return((n=Math.exp(2*n))-1)/(n+1)}var ty=function n(e,t,i){function r(s,o){var c=s[0],l=s[1],u=s[2],d=o[0],p=o[1],g=o[2],v=d-c,S=p-l,P=v*v+S*S,k,M;if(P<oL)M=Math.log(g/u)/e,k=function(I){return[c+I*v,l+I*S,u*Math.exp(e*I*M)]};else{var B=Math.sqrt(P),H=(g*g-u*u+i*P)/(2*u*t*B),Q=(g*g-u*u-i*P)/(2*g*t*B),Ie=Math.log(Math.sqrt(H*H+1)-H),ae=Math.log(Math.sqrt(Q*Q+1)-Q);M=(ae-Ie)/e,k=function(I){var _=I*M,y=MC(Ie),b=u/(t*B)*(y*cL(e*_+Ie)-aL(Ie));return[c+b*v,l+b*S,u*y/MC(e*_+Ie)]}}return k.duration=M*1e3*e/Math.SQRT2,k}return r.rho=function(s){var o=Math.max(.001,+s),c=o*o,l=c*c;return n(o,c,l)},r}(Math.SQRT2,2,4);var Qs=0,ac=0,oc=0,FC=1e3,_h,cc,yh=0,Nr=0,vh=0,lc=typeof performance=="object"&&performance.now?performance:Date,VC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function hc(){return Nr||(VC(lL),Nr=lc.now()+vh)}function lL(){Nr=0}function uc(){this._call=this._time=this._next=null}uc.prototype=wh.prototype={constructor:uc,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?hc():+t)+(e==null?0:+e),!this._next&&cc!==this&&(cc?cc._next=this:_h=this,cc=this),this._call=n,this._time=t,ny()},stop:function(){this._call&&(this._call=null,this._time=1/0,ny())}};function wh(n,e,t){var i=new uc;return i.restart(n,e,t),i}function LC(){hc(),++Qs;for(var n=_h,e;n;)(e=Nr-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Qs}function NC(){Nr=(yh=lc.now())+vh,Qs=ac=0;try{LC()}finally{Qs=0,hL(),Nr=0}}function uL(){var n=lc.now(),e=n-yh;e>FC&&(vh-=e,yh=n)}function hL(){for(var n,e=_h,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:_h=t);cc=n,ny(i)}function ny(n){if(!Qs){ac&&(ac=clearTimeout(ac));var e=n-Nr;e>24?(n<1/0&&(ac=setTimeout(NC,n-lc.now()-vh)),oc&&(oc=clearInterval(oc))):(oc||(yh=lc.now(),oc=setInterval(uL,FC)),Qs=1,VC(NC))}}function bh(n,e,t){var i=new uc;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var dL=Za("start","end","cancel","interrupt"),fL=[],BC=0,UC=1,Eh=2,Ih=3,jC=4,Th=5,dc=6;function Gi(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;pL(n,t,{name:e,index:i,group:r,on:dL,tween:fL,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:BC})}function fc(n,e){var t=et(n,e);if(t.state>BC)throw new Error("too late; already scheduled");return t}function ft(n,e){var t=et(n,e);if(t.state>Ih)throw new Error("too late; already running");return t}function et(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function pL(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=wh(s,0,t.time);function s(u){t.state=UC,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var d,p,g,v;if(t.state!==UC)return l();for(d in i)if(v=i[d],v.name===t.name){if(v.state===Ih)return bh(o);v.state===jC?(v.state=dc,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[d]):+d<e&&(v.state=dc,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[d])}if(bh(function(){t.state===Ih&&(t.state=jC,t.timer.restart(c,t.delay,t.time),c(u))}),t.state=Eh,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Eh){for(t.state=Ih,r=new Array(g=t.tween.length),d=0,p=-1;d<g;++d)(v=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(r[++p]=v);r.length=p+1}}function c(u){for(var d=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=Th,1),p=-1,g=r.length;++p<g;)r[p].call(n,d);t.state===Th&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=dc,t.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function Hi(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>Eh&&i.state<Th,i.state=dc,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function zC(n){return this.each(function(){Hi(this,n)})}function mL(n,e){var t,i;return function(){var r=ft(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,c=i.length;o<c;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function gL(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=ft(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var c={name:e,value:t},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=c;break}l===u&&r.push(c)}s.tween=r}}function $C(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=et(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?mL:gL)(t,n,e))}function Xs(n,e,t){var i=n._id;return n.each(function(){var r=ft(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return et(r,i).value[e]}}function Ch(n,e){var t;return(typeof e=="number"?tn:e instanceof qi?ph:(t=qi(e))?(e=t,ph):X_)(n,e)}function _L(n){return function(){this.removeAttribute(n)}}function yL(n){return function(){this.removeAttributeNS(n.space,n.local)}}function vL(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function wL(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function bL(n,e,t){var i,r,s;return function(){var o,c=t(this),l;return c==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=c+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c)))}}function IL(n,e,t){var i,r,s;return function(){var o,c=t(this),l;return c==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=c+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c)))}}function qC(n,e){var t=ci(n),i=t==="transform"?ey:Ch;return this.attrTween(n,typeof e=="function"?(t.local?IL:bL)(t,i,Xs(this,"attr."+n,e)):e==null?(t.local?yL:_L)(t):(t.local?wL:vL)(t,i,e))}function EL(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function TL(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function CL(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&TL(n,s)),t}return r._value=e,r}function AL(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&EL(n,s)),t}return r._value=e,r}function GC(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=ci(n);return this.tween(t,(i.local?CL:AL)(i,e))}function SL(n,e){return function(){fc(this,n).delay=+e.apply(this,arguments)}}function xL(n,e){return e=+e,function(){fc(this,n).delay=e}}function HC(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?SL:xL)(e,n)):et(this.node(),e).delay}function RL(n,e){return function(){ft(this,n).duration=+e.apply(this,arguments)}}function DL(n,e){return e=+e,function(){ft(this,n).duration=e}}function WC(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?RL:DL)(e,n)):et(this.node(),e).duration}function PL(n,e){if(typeof e!="function")throw new Error;return function(){ft(this,n).ease=e}}function KC(n){var e=this._id;return arguments.length?this.each(PL(e,n)):et(this.node(),e).ease}function kL(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;ft(this,n).ease=t}}function YC(n){if(typeof n!="function")throw new Error;return this.each(kL(this._id,n))}function QC(n){typeof n!="function"&&(n=tc(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&c.push(l);return new Dt(i,this._parents,this._name,this._id)}function XC(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),c=0;c<s;++c)for(var l=e[c],u=t[c],d=l.length,p=o[c]=new Array(d),g,v=0;v<d;++v)(g=l[v]||u[v])&&(p[v]=g);for(;c<i;++c)o[c]=e[c];return new Dt(o,this._parents,this._name,this._id)}function OL(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function ML(n,e,t){var i,r,s=OL(e)?fc:ft;return function(){var o=s(this,n),c=o.on;c!==i&&(r=(i=c).copy()).on(e,t),o.on=r}}function JC(n,e){var t=this._id;return arguments.length<2?et(this.node(),t).on.on(n):this.each(ML(t,n,e))}function NL(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function ZC(){return this.on("end.remove",NL(this._id))}function eA(n){var e=this._name,t=this._id;typeof n!="function"&&(n=kr(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var c=i[o],l=c.length,u=s[o]=new Array(l),d,p,g=0;g<l;++g)(d=c[g])&&(p=n.call(d,d.__data__,g,c))&&("__data__"in d&&(p.__data__=d.__data__),u[g]=p,Gi(u[g],e,t,g,u,et(d,t)));return new Dt(s,this._parents,e,t)}function tA(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ec(n));for(var i=this._groups,r=i.length,s=[],o=[],c=0;c<r;++c)for(var l=i[c],u=l.length,d,p=0;p<u;++p)if(d=l[p]){for(var g=n.call(d,d.__data__,p,l),v,S=et(d,t),P=0,k=g.length;P<k;++P)(v=g[P])&&Gi(v,e,t,P,g,S);s.push(g),o.push(d)}return new Dt(s,o,e,t)}var FL=li.prototype.constructor;function nA(){return new FL(this._groups,this._parents)}function VL(n,e){var t,i,r;return function(){var s=$i(this,n),o=(this.style.removeProperty(n),$i(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function iA(n){return function(){this.style.removeProperty(n)}}function LL(n,e,t){var i,r=t+"",s;return function(){var o=$i(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function UL(n,e,t){var i,r,s;return function(){var o=$i(this,n),c=t(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(n),$i(this,n))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c))}}function jL(n,e){var t,i,r,s="style."+e,o="end."+s,c;return function(){var l=ft(this,n),u=l.on,d=l.value[s]==null?c||(c=iA(e)):void 0;(u!==t||r!==d)&&(i=(t=u).copy()).on(o,r=d),l.on=i}}function rA(n,e,t){var i=(n+="")=="transform"?Z_:Ch;return e==null?this.styleTween(n,VL(n,i)).on("end.style."+n,iA(n)):typeof e=="function"?this.styleTween(n,UL(n,i,Xs(this,"style."+n,e))).each(jL(this._id,n)):this.styleTween(n,LL(n,i,e),t).on("end.style."+n,null)}function BL(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function zL(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&BL(n,o,t)),i}return s._value=e,s}function sA(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,zL(n,e,t??""))}function $L(n){return function(){this.textContent=n}}function qL(n){return function(){var e=n(this);this.textContent=e??""}}function oA(n){return this.tween("text",typeof n=="function"?qL(Xs(this,"text",n)):$L(n==null?"":n+""))}function GL(n){return function(e){this.textContent=n.call(this,e)}}function HL(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&GL(r)),e}return i._value=n,i}function aA(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,HL(n))}function cA(){for(var n=this._name,e=this._id,t=Ah(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,l,u=0;u<c;++u)if(l=o[u]){var d=et(l,e);Gi(l,n,t,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dt(i,this._parents,n,t)}function lA(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var c={value:o},l={value:function(){--r===0&&s()}};t.each(function(){var u=ft(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(l)),u.on=e}),r===0&&s()})}var WL=0;function Dt(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function uA(n){return li().transition(n)}function Ah(){return++WL}var hi=li.prototype;Dt.prototype=uA.prototype={constructor:Dt,select:eA,selectAll:tA,selectChild:hi.selectChild,selectChildren:hi.selectChildren,filter:QC,merge:XC,selection:nA,transition:cA,call:hi.call,nodes:hi.nodes,node:hi.node,size:hi.size,empty:hi.empty,each:hi.each,on:JC,attr:qC,attrTween:GC,style:rA,styleTween:sA,text:oA,textTween:aA,remove:ZC,tween:$C,delay:HC,duration:WC,ease:KC,easeVarying:YC,end:lA,[Symbol.iterator]:hi[Symbol.iterator]};function Sh(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var KL={time:null,delay:0,duration:250,ease:Sh};function YL(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function hA(n){var e,t;n instanceof Dt?(e=n._id,n=n._name):(e=Ah(),(t=KL).time=hc(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,l,u=0;u<c;++u)(l=o[u])&&Gi(l,n,e,u,o,t||YL(l,e));return new Dt(i,this._parents,n,e)}li.prototype.interrupt=zC;li.prototype.transition=hA;var{abs:V6,max:L6,min:U6}=Math;function dA(n){return[+n[0],+n[1]]}function QL(n){return[dA(n[0]),dA(n[1])]}var j6={name:"x",handles:["w","e"].map(iy),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},B6={name:"y",handles:["n","s"].map(iy),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},z6={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(iy),input:function(n){return n==null?null:QL(n)},output:function(n){return n}};function iy(n){return{type:n}}var ry=Math.PI,sy=2*ry,Fr=1e-6,XL=sy-Fr;function fA(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function JL(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return fA;let t=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}var Vr=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fA:JL(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,s,o){this._append`C${+e},${+t},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,i,r,s){if(e=+e,t=+t,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,l=i-e,u=r-t,d=o-e,p=c-t,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Fr)if(!(Math.abs(p*l-u*d)>Fr)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let v=i-o,S=r-c,P=l*l+u*u,k=v*v+S*S,M=Math.sqrt(P),B=Math.sqrt(g),H=s*Math.tan((ry-Math.acos((P+g-k)/(2*M*B)))/2),Q=H/B,Ie=H/M;Math.abs(Q-1)>Fr&&this._append`L${e+Q*d},${t+Q*p}`,this._append`A${s},${s},0,0,${+(p*v>d*S)},${this._x1=e+Ie*l},${this._y1=t+Ie*u}`}}arc(e,t,i,r,s,o){if(e=+e,t=+t,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let c=i*Math.cos(r),l=i*Math.sin(r),u=e+c,d=t+l,p=1^o,g=o?r-s:s-r;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Fr||Math.abs(this._y1-d)>Fr)&&this._append`L${u},${d}`,i&&(g<0&&(g=g%sy+sy),g>XL?this._append`A${i},${i},0,1,${p},${e-c},${t-l}A${i},${i},0,1,${p},${this._x1=u},${this._y1=d}`:g>Fr&&this._append`A${i},${i},0,${+(g>=ry)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function pA(){return new Vr}pA.prototype=Vr.prototype;function ZL(n){var e=0,t=n.children,i=t&&t.length;if(!i)e=1;else for(;--i>=0;)e+=t[i].value;n.value=e}function mA(){return this.eachAfter(ZL)}function gA(n,e){let t=-1;for(let i of this)n.call(e,i,++t,this);return this}function _A(n,e){for(var t=this,i=[t],r,s,o=-1;t=i.pop();)if(n.call(e,t,++o,this),r=t.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function yA(n,e){for(var t=this,i=[t],r=[],s,o,c,l=-1;t=i.pop();)if(r.push(t),s=t.children)for(o=0,c=s.length;o<c;++o)i.push(s[o]);for(;t=r.pop();)n.call(e,t,++l,this);return this}function vA(n,e){let t=-1;for(let i of this)if(n.call(e,i,++t,this))return i}function wA(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)t+=i[r].value;e.value=t})}function bA(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function IA(n){for(var e=this,t=eU(e,n),i=[e];e!==t;)e=e.parent,i.push(e);for(var r=i.length;n!==t;)i.splice(r,0,n),n=n.parent;return i}function eU(n,e){if(n===e)return n;var t=n.ancestors(),i=e.ancestors(),r=null;for(n=t.pop(),e=i.pop();n===e;)r=n,n=t.pop(),e=i.pop();return r}function EA(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function TA(){return Array.from(this)}function CA(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function AA(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*SA(){var n=this,e,t=[n],i,r,s;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,i=n.children)for(r=0,s=i.length;r<s;++r)t.push(i[r]);while(t.length)}function di(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=iU)):e===void 0&&(e=nU);for(var t=new Lr(n),i,r=[t],s,o,c,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,c=l-1;c>=0;--c)r.push(s=o[c]=new Lr(o[c])),s.parent=i,s.depth=i.depth+1;return t.eachBefore(sU)}function tU(){return di(this).eachBefore(rU)}function nU(n){return n.children}function iU(n){return Array.isArray(n)?n[1]:null}function rU(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function sU(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Lr(n){this.data=n,this.depth=this.height=0,this.parent=null}Lr.prototype=di.prototype={constructor:Lr,count:mA,each:gA,eachAfter:yA,eachBefore:_A,find:vA,sum:wA,sort:bA,path:IA,ancestors:EA,descendants:TA,leaves:CA,links:AA,copy:tU,[Symbol.iterator]:SA};function oU(n,e){return n.parent===e.parent?1:2}function oy(n){var e=n.children;return e?e[0]:n.t}function ay(n){var e=n.children;return e?e[e.length-1]:n.t}function aU(n,e,t){var i=t/(e.i-n.i);e.c-=i,e.s+=t,n.c+=i,e.z+=t,e.m+=t}function cU(n){for(var e=0,t=0,i=n.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(t+=s.c)}function lU(n,e,t){return n.a.parent===e.parent?n.a:t}function xh(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}xh.prototype=Object.create(Lr.prototype);function uU(n){for(var e=new xh(n,0),t,i=[e],r,s,o,c;t=i.pop();)if(s=t._.children)for(t.children=new Array(c=s.length),o=c-1;o>=0;--o)i.push(r=t.children[o]=new xh(s[o],o)),r.parent=t;return(e.parent=new xh(null,0)).children=[e],e}function Rh(){var n=oU,e=1,t=1,i=null;function r(u){var d=uU(u);if(d.eachAfter(s),d.parent.m=-d.z,d.eachBefore(o),i)u.eachBefore(l);else{var p=u,g=u,v=u;u.eachBefore(function(B){B.x<p.x&&(p=B),B.x>g.x&&(g=B),B.depth>v.depth&&(v=B)});var S=p===g?1:n(p,g)/2,P=S-p.x,k=e/(g.x+S+P),M=t/(v.depth||1);u.eachBefore(function(B){B.x=(B.x+P)*k,B.y=B.depth*M})}return u}function s(u){var d=u.children,p=u.parent.children,g=u.i?p[u.i-1]:null;if(d){cU(u);var v=(d[0].z+d[d.length-1].z)/2;g?(u.z=g.z+n(u._,g._),u.m=u.z-v):u.z=v}else g&&(u.z=g.z+n(u._,g._));u.parent.A=c(u,g,u.parent.A||p[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function c(u,d,p){if(d){for(var g=u,v=u,S=d,P=g.parent.children[0],k=g.m,M=v.m,B=S.m,H=P.m,Q;S=ay(S),g=oy(g),S&&g;)P=oy(P),v=ay(v),v.a=u,Q=S.z+B-g.z-k+n(S._,g._),Q>0&&(aU(lU(S,u,p),u,Q),k+=Q,M+=Q),B+=S.m,k+=g.m,H+=P.m,M+=v.m;S&&!ay(v)&&(v.t=S,v.m+=B-M),g&&!oy(P)&&(P.t=g,P.m+=k-H,p=u)}return p}function l(u){u.x*=e,u.y=u.depth*t}return r.separation=function(u){return arguments.length?(n=u,r):n},r.size=function(u){return arguments.length?(i=!1,e=+u[0],t=+u[1],r):i?null:[e,t]},r.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],t=+u[1],r):i?[e,t]:null},r}function cy(n){return function(){return n}}function xA(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{let i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new Vr(e)}var RA=Array.prototype.slice;function DA(n){return n[0]}function PA(n){return n[1]}var ly=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}};function kA(n){return new ly(n,!1)}function hU(n){return n.source}function dU(n){return n.target}function OA(n){let e=hU,t=dU,i=DA,r=PA,s=null,o=null,c=xA(l);function l(){let u,d=RA.call(arguments),p=e.apply(this,d),g=t.apply(this,d);if(s==null&&(o=n(u=c())),o.lineStart(),d[0]=p,o.point(+i.apply(this,d),+r.apply(this,d)),d[0]=g,o.point(+i.apply(this,d),+r.apply(this,d)),o.lineEnd(),u)return o=null,u+""||null}return l.source=function(u){return arguments.length?(e=u,l):e},l.target=function(u){return arguments.length?(t=u,l):t},l.x=function(u){return arguments.length?(i=typeof u=="function"?u:cy(+u),l):i},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:cy(+u),l):r},l.context=function(u){return arguments.length?(u==null?s=o=null:o=n(s=u),l):s},l}function Dh(){return OA(kA)}var pc=n=>()=>n;function uy(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function wn(n,e,t){this.k=n,this.x=e,this.y=t}wn.prototype={constructor:wn,scale:function(n){return n===1?this:new wn(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new wn(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ur=new wn(1,0,0);hy.prototype=wn.prototype;function hy(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Ur;return n.__zoom}function Ph(n){n.stopImmediatePropagation()}function Js(n){n.preventDefault(),n.stopImmediatePropagation()}function fU(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function pU(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function MA(){return this.__zoom||Ur}function mU(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function gU(){return navigator.maxTouchPoints||"ontouchstart"in this}function _U(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function dy(){var n=fU,e=pU,t=_U,i=mU,r=gU,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,l=ty,u=Za("start","zoom","end"),d,p,g,v=500,S=150,P=0,k=10;function M(R){R.property("__zoom",MA).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",y).on("dblclick.zoom",b).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(R,q,F,K){var Z=R.selection?R.selection():R;Z.property("__zoom",MA),R!==Z?Ie(R,q,F,K):Z.interrupt().each(function(){ae(this,arguments).event(K).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},M.scaleBy=function(R,q,F,K){M.scaleTo(R,function(){var Z=this.__zoom.k,he=typeof q=="function"?q.apply(this,arguments):q;return Z*he},F,K)},M.scaleTo=function(R,q,F,K){M.transform(R,function(){var Z=e.apply(this,arguments),he=this.__zoom,fe=F==null?Q(Z):typeof F=="function"?F.apply(this,arguments):F,Re=he.invert(fe),Ae=typeof q=="function"?q.apply(this,arguments):q;return t(H(B(he,Ae),fe,Re),Z,o)},F,K)},M.translateBy=function(R,q,F,K){M.transform(R,function(){return t(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),o)},null,K)},M.translateTo=function(R,q,F,K,Z){M.transform(R,function(){var he=e.apply(this,arguments),fe=this.__zoom,Re=K==null?Q(he):typeof K=="function"?K.apply(this,arguments):K;return t(Ur.translate(Re[0],Re[1]).scale(fe.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof F=="function"?-F.apply(this,arguments):-F),he,o)},K,Z)};function B(R,q){return q=Math.max(s[0],Math.min(s[1],q)),q===R.k?R:new wn(q,R.x,R.y)}function H(R,q,F){var K=q[0]-F[0]*R.k,Z=q[1]-F[1]*R.k;return K===R.x&&Z===R.y?R:new wn(R.k,K,Z)}function Q(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function Ie(R,q,F,K){R.on("start.zoom",function(){ae(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){ae(this,arguments).event(K).end()}).tween("zoom",function(){var Z=this,he=arguments,fe=ae(Z,he).event(K),Re=e.apply(Z,he),Ae=F==null?Q(Re):typeof F=="function"?F.apply(Z,he):F,De=Math.max(Re[1][0]-Re[0][0],Re[1][1]-Re[0][1]),Xe=Z.__zoom,ot=typeof q=="function"?q.apply(Z,he):q,nn=l(Xe.invert(Ae).concat(De/Xe.k),ot.invert(Ae).concat(De/ot.k));return function(at){if(at===1)at=ot;else{var rn=nn(at),oo=De/rn[2];at=new wn(oo,Ae[0]-rn[0]*oo,Ae[1]-rn[1]*oo)}fe.zoom(null,at)}})}function ae(R,q,F){return!F&&R.__zooming||new I(R,q)}function I(R,q){this.that=R,this.args=q,this.active=0,this.sourceEvent=null,this.extent=e.apply(R,q),this.taps=0}I.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,q){return this.mouse&&R!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var q=en(this.that).datum();u.call(R,this.that,new uy(R,{sourceEvent:this.sourceEvent,target:M,type:R,transform:this.that.__zoom,dispatch:u}),q)}};function _(R,...q){if(!n.apply(this,arguments))return;var F=ae(this,q).event(R),K=this.__zoom,Z=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,i.apply(this,arguments)))),he=ui(R);if(F.wheel)(F.mouse[0][0]!==he[0]||F.mouse[0][1]!==he[1])&&(F.mouse[1]=K.invert(F.mouse[0]=he)),clearTimeout(F.wheel);else{if(K.k===Z)return;F.mouse=[he,K.invert(he)],Hi(this),F.start()}Js(R),F.wheel=setTimeout(fe,S),F.zoom("mouse",t(H(B(K,Z),F.mouse[0],F.mouse[1]),F.extent,o));function fe(){F.wheel=null,F.end()}}function y(R,...q){if(g||!n.apply(this,arguments))return;var F=R.currentTarget,K=ae(this,q,!0).event(R),Z=en(R.view).on("mousemove.zoom",Ae,!0).on("mouseup.zoom",De,!0),he=ui(R,F),fe=R.clientX,Re=R.clientY;$_(R.view),Ph(R),K.mouse=[he,this.__zoom.invert(he)],Hi(this),K.start();function Ae(Xe){if(Js(Xe),!K.moved){var ot=Xe.clientX-fe,nn=Xe.clientY-Re;K.moved=ot*ot+nn*nn>P}K.event(Xe).zoom("mouse",t(H(K.that.__zoom,K.mouse[0]=ui(Xe,F),K.mouse[1]),K.extent,o))}function De(Xe){Z.on("mousemove.zoom mouseup.zoom",null),q_(Xe.view,K.moved),Js(Xe),K.event(Xe).end()}}function b(R,...q){if(n.apply(this,arguments)){var F=this.__zoom,K=ui(R.changedTouches?R.changedTouches[0]:R,this),Z=F.invert(K),he=F.k*(R.shiftKey?.5:2),fe=t(H(B(F,he),K,Z),e.apply(this,q),o);Js(R),c>0?en(this).transition().duration(c).call(Ie,fe,K,R):en(this).call(M.transform,fe,K,R)}}function T(R,...q){if(n.apply(this,arguments)){var F=R.touches,K=F.length,Z=ae(this,q,R.changedTouches.length===K).event(R),he,fe,Re,Ae;for(Ph(R),fe=0;fe<K;++fe)Re=F[fe],Ae=ui(Re,this),Ae=[Ae,this.__zoom.invert(Ae),Re.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==Ae[2]&&(Z.touch1=Ae,Z.taps=0):(Z.touch0=Ae,he=!0,Z.taps=1+!!d);d&&(d=clearTimeout(d)),he&&(Z.taps<2&&(p=Ae[0],d=setTimeout(function(){d=null},v)),Hi(this),Z.start())}}function A(R,...q){if(this.__zooming){var F=ae(this,q).event(R),K=R.changedTouches,Z=K.length,he,fe,Re,Ae;for(Js(R),he=0;he<Z;++he)fe=K[he],Re=ui(fe,this),F.touch0&&F.touch0[2]===fe.identifier?F.touch0[0]=Re:F.touch1&&F.touch1[2]===fe.identifier&&(F.touch1[0]=Re);if(fe=F.that.__zoom,F.touch1){var De=F.touch0[0],Xe=F.touch0[1],ot=F.touch1[0],nn=F.touch1[1],at=(at=ot[0]-De[0])*at+(at=ot[1]-De[1])*at,rn=(rn=nn[0]-Xe[0])*rn+(rn=nn[1]-Xe[1])*rn;fe=B(fe,Math.sqrt(at/rn)),Re=[(De[0]+ot[0])/2,(De[1]+ot[1])/2],Ae=[(Xe[0]+nn[0])/2,(Xe[1]+nn[1])/2]}else if(F.touch0)Re=F.touch0[0],Ae=F.touch0[1];else return;F.zoom("touch",t(H(fe,Re,Ae),F.extent,o))}}function w(R,...q){if(this.__zooming){var F=ae(this,q).event(R),K=R.changedTouches,Z=K.length,he,fe;for(Ph(R),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),he=0;he<Z;++he)fe=K[he],F.touch0&&F.touch0[2]===fe.identifier?delete F.touch0:F.touch1&&F.touch1[2]===fe.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(fe=ui(fe,this),Math.hypot(p[0]-fe[0],p[1]-fe[1])<k)){var Re=en(this).on("dblclick.zoom");Re&&Re.apply(this,arguments)}}}return M.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:pc(+R),M):i},M.filter=function(R){return arguments.length?(n=typeof R=="function"?R:pc(!!R),M):n},M.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:pc(!!R),M):r},M.extent=function(R){return arguments.length?(e=typeof R=="function"?R:pc([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),M):e},M.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],M):[s[0],s[1]]},M.translateExtent=function(R){return arguments.length?(o[0][0]=+R[0][0],o[1][0]=+R[1][0],o[0][1]=+R[0][1],o[1][1]=+R[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(R){return arguments.length?(t=R,M):t},M.duration=function(R){return arguments.length?(c=+R,M):c},M.interpolate=function(R){return arguments.length?(l=R,M):l},M.on=function(){var R=u.on.apply(u,arguments);return R===u?M:R},M.clickDistance=function(R){return arguments.length?(P=(R=+R)*R,M):Math.sqrt(P)},M.tapDistance=function(R){return arguments.length?(k=+R,M):k},M}var kh=class n{constructor(e){this.platformId=e;al(this.platformId)&&(this.width=document.body.clientWidth,this.height=document.body.clientHeight,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerHeight=this.height-this.margin.top-this.margin.bottom)}treeData;treeInfo={nr_people:0,inverted:!1};width=0;height=0;innerWidth=0;innerHeight=0;svg;g;treeLayout;margin={top:0,right:0,bottom:0,left:0};ngAfterViewInit(){this.svg=en("svg#tree-svg").attr("width",this.width).attr("height",this.height),this.svg.append("defs").append("pattern").attr("id","grid-pattern").attr("width",20).attr("height",20).attr("patternUnits","userSpaceOnUse").append("path").attr("d","M 20 0 L 0 0 0 20").attr("fill","none").attr("stroke","#ddd").attr("stroke-width",.5),this.svg.append("rect").attr("width",this.width).attr("height",this.height).attr("fill","url(#grid-pattern)"),this.g=this.svg.append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);let t=dy().on("zoom",o=>{this.g.attr("transform",o.transform)});this.svg.call(t);let i=.4,r=this.width/25,s=this.height/3;if(this.svg.call(t.transform,Ur.translate(r,s).scale(i)),this.treeData){let c=di(this.treeData).height,l=Math.max(c*30,200),u=this.innerWidth*10;this.treeLayout=Rh().size([l,u]);let d=this.treeData.info;console.log("Info Data:",d),d.inverted?(console.log("rendering inverted tree"),this.renderInvertedTree()):(console.log("rendering not inverted tree"),this.renderTree())}}ngOnChanges(){if(this.treeData){let t=di(this.treeData).height,i=t*900,r=t*60;this.treeLayout=Rh().size([i,r]);let s=this.treeData.info;console.log("Info Data:",s),console.log(s.inverted),console.log(s.nr_people),s.inverted?(console.log("rendering inverted tree"),this.renderInvertedTree()):(console.log("rendering not inverted tree"),this.renderTree())}}renderTree(){console.log("Rendering tree with data:",this.treeData),this.g.selectAll("path").remove(),this.g.selectAll("g.node").remove();let e=di(this.treeData),t=this.treeLayout(e),i=t.links(),r=t.descendants(),s=Dh().x(c=>c.x).y(c=>c.y);console.log("Links:",i),console.log("Nodes:",r),this.g.selectAll("path").data(i).enter().append("path").attr("d",c=>s(c)).attr("stroke","#add8e6").attr("fill","none");let o=this.g.selectAll("g.node").data(e.descendants(),c=>c.data.name).enter().append("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${c.y})`);o.append("text").attr("dy","0.32em").style("font-size",c=>1-c.depth*.1+"em").text(c=>`${c.data?.data?.name||"missing"} & ${c.data?.data?.pname||""}`),o.append("text").attr("dy","1.5em").style("font-size",c=>1-c.depth*.1+"em").attr("fill","gray").text(c=>`${c.data?.data?.by||""} - ${c.data?.data?.dy||""}, ${c.data?.data?.pby||""} - ${c.data?.data?.pdy||""}`)}renderInvertedTree(){console.log("Rendering inverted tree with data:",this.treeData),this.g.selectAll("path").remove(),this.g.selectAll("g.node").remove();let e=di(this.treeData),t=this.treeLayout(e),i=t.links(),r=t.descendants(),s=Dh().x(c=>c.x).y(c=>-c.y);console.log("Links:",i),console.log("Nodes:",r),this.g.selectAll("path").data(i).enter().append("path").attr("d",c=>s(c)).attr("stroke","#add8e6").attr("fill","none");let o=this.g.selectAll("g.node").data(e.descendants(),c=>c.data.name).enter().append("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${-(c.y??0)})`);o.append("text").attr("dy","0.32em").style("font-size",c=>1-c.depth*.1+"em").text(c=>`${c.data?.data?.name||"missing"}`),o.append("text").attr("dy","1.5em").style("font-size",c=>1-c.depth*.1+"em").attr("fill","gray").text(c=>`${c.data?.data?.by||""} - ${c.data?.data?.dy||""} `)}static \u0275fac=function(t){return new(t||n)(O(xt))};static \u0275cmp=me({type:n,selectors:[["ftapp-tree-area"]],inputs:{treeData:"treeData",treeInfo:"treeInfo"},features:[St],decls:3,vars:0,consts:[[1,"scrollable-container"],["id","bar"],["id","tree-svg"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"figure",1),Hc(),He(2,"svg",2),de()())},styles:[".scrollable-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;position:relative;border:3px solid #ccc;background-color:#fff}svg[_ngcontent-%COMP%]{width:100%;height:100%;overflow:visible}path[_ngcontent-%COMP%]{fill:none;stroke:#57bdc3}text[_ngcontent-%COMP%]{text-shadow:-1px -1px 3px white,-1px 1px 3px white,1px -1px 3px white,1px 1px 3px white}@media screen and (max-width: 768px){.scrollable-container[_ngcontent-%COMP%]{height:auto;max-height:70vh;overflow-y:auto;padding:10px}}"]})};function vU(n,e){if(n&1){let t=zn();oe(0,"mat-grid-tile",8),We("click",function(){let r=an(t).$implicit,s=Ai();return cn(s.onTileClick(r))}),Le(1),de()}if(n&2){let t=e.$implicit;Do("background",t.color),hn("colspan",t.cols)("rowspan",t.rows),kt(),Yd(" ",t.text," ")}}var Oh=class n{parentId=1;jsonData;firestore=j(Ar);tiletext="Inverted";tiles=[];ngOnInit(){this.fetchAvailableCollections().subscribe(e=>{this.tiles=e.map((t,i)=>({text:t,cols:2,rows:1,color:this.getRandomColor()})),console.log(this.tiles)}),this.fetchPersonWithChildren(this.parentId,"Inverted").subscribe(e=>{this.jsonData=e,console.log("Final JSON Data:",JSON.stringify(this.jsonData,null,2))})}fetchPersonWithChildren(e,t,i=!0){let r=$u(this.firestore,`${t}/${e}`),s=i?$u(this.firestore,`${t}/information`):null;return new Lt(o=>{let c=()=>new Lt(l=>{qu(r).then(u=>{if(u.exists()){let d=u.data();if(!d.children||d.children.length===0)l.next({data:d,children:[]}),l.complete();else{let p=d.children.map(g=>this.fetchPersonWithChildren(g,t,!1).pipe(En(v=>(console.error(`Error fetching child ${g}:`,v),G(null)))));Wr(p).subscribe(g=>{let v=g.filter(S=>S!==null);l.next({data:ye(N({},d),{children:void 0}),children:v}),l.complete()})}}else console.error(`No such document for person ID: ${e}`),l.next(null),l.complete()}).catch(u=>{console.error(`Error fetching person ${e}:`,u),l.next(null),l.complete()})});i?qu(s).then(l=>{if(!l.exists()){console.error(`No such document for collection info in: ${t}`),o.next(null),o.complete();return}let u=l.data();c().subscribe(d=>{o.next(N({info:u},d)),o.complete()})}).catch(l=>{console.error(`Error fetching collection info: ${l}`),o.next(null),o.complete()}):c().subscribe(l=>{o.next(l),o.complete()})})}fetchAvailableCollections(){let e=$u(this.firestore,"Collections_metadata","1");return console.log("Fetching available collections..."),new Lt(t=>{qu(e).then(i=>{if(i.exists()){console.log("Firestore document received:",i.data());let r=i.data().Collections;r&&r.length>0?(console.log("Collections found:",r),t.next(r)):(console.warn("No collections found in the document."),t.next([]))}else console.warn("Document not found."),t.next([]);t.complete()}).catch(i=>{console.error("Error fetching collections metadata:",i),t.next([]),t.complete()})})}getRandomColor(){let e=["#0000FF","#00FFFF","#33FFFF","#66FFFF","#3333FF","#000066","#000088","#000099","#1E90FF","#4682B4","#5F9EA0"];return e[Math.floor(Math.random()*e.length)]}onTileClick(e){this.tiletext=e.text,console.log("Tile clicked:",e.text),this.fetchPersonWithChildren(this.parentId,e.text).subscribe(t=>{this.jsonData=t,console.log("Final JSON Data:",JSON.stringify(this.jsonData,null,2))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["ftapp-desktop"]],decls:13,vars:3,consts:[[1,"table-grid"],["hideToggle","",1,"table-expansion-panel"],[1,"exp-panel-title"],["cols","4","rowHeight","100px"],[3,"colspan","rowspan","background"],[1,"scrollable-container"],[3,"treeData"],[1,"tree-info"],[3,"click","colspan","rowspan"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title",2),Le(5," See other trees "),de()(),oe(6,"mat-grid-list",3),dw(7,vU,2,5,"mat-grid-tile",4,hw),de()()()(),oe(9,"div",5),He(10,"ftapp-tree-area",6),de(),oe(11,"p",7),Le(12),de()),t&2&&(kt(7),fw(i.tiles),kt(3),hn("treeData",i.jsonData),kt(2),mw("",i.tiletext," tree: ",i.jsonData==null||i.jsonData.info==null?null:i.jsonData.info.nr_people," people"))},dependencies:[dT,O_,TT,V_,L_,ET,kh],styles:[".mat-tab-group[_ngcontent-%COMP%], .mat-tab[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]{width:100%}.mat-elevation-z8[_ngcontent-%COMP%]{width:100%;min-width:100%}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{padding:16px;text-align:left;min-width:120px}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{width:100%}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{flex:1 1 auto;word-wrap:break-word}.table-expansion-panel[_ngcontent-%COMP%]{background-color:#fff;color:#fff;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;cursor:pointer}.exp-panel-title[_ngcontent-%COMP%]{color:#000;text-shadow:none}.table-grid[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:20px}.tree-info[_ngcontent-%COMP%]{color:#9b9b9bc2;font-size:12px;margin:10px}.horizontal-layout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;justify-content:flex-start}.expansion-panel-label[_ngcontent-%COMP%]{margin-right:20px;font-weight:700}.slider-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.button-container[_ngcontent-%COMP%], .button-primary[_ngcontent-%COMP%]{margin-left:20px}@media screen and (max-width: 768px){.horizontal-layout[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px;padding:10px;width:100%;max-height:50vh;overflow-y:auto}.button-container[_ngcontent-%COMP%], .button-primary[_ngcontent-%COMP%]{margin-left:0;margin-top:10px;width:100%;box-sizing:border-box}.slider-container[_ngcontent-%COMP%]{width:100%;margin-top:10px}.some-text-class[_ngcontent-%COMP%]{font-size:14px;line-height:1.4}}@media (hover: none){.mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.mat-expansion-panel-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}}"]})};var bU=20,fy=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new re,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=bU){return this._platform.isBrowser?new Lt(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(Ld(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):G()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ne(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=si(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Vd(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(D(ne),D(qe),D(J,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FA=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new re,this._elementScrolled=new Lt(o=>this.ngZone.runOutsideAngular(()=>Vd(this.elementRef.nativeElement,"scroll").pipe(Tn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&zs()!=_n.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),zs()==_n.INVERTED?t.left=t.right:zs()==_n.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Hu()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return t=="start"?t=o?r:i:t=="end"&&(t=o?i:r),o&&zs()==_n.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&zs()==_n.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(fy),O(ne),O(oi,8))}}static{this.\u0275dir=ge({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),IU=20,py=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new re,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,c=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(t=IU){return t>0?this._change.pipe(Ld(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(ne),D(J,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var NA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),my=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Bi,NA,Bi,NA]})}}return n})();var LA=Hu(),gy=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ge(-this._previousScrollPosition.left),e.style.top=Ge(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),LA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),LA&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var _y=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ne(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Mh=class{enable(){}disable(){}attach(){}};function yy(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function UA(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}var vy=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();yy(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},EU=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Mh,this.close=o=>new _y(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new gy(this._viewportRuler,this._document),this.reposition=o=>new vy(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(D(fy),D(py),D(ne),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mc=class{constructor(e){if(this.scrollStrategy=new Mh,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var wy=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var HA=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TU=(()=>{class n extends HA{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(ne,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CU=(()=>{class n extends HA{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=yn(s)},this._clickListener=s=>{let o=yn(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(jA(d.overlayElement,o)||jA(d.overlayElement,c))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(qe),D(ne,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jA(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Zs=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Ka()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),Ka()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(qe))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fi=class{constructor(e,t,i,r,s,o,c,l,u,d=!1,p){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=d,this._injector=p,this._backdropElement=null,this._backdropClick=new re,this._attachments=new re,this._detachments=new re,this._locationChanges=Pt.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new re,this._outsidePointerEvents=new re,this._renders=new re,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=An(()=>uw(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ci(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=N(N({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ye(N({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ge(this._config.width),e.height=Ge(this._config.height),e.minWidth=Ge(this._config.minWidth),e.minHeight=Ge(this._config.minHeight),e.maxWidth=Ge(this._config.maxWidth),e.maxHeight=Ge(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){let r=$s(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Tn(Kr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},BA="cdk-overlay-connected-position-bounding-box",AU=/([A-Za-z%]+)$/,by=class{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new re,this._resizeSubscription=Pt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(BA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),u=this._getOverlayPoint(l,t,c),d=this._getOverlayFit(u,t,i,c);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(d,u,i)){s.push({position:c,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:u,originPoint:l,position:c,overlayRect:t})}if(s.length){let c=null,l=-1;for(let u of s){let d=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);d>l&&(l=d,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:c}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=$A(t),{x:o,y:c}=e,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let d=0-o,p=o+s.width-i.width,g=0-c,v=c+s.height-i.height,S=this._subtractOverflows(s.width,d,p),P=this._subtractOverflows(s.height,g,v),k=S*P;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:P===s.height,fitsInViewportHorizontally:S==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=zA(this._overlayRef.getConfig().minHeight),c=zA(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,u=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=$A(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),u=Math.max(s.left-i.left-e.x,0),d=0,p=0;return r.width<=s.width?d=u||-o:d=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?p=l||-c:p=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:p},{x:e.x+d,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!SU(this._lastScrollVisibility,i)){let r=new wy(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(t.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(t.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let v=Math.min(i.bottom-e.y+i.top,e.y),S=this._lastBoundingBoxSize.height;s=v*2,o=e.y-v,s>S&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-S/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,u=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,d,p,g;if(u)g=i.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(l)p=e.x,d=i.right-e.x;else{let v=Math.min(i.right-e.x+i.left,e.x),S=this._lastBoundingBoxSize.width;d=v*2,p=e.x-v,d>S&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-S/2)}return{top:o,left:p,bottom:c,right:g,width:d,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ge(i.height),r.top=Ge(i.top),r.bottom=Ge(i.bottom),r.width=Ge(i.width),r.left=Ge(i.left),r.right=Ge(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Ge(s)),o&&(r.maxWidth=Ge(o))}this._lastBoundingBoxSize=i,jr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){jr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();jr(i,this._getExactOverlayY(t,e,d)),jr(i,this._getExactOverlayX(t,e,d))}else i.position="static";let c="",l=this._getOffset(t,"x"),u=this._getOffset(t,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=Ge(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ge(o.maxWidth):s&&(i.maxWidth="")),jr(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Ge(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=Ge(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:UA(e,i),isOriginOutsideView:yy(e,i),isOverlayClipped:UA(t,i),isOverlayOutsideView:yy(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&$s(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Te)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function jr(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function zA(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(AU);return!t||t==="px"?parseFloat(e):null}return n||null}function $A(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function SU(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var qA="cdk-global-overlay-wrapper",Iy=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(qA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),d=this._xPosition,p=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",v="",S="",P="";l?P="flex-start":d==="center"?(P="center",g?S=p:v=p):g?d==="left"||d==="end"?(P="flex-end",v=p):(d==="right"||d==="start")&&(P="flex-start",S=p):d==="left"||d==="start"?(P="flex-start",v=p):(d==="right"||d==="end")&&(P="flex-end",S=p),e.position=this._cssPosition,e.marginLeft=l?"0":v,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":S,t.justifyContent=P,t.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(qA),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},xU=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Iy}flexibleConnectedTo(t){return new by(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(D(py),D(J),D(qe),D(Zs))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RU=0,bn=(()=>{class n{constructor(t,i,r,s,o,c,l,u,d,p,g,v){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=p,this._outsideClickDispatcher=g,this._animationsModuleType=v}create(t){let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new mc(t);return o.direction=o.direction||this._directionality.value,new fi(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ei))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=`cdk-overlay-${RU++}`,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(rr)),new Zu(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(D(EU),D(Zs),D(Kc),D(xU),D(TU),D(Ve),D(ne),D(J),D(oi),D($n),D(CU),D(un,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DU=new $("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.reposition()}});function PU(n){return()=>n.scrollStrategies.reposition()}var kU={provide:DU,deps:[bn],useFactory:PU},Nh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[bn,kU],imports:[Bi,ai,my,my]})}}return n})();function OU(n,e){}var Br=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var Cy=(()=>{class n extends Ws{constructor(t,i,r,s,o,c,l,u){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=j(qe),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=j(Ot),this._injector=j(Ve),this._isDestroyed=!1,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let p=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),p},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||Ci(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Wa(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,i=Wa();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Wa()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(Qu),O(J,8),O(Br),O(Qa),O(ne),O(fi),O(Gs))}}static{this.\u0275cmp=me({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Xr(Pr,7),i&2){let s;zt(s=$t())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&ut("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Je,nt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Cn(0,OU,0,0,"ng-template",0)},dependencies:[Pr],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})(),gc=class{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new re,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!ji(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},MU=new $("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.block()}}),NU=new $("DialogData"),FU=new $("DefaultDialogConfig");var VU=0,Ay=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,c){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new re,this._afterOpenedAtThisLevel=new re,this._ariaHiddenElements=new Map,this.afterAllClosed=er(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ht(void 0))),this._scrollStrategy=c}open(t,i){let r=this._defaultOptions||new Br;i=N(N({},r),i),i.id=i.id||`cdk-dialog-${VU++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),c=new gc(o,i),l=this._attachContainer(o,c,i);return c.containerInstance=l,this._attachDialogContent(t,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){Ey(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){Ey(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),Ey(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new mc({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:Br,useValue:r},{provide:gc,useValue:i},{provide:fi,useValue:t}],c;r.container?typeof r.container=="function"?c=r.container:(c=r.container.type,o.push(...r.container.providers(r))):c=Cy;let l=new Hs(c,r.viewContainerRef,Ve.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){if(t instanceof ir){let o=this._createInjector(s,i,r,void 0),c={$implicit:s.data,dialogRef:i};s.templateContext&&(c=N(N({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new zi(t,null,c,o))}else{let o=this._createInjector(s,i,r,this._injector),c=r.attachComponentPortal(new Hs(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(t,i,r,s){let o=t.injector||t.viewContainerRef?.injector,c=[{provide:NU,useValue:t.data},{provide:gc,useValue:i}];return t.providers&&(typeof t.providers=="function"?c.push(...t.providers(i,t,r)):c.push(...t.providers)),t.direction&&(!o||!o.get(oi,null,{optional:!0}))&&c.push({provide:oi,useValue:{value:t.direction,change:G()}}),Ve.create({parent:o||s,providers:c})}_removeOpenDialog(t,i){let r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(D(bn),D(Ve),D(FU,8),D(n,12),D(Zs),D(MU))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ey(n,e){let t=n.length;for(;t--;)e(n[t])}var KA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[Ay],imports:[Nh,ai,nT,ai]})}}return n})();function LU(n,e){}var _c=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},Sy="mdc-dialog--open",YA="mdc-dialog--opening",QA="mdc-dialog--closing",UU=150,jU=75,BU=(()=>{class n extends Cy{constructor(t,i,r,s,o,c,l,u,d){super(t,i,r,s,o,c,l,d),this._animationMode=u,this._animationStateChanged=new ke,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?JA(this._config.enterAnimationDuration)??UU:0,this._exitAnimationDuration=this._animationsEnabled?JA(this._config.exitAnimationDuration)??jU:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(XA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(YA,Sy)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Sy),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Sy),this._animationsEnabled?(this._hostElement.style.setProperty(XA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(QA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(YA,QA)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(Qu),O(J,8),O(_c),O(Qa),O(ne),O(fi),O(un,8),O(Gs))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Zc("id",r._config.id),ut("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),vt("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[Je,nt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(oe(0,"div",0)(1,"div",1),Cn(2,LU,0,0,"ng-template",2),de()())},dependencies:[Pr],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return n})(),XA="--mat-dialog-transition-duration";function JA(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?ri(n.substring(0,n.length-2)):n.endsWith("s")?ri(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var Fh=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Fh||{}),Ki=class{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new re,this._beforeClosed=new re,this._state=Fh.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ne(r=>r.state==="opened"),lt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ne(r=>r.state==="closed"),lt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Kr(this.backdropClick(),this.keydownEvents().pipe(Ne(r=>r.keyCode===27&&!this.disableClose&&!ji(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),zU(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ne(t=>t.state==="closing"),lt(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Fh.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Fh.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function zU(n,e,t){return n._closeInteractionType=e,n.close(t)}var $U=new $("MatMdcDialogData"),qU=new $("mat-mdc-dialog-default-options"),GU=new $("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.block()}});var HU=0,Vh=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,c,l,u){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new re,this._afterOpenedAtThisLevel=new re,this.dialogConfigClass=_c,this.afterAllClosed=er(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ht(void 0))),this._dialog=i.get(Ay),this._dialogRefConstructor=Ki,this._dialogContainerType=BU,this._dialogDataToken=$U}open(t,i){let r;i=N(N({},this._defaultOptions||new _c),i),i.id=i.id||`mat-mdc-dialog-${HU++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(t,ye(N({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Br,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,c,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static{this.\u0275fac=function(i){return new(i||n)(D(bn),D(Ve),D($n,8),D(qU,8),D(GU),D(n,12),D(Zs),D(un,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WU=0;var KU=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=YU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(O(Ki,8),O(Te),O(Vh))}}static{this.\u0275dir=ge({type:n,standalone:!0})}}return n})(),Lh=(()=>{class n extends KU{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${WU++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=ge({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Zc("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Je]})}}return n})(),Uh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[cw([FA])]})}}return n})();function YU(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}var ZA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[Vh],imports:[KA,Nh,ai,Tt,Tt]})}}return n})();var cS=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(O(Qc),O(Te))}}static{this.\u0275dir=ge({type:n})}}return n})(),QU=(()=>{class n extends cS{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=ge({type:n,features:[Je]})}}return n})(),lS=new $("");var XU={provide:lS,useExisting:Io(()=>Wh),multi:!0};function JU(){let n=sr()?sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZU=new $(""),Wh=(()=>{class n extends cS{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!JU())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(O(Qc),O(Te),O(ZU,8))}}static{this.\u0275dir=ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&We("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[dt([XU]),Je]})}}return n})();function e2(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Dy=new $(""),uS=new $("");function t2(n){return e2(n.value)?{required:!0}:null}function eS(n){return null}function hS(n){return n!=null}function dS(n){return rl(n)?yt(n):n}function fS(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function pS(n,e){return e.map(t=>t(n))}function n2(n){return!n.validate}function mS(n){return n.map(e=>n2(e)?e:t=>e.validate(t))}function i2(n){if(!n)return null;let e=n.filter(hS);return e.length==0?null:function(t){return fS(pS(t,e))}}function Py(n){return n!=null?i2(mS(n)):null}function r2(n){if(!n)return null;let e=n.filter(hS);return e.length==0?null:function(t){let i=pS(t,e).map(dS);return Wr(i).pipe(se(fS))}}function ky(n){return n!=null?r2(mS(n)):null}function tS(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function s2(n){return n._rawValidators}function o2(n){return n._rawAsyncValidators}function Ry(n){return n?Array.isArray(n)?n:[n]:[]}function Bh(n,e){return Array.isArray(n)?n.includes(e):n===e}function nS(n,e){let t=Ry(e);return Ry(n).forEach(r=>{Bh(t,r)||t.push(r)}),t}function iS(n,e){return Ry(e).filter(t=>!Bh(n,t))}var zh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Py(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ky(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},no=class extends zh{get formDirective(){return null}get path(){return null}},Ec=class extends zh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},$h=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},a2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},NY=ye(N({},a2),{"[class.ng-submitted]":"isSubmitted"}),gS=(()=>{class n extends $h{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(O(Ec,2))}}static{this.\u0275dir=ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&vt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Je]})}}return n})(),_S=(()=>{class n extends $h{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(O(no,10))}}static{this.\u0275dir=ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&vt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Je]})}}return n})();var yc="VALID",jh="INVALID",eo="PENDING",vc="DISABLED",io=class{},qh=class extends io{constructor(e,t){super(),this.value=e,this.source=t}},bc=class extends io{constructor(e,t){super(),this.pristine=e,this.source=t}},Ic=class extends io{constructor(e,t){super(),this.touched=e,this.source=t}},to=class extends io{constructor(e,t){super(),this.status=e,this.source=t}};function yS(n){return(Kh(n)?n.validators:n)||null}function c2(n){return Array.isArray(n)?Py(n):n||null}function vS(n,e){return(Kh(e)?e.asyncValidators:n)||null}function l2(n){return Array.isArray(n)?ky(n):n||null}function Kh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function u2(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Se(1e3,"");if(!i[t])throw new Se(1001,"")}function h2(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Se(1002,"")})}var Gh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Po(()=>this.statusReactive()),this.statusReactive=Ro(void 0),this._pristine=Po(()=>this.pristineReactive()),this.pristineReactive=Ro(!0),this._touched=Po(()=>this.touchedReactive()),this.touchedReactive=Ro(!1),this._events=new re,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return An(this.statusReactive)}set status(e){An(()=>this.statusReactive.set(e))}get valid(){return this.status===yc}get invalid(){return this.status===jh}get pending(){return this.status==eo}get disabled(){return this.status===vc}get enabled(){return this.status!==vc}get pristine(){return An(this.pristineReactive)}set pristine(e){An(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return An(this.touchedReactive)}set touched(e){An(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iS(e,this._rawAsyncValidators))}hasValidator(e){return Bh(this._rawValidators,e)}hasAsyncValidator(e){return Bh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ic(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ic(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new bc(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new bc(!0,i))}markAsPending(e={}){this.status=eo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new to(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vc,this.errors=null,this._forEachChild(r=>{r.disable(ye(N({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,i)),this._events.next(new to(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yc,this._forEachChild(i=>{i.enable(ye(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yc||this.status===eo)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,t)),this._events.next(new to(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vc:yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=eo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=dS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new to(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?vc:this.errors?jh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eo)?eo:this._anyControlsHaveStatus(jh)?jh:yc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new bc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ic(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=c2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=l2(this._rawAsyncValidators)}},Hh=class extends Gh{constructor(e,t,i){super(yS(t),vS(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){h2(this,!0,e),Object.keys(e).forEach(i=>{u2(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Oy=new $("CallSetDisabledState",{providedIn:"root",factory:()=>My}),My="always";function d2(n,e){return[...e.path,n]}function wS(n,e,t=My){bS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),p2(n,e),g2(n,e),m2(n,e),f2(n,e)}function rS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function f2(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function bS(n,e){let t=s2(n);e.validator!==null?n.setValidators(tS(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=o2(n);e.asyncValidator!==null?n.setAsyncValidators(tS(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();rS(e._rawValidators,r),rS(e._rawAsyncValidators,r)}function p2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&IS(n,e)})}function m2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&IS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function IS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function g2(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _2(n,e){n==null,bS(n,e)}function y2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function v2(n){return Object.getPrototypeOf(n.constructor)===QU}function w2(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function b2(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Wh?t=s:v2(s)?i=s:r=s}),r||i||t||null}var I2={provide:no,useExisting:Io(()=>Ny)},wc=Promise.resolve(),Ny=(()=>{class n extends no{get submitted(){return An(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Po(()=>this.submittedReactive()),this.submittedReactive=Ro(!1),this._directives=new Set,this.ngSubmit=new ke,this.form=new Hh({},Py(t),ky(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wc.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),wS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wc.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wc.then(()=>{let i=this._findContainer(t.path),r=new Hh({});_2(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wc.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){wc.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),w2(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(O(Dy,10),O(uS,10),O(Oy,8))}}static{this.\u0275dir=ge({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&We("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[dt([I2]),Je]})}}return n})();function sS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var E2=class extends Gh{constructor(e=null,t,i){super(yS(t),vS(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(oS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){oS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var T2={provide:Ec,useExisting:Io(()=>Fy)},aS=Promise.resolve(),Fy=(()=>{class n extends Ec{constructor(t,i,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new E2,this._registered=!1,this.name="",this.update=new ke,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=b2(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),y2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){aS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&wt(i);aS.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?d2(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(O(no,9),O(Dy,10),O(uS,10),O(lS,10),O(Ot,8),O(Oy,8))}}static{this.\u0275dir=ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dt([T2]),Je,St]})}}return n})(),ES=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var C2=(()=>{class n{constructor(){this._validator=eS}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):eS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,features:[St]})}}return n})();var A2={provide:Dy,useExisting:Io(()=>Vy),multi:!0};var Vy=(()=>{class n extends C2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wt,this.createValidator=t=>t2}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&ut("required",r._enabled?"":null)},inputs:{required:"required"},features:[dt([A2]),Je]})}}return n})();var S2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var TS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Oy,useValue:t.callSetDisabledState??My}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[S2]})}}return n})();var R2=["*"],Yh;function D2(){if(Yh===void 0&&(Yh=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Yh=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Yh}function Tc(n){return D2()?.createHTML(n)||n}function CS(n){return Error(`Unable to find icon with the name "${n}"`)}function P2(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function AS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function SS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var pi=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},k2=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new pi(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(Bt.HTML,r);if(!o)throw SS(r);let c=Tc(o);return this._addSvgIconConfig(t,i,new pi("",c,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new pi(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(Bt.HTML,i);if(!s)throw SS(i);let o=Tc(s);return this._addSvgIconSetConfig(t,new pi("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Bt.RESOURCE_URL,t);if(!i)throw AS(t);let r=this._cachedIconsByUrl.get(i);return r?G(Qh(r)):this._loadSvgIconFromConfig(new pi(t,null)).pipe(Oe(s=>this._cachedIconsByUrl.set(i,s)),se(s=>Qh(s)))}getNamedSvgIcon(t,i=""){let r=xS(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Zi(CS(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?G(Qh(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(se(i=>Qh(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return G(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(En(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Bt.RESOURCE_URL,o.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),G(null)})));return Wr(s).pipe(se(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw CS(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(o,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Oe(i=>t.svgText=i),se(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?G(null):this._fetchIcon(t).pipe(Oe(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let c=this._svgElementFromString(Tc("<svg></svg>"));return c.appendChild(o),this._setSvgAttributes(c,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(Tc("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:c}=r[s];o!=="id"&&i.setAttribute(o,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw P2();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(Bt.RESOURCE_URL,i);if(!o)throw AS(i);let c=this._inProgressUrlFetches.get(o);if(c)return c;let l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(se(u=>Tc(u)),tr(()=>this._inProgressUrlFetches.delete(o)),Yv());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(xS(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return O2(s)?new pi(s.url,null,s.options):new pi(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(D(Kw,8),D(yf),D(J,8),D(nr))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qh(n){return n.cloneNode(!0)}function xS(n,e){return n+":"+e}function O2(n){return!!(n.url&&n.options)}var M2=new $("MAT_ICON_DEFAULT_OPTIONS"),N2=new $("mat-icon-location",{providedIn:"root",factory:F2});function F2(){let n=j(J),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var RS=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],V2=RS.map(n=>`[${n}]`).join(", "),L2=/^url\(['"]?#(.*?)['"]?\)$/,ro=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,c){this._elementRef=t,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Pt.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(V2),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)RS.forEach(o=>{let c=i[s],l=c.getAttribute(o),u=l?l.match(L2):null;if(u){let d=r.get(c);d||(d=[],r.set(c,d)),d.push({name:o,value:u[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(lt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(k2),To("aria-hidden"),O(N2),O(nr),O(M2,8))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(ut("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Jc(r.color?"mat-"+r.color:""),vt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",wt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Rt,nt],ngContentSelectors:R2,decls:1,vars:0,template:function(i,r){i&1&&(Kt(),ht(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),DS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})();var Xh=class n{password="test";canEdit=!1;onSubmit(e){let t=e.value.password;console.log(t),t===this.password?(console.log("Privileges granted"),this.canEdit=!0,e.reset(),this.dialogRef.close(this.canEdit)):console.log("Incorrect password"),e.reset()}dialogRef;constructor(e){this.dialogRef=e,this.canEdit=!1}ngOnInit(){}onCloseClick(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||n)(O(Ki))};static \u0275cmp=me({type:n,selectors:[["ftapp-logindialog"]],decls:13,vars:0,consts:[["myForm","ngForm"],[1,"dialog-header"],["mat-dialog-title",""],[1,"close-icon",3,"click"],[3,"ngSubmit"],["type","password","id","password","name","password","ngModel","","required",""],["type","submit",1,"btn","btn-primary"]],template:function(t,i){if(t&1){let r=zn();oe(0,"div",1)(1,"h2",2),Le(2,"Admin mode required"),de(),oe(3,"mat-icon",3),We("click",function(){return an(r),cn(i.onCloseClick())}),Le(4,"close"),de()(),oe(5,"mat-dialog-content")(6,"p"),Le(7,"Please enter the password!"),de(),oe(8,"form",4,0),We("ngSubmit",function(){an(r);let o=pw(9);return cn(i.onSubmit(o))}),He(10,"input",5),oe(11,"button",6),Le(12,"Submit"),de()()()}},dependencies:[ES,Wh,gS,_S,Vy,Fy,Ny,ro,Lh,Uh],styles:[".mat-mdc-dialog-surface{--mdc-dialog-container-color: white;color:#000;border-radius:8px;padding:24px;position:relative}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin-right:16px}.close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#000;position:absolute;top:10px;right:10px;width:36px;height:36px;display:flex;justify-content:center;align-items:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0003}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.password-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.password-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start}mat-dialog-actions[_ngcontent-%COMP%]{justify-content:flex-end}  mat-dialog-content p{color:#333}"]})};var Jh=class n{dialogRef;constructor(e){this.dialogRef=e}ngOnInit(){}onCloseClick(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||n)(O(Ki))};static \u0275cmp=me({type:n,selectors:[["ftapp-infodialog"]],decls:10,vars:0,consts:[[1,"dialog-header"],["mat-dialog-title",""],[1,"close-icon",3,"click"],["href","https://helpful-sprite-4ff97a.netlify.app"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"h2",1),Le(2,"Website information"),de(),oe(3,"mat-icon",2),We("click",function(){return i.onCloseClick()}),Le(4,"close"),de()(),oe(5,"mat-dialog-content")(6,"p"),Le(7,"This website was created by Boros Titusz, 2024.08.07"),de(),oe(8,"a",3),Le(9,"Contact me here"),de()())},dependencies:[ro,Lh,Uh],styles:[".mat-mdc-dialog-surface{--mdc-dialog-container-color: white;color:#000;border-radius:8px;padding:24px;position:relative}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin-right:16px}.close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#000;position:absolute;top:10px;right:10px;width:36px;height:36px;display:flex;justify-content:center;align-items:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0003}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-dialog-actions[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}"]})};var Zh=class n{canEditSubject=new _t(!1);canEdit$=this.canEditSubject.asObservable();setCanEdit(e){this.canEditSubject.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var j2=["*",[["mat-toolbar-row"]]],B2=["*","mat-toolbar-row"],z2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=ge({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),PS=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(qe),O(J))}}static{this.\u0275cmp=me({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Si(s,z2,5),i&2){let o;zt(o=$t())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Jc(r.color?"mat-"+r.color:""),vt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[nt],ngContentSelectors:B2,decls:2,vars:0,template:function(i,r){i&1&&(Kt(j2),ht(0),ht(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var kS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})();function q2(n,e){if(n&1){let t=zn();oe(0,"button",4),We("click",function(){an(t);let r=Ai();return cn(r.openLoginDialog())}),oe(1,"mat-icon"),Le(2,"edit"),de()()}}function G2(n,e){if(n&1){let t=zn();oe(0,"button",4),We("click",function(){an(t);let r=Ai();return cn(r.saveData())}),oe(1,"mat-icon"),Le(2,"check"),de()()}}var ed=class n{constructor(e,t){this.dialog=e;this.editModeService=t}canEdit=!1;ngOnInit(){}saveData(){this.canEdit=!1,this.editModeService.setCanEdit(!1)}openLoginDialog(){this.dialog.open(Xh).afterClosed().subscribe(t=>{this.canEdit=t===!0,this.editModeService.setCanEdit(this.canEdit),console.log("The dialog was closed"),console.log("canEdit:",this.canEdit)})}openInfoDialog(){this.dialog.open(Jh).afterClosed().subscribe(()=>{console.log("The dialog was closed")})}static \u0275fac=function(t){return new(t||n)(O(Vh),O(Zh))};static \u0275cmp=me({type:n,selectors:[["ftapp-header"]],decls:9,vars:2,consts:[[1,"top-toolbar"],[1,"example-spacer"],["mat-icon-button","","class","edit-icon","aria-label","Edit icon",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Info icon",1,"info-icon",3,"click"],["mat-icon-button","","aria-label","Edit icon",1,"edit-icon",3,"click"]],template:function(t,i){t&1&&(oe(0,"mat-toolbar",0)(1,"span"),Le(2,"Family Tree App"),de(),He(3,"span",1),Cn(4,q2,3,0,"button",2)(5,G2,3,0,"button",2),oe(6,"button",3),We("click",function(){return i.openInfoDialog()}),oe(7,"mat-icon"),Le(8,"info"),de()()()),t&2&&(kt(4),hn("ngIf",!i.canEdit),kt(),hn("ngIf",i.canEdit))},dependencies:[Pw,PS,ro],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.top-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#cfcdcd;color:#000;z-index:1000}"]})};var td=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["ftapp-footer"]],decls:4,vars:0,consts:[[1,"bottom-card"],[1,"footer-content"]],template:function(t,i){t&1&&(oe(0,"footer",0)(1,"div",1)(2,"p"),Le(3,"Boros Titusz - 2024"),de()()())},styles:[".bottom-card[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#333;color:#fff;border-top:1px solid #444;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:center;align-items:center;padding:10px}.footer-content[_ngcontent-%COMP%]{text-align:center}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.footer-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s ease}.footer-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var so=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["ftapp-home"]],decls:3,vars:0,template:function(t,i){t&1&&He(0,"ftapp-header")(1,"ftapp-desktop")(2,"ftapp-footer")},dependencies:[Oh,ed,td],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}ftapp-top-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#fff;color:#fff;z-index:1000;height:64px}ftapp-bottom-card[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#333;color:#fff;border-top:1px solid #444;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:center;align-items:center;padding:10px;height:60px}ftapp-desktop[_ngcontent-%COMP%]{margin-top:400px;margin-bottom:400px;padding:16px;height:calc(100vh - 124px);overflow:auto}"]})};var nd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["ftapp-notfound"]],decls:4,vars:0,consts:[["mat-card-image","","src","assets/404.png","alt","404"]],template:function(t,i){t&1&&(oe(0,"div")(1,"h1"),Le(2," The resource you are looking for does not exist! "),de(),He(3,"img",0),de())}})};var Y2=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:so},{path:"**",component:nd}],id=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n});static \u0275inj=ee({imports:[np.forRoot(Y2),np]})};var rd=class n{title="familytreeapp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=me({type:n,selectors:[["ftapp-root"]],decls:1,vars:0,template:function(t,i){t&1&&He(0,"ftapp-home")},dependencies:[so],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}ftapp-top-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#fff;color:#fff;z-index:1000;height:64px}ftapp-bottom-card[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#333;color:#fff;border-top:1px solid #444;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:center;align-items:center;padding:10px;height:60px}ftapp-desktop[_ngcontent-%COMP%]{margin-top:400px;margin-bottom:400px;padding:16px;height:calc(100vh - 124px);overflow:auto}"]})};var Uy=class{constructor(e,t){this._delegate=e,this.firebase=t,fs(e,new Nt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),fa(this._delegate)))}_getService(e,t=Dn){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Dn){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){fs(this._delegate,e)}_addOrOverwriteComponent(e){Sp(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var Q2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},OS=new Qt("app-compat","Firebase",Q2);function X2(n){let e={},t={__esModule:!0,initializeApp:s,app:r,registerVersion:Fe,setLogLevel:jl,onLog:Ul,apps:null,SDK_VERSION:pn,INTERNAL:{registerComponent:c,removeApp:i,useAsService:l,modularAPIs:xp}};t.default=t,Object.defineProperty(t,"apps",{get:o});function i(u){delete e[u]}function r(u){if(u=u||Dn,!fp(e,u))throw OS.create("no-app",{appName:u});return e[u]}r.App=n;function s(u,d={}){let p=ps(u,d);if(fp(e,p.name))return e[p.name];let g=new n(p,t);return e[p.name]=g,g}function o(){return Object.keys(e).map(u=>e[u])}function c(u){let d=u.name,p=d.replace("-compat","");if(fn(u)&&u.type==="PUBLIC"){let g=(v=r())=>{if(typeof v[p]!="function")throw OS.create("invalid-app-argument",{appName:d});return v[p]()};u.serviceProps!==void 0&&ca(g,u.serviceProps),t[p]=g,n.prototype[p]=function(...v){return this._getService.bind(this,d).apply(this,u.multipleInstances?v:[])}}return u.type==="PUBLIC"?t[p]:null}function l(u,d){return d==="serverAuth"?null:d}return t}function NS(){let n=X2(Uy);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:NS,extendNamespace:e,createSubscribe:Nl,ErrorFactory:Qt,deepExtend:ca});function e(t){ca(n,t)}return n}var J2=NS();var MS=new xn("@firebase/app-compat"),Z2="@firebase/app-compat",ej="0.2.42";function tj(n){Fe(Z2,ej,n)}try{let n=ap();if(n.firebase!==void 0){MS.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&MS.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var mi=J2;tj();var nj="firebase",ij="10.14.0";mi.registerVersion(nj,ij,"app-compat");var sd=class{constructor(e){return e}},FS=new $("angularfire2.app.options"),VS=new $("angularfire2.app.name");function rj(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=mi.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>mi.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let c=!!module.hot;sj("error",`${o.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sd(o)}var sj=(n,...e)=>{vw()&&typeof console<"u"&&console[n](...e)},oj={provide:sd,useFactory:rj,deps:[FS,ne,[new tt,VS]]},LS=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:FS,useValue:t},{provide:VS,useValue:i}]}}constructor(t){mi.registerVersion("angularfire",kn.full,"core"),mi.registerVersion("angularfire",kn.full,"app-compat"),mi.registerVersion("angular",el.full,t.toString())}static \u0275fac=function(i){return new(i||n)(D(xt))};static \u0275mod=te({type:n});static \u0275inj=ee({providers:[oj]})}return n})();var TQ=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var US={production:!1,firebase:{apiKey:"AIzaSyBMJV1Vv0VH0Umvs2-rAqTg2c5ptH__rd8",authDomain:"familytreedatabase-c8bf3.firebaseapp.com",projectId:"familytreedatabase-c8bf3",storageBucket:"familytreedatabase-c8bf3.appspot.com",messagingSenderId:"83738970274",appId:"1:83738970274:web:e0c8a989d6646c6c7daffb",measurementId:"G-5GBNW3TGEB"}};var aj="@",cj=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=j(aw,{optional:!0}),this.loadingSchedulerFn=j(lj,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-YRPADUUW.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new Se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new jy(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Wc()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),jy=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(aj)}},lj=new $("");function jS(n="animations"){return Xc("NgAsyncAnimations"),Wt([{provide:Yc,useFactory:(e,t,i)=>new cj(e,t,i,n),deps:[J,hl,ne]},{provide:un,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var od=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n,bootstrap:[rd]});static \u0275inj=ee({providers:[s0(),xb(()=>Rb({projectId:"familytreedatabase-c8bf3",appId:"1:83738970274:web:e0c8a989d6646c6c7daffb",storageBucket:"familytreedatabase-c8bf3.appspot.com",apiKey:"AIzaSyBMJV1Vv0VH0Umvs2-rAqTg2c5ptH__rd8",authDomain:"familytreedatabase-c8bf3.firebaseapp.com",messagingSenderId:"83738970274",measurementId:"G-5GBNW3TGEB"})),vI(()=>wI()),qE(()=>GE()),jS()],imports:[i0,id,LS.initializeApp(US.firebase),TS,kS,DS,ZA,fT,CT]})};n0().bootstrapModule(od,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
