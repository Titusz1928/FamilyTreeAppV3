import{$ as Se,$a as nr,$b as rl,A as Ut,Aa as zd,Ab as fe,Ac as Dw,B as Md,Ba as ke,Bb as vt,Bc as Pw,C as zc,Ca as ne,Cb as zn,Cc as ol,D as Zi,Da as tr,Db as Jc,Dc as Po,E as Hr,Ea as Te,Eb as He,Ec as kw,F as Nd,Fa as To,Fb as Ai,Fc as Ow,G as Wr,Ga as Qv,Gb as Kt,H as Ne,Ha as Co,Hb as ut,I as Fd,Ia as Xv,Ib as Si,Ic as Jd,J as En,Ja as xt,Jb as Qr,Jc as Zd,K as wi,Ka as un,Kb as zt,L as $c,La as Ao,Lb as $t,Lc as ko,M as Vd,Ma as $d,Mb as dw,Mc as Oo,N as ct,Na as Kr,Nb as je,Nc as ef,O as qv,Oa as Yr,Ob as Wd,P as Ld,Pa as Jv,Pb as fw,Q as er,Qa as Zv,Qb as ht,R as bi,Ra as ew,Rb as tt,S as Ud,Sa as tw,Sb as Xr,T as Gv,Ta as nw,Tb as Zc,U as Hv,Ua as iw,Ub as el,V as Wv,Va as rw,Vb as pw,W as qc,Wa as Bt,Wb as tl,X as Ht,Xa as So,Xb as nl,Y as jt,Ya as kt,Yb as Kd,Z as Tn,Za as O,Zb as il,_ as Oe,_a as Hc,_b as Yd,a as N,aa as Ii,ab as sw,ac as ir,b as ge,ba as bo,bb as Wc,bc as mw,c as Uv,ca as z,cb as Kc,cc as sl,d as fx,da as ee,db as Yc,dc as gw,e as vi,ea as Kv,eb as Ti,ec as _w,f as E,fa as $,fb as Qc,fc as Ot,g as Pt,ga as jd,gb as qd,gc as yw,h as jv,ha as D,hb as xo,hc as vw,i as Lt,ia as j,ib as Xe,ic as ww,j as Rd,ja as et,jb as ow,jc as wt,k as Dd,ka as Bd,kb as Rt,kc as bw,l as re,la as Io,lb as aw,lc as Do,m as gt,ma as Ee,mb as Gd,mc as An,n as Bv,na as te,nb as Cn,nc as Iw,o as zv,oa as me,ob as cw,oc as Ew,p as In,pa as Wt,pb as Ci,pc as rr,q as Pd,qa as Yv,qb as lt,qc as Tw,r as kd,ra as Ei,rb as hn,rc as Cw,s as Od,sa as on,sb as Ro,sc as J,t as _t,ta as St,tb as yt,tc as Aw,u as G,ua as an,ub as Xc,uc as Qd,v as Ji,va as cn,vb as Hd,vc as Sw,w as Bc,wa as Gc,wb as lw,wc as xw,x as $v,xa as ln,xb as uw,xc as $n,y as se,ya as Eo,yb as hw,yc as Xd,z as Gr,za as Ve,zb as oe,zc as Rw}from"./chunk-TN3HTI7R.js";var nf=class{};var sr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var rf=class{encodeKey(e){return Mw(e)}encodeValue(e){return Mw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function mx(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var gx=/%(\d[a-f0-9])/gi,_x={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Mw(n){return encodeURIComponent(n).replace(gx,(e,t)=>_x[t]??e)}function al(n){return`${n}`}var xi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=mx(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(al):[al(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(al(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(al(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sf=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function yx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Nw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Fw(n){return typeof Blob<"u"&&n instanceof Blob}function Vw(n){return typeof FormData<"u"&&n instanceof FormData}function vx(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Mo=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(yx(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new sr,this.context??=new sf,!this.params)this.params=new xi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Nw(this.body)||Fw(this.body)||Vw(this.body)||vx(this.body)?this.body:this.body instanceof xi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Vw(this.body)?null:Fw(this.body)?this.body.type||null:Nw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof xi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,v)=>g.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,v)=>g.set(v,e.setParams[v]),d)),new n(t,i,o,{params:d,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},Gw=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Gw||{}),of=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new sr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var No=class n extends of{constructor(e={}){super(e),this.type=Gw.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function tf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Hw=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Mo)s=t;else{let l;r.headers instanceof sr?l=r.headers:l=new sr(r.headers);let u;r.params&&(r.params instanceof xi?u=r.params:u=new xi({fromObject:r.params})),s=new Mo(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=G(s).pipe(wi(l=>this.handler.handle(l)));if(t instanceof Mo||r.observe==="events")return o;let c=o.pipe(Ne(l=>l instanceof No));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(se(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(se(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new xi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,tf(r,i))}post(t,i,r={}){return this.request("POST",t,tf(r,i))}put(t,i,r={}){return this.request("PUT",t,tf(r,i))}static{this.\u0275fac=function(i){return new(i||n)(D(nf))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();var wx=new $("");var bx=new $(""),Lw="b",Uw="h",jw="s",Bw="st",zw="u",$w="rt",cl=new $(""),Ix=["GET","HEAD"];function Ex(n,e){let v=j(cl),{isCacheActive:t}=v,i=Uv(v,["isCacheActive"]),{transferCache:r,method:s}=n;if(!t||r===!1||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!Ix.includes(s)||!i.includeRequestsWithAuthHeaders&&Tx(n)||i.filter?.(n)===!1)return e(n);let o=j($d),c=j(bx,{optional:!0}),l=Po(j(xt));if(c&&!l)throw new Se(2803,!1);let u=l&&c?xx(n.url,c):n.url,d=Ax(n,u),p=o.get(d,null),g=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(g=r.includeHeaders),p){let{[Lw]:S,[$w]:P,[Uw]:k,[jw]:M,[Bw]:B,[zw]:H}=p,Q=S;switch(P){case"arraybuffer":Q=new TextEncoder().encode(S).buffer;break;case"blob":Q=new Blob([S]);break}let be=new sr(k);return G(new No({body:Q,headers:be,status:M,statusText:B,url:H}))}return e(n).pipe(Oe(S=>{S instanceof No&&l&&o.set(d,{[Lw]:S.body,[Uw]:Cx(S.headers,g),[jw]:S.status,[Bw]:S.statusText,[zw]:u,[$w]:n.responseType})}))}function Tx(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function Cx(n,e){if(!e)return{};let t={};for(let i of e){let r=n.getAll(i);r!==null&&(t[i]=r)}return t}function qw(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Ax(n,e){let{params:t,method:i,responseType:r}=n,s=qw(t),o=n.serializeBody();o instanceof URLSearchParams?o=qw(o):typeof o!="string"&&(o="");let c=[i,r,e,o,s].join("|"),l=Sx(c);return l}function Sx(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Ww(n){return[{provide:cl,useFactory:()=>(Qc("NgHttpTransferCache"),N({isCacheActive:!0},n))},{provide:wx,useValue:Ex,multi:!0,deps:[$d,cl]},{provide:rl,multi:!0,useFactory:()=>{let e=j(ir),t=j(cl);return()=>{mw(e).then(()=>{t.isCacheActive=!1})}}}]}function xx(n,e){let t=new URL(n,"resolve://").origin,i=e[t];return i?n.replace(t,i):n}var lf=class extends Cw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uf=class n extends lf{static makeCurrent(){Tw(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Px();return t==null?null:kx(t)}resetBaseElement(){Fo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xd(document.cookie,e)}},Fo=null;function Px(){return Fo=Fo||document.querySelector("base"),Fo?Fo.getAttribute("href"):null}function kx(n){return new URL(n,document.baseURI).pathname}var hf=class{addToWindow(e){Ii.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new Se(5103,!1);return s},Ii.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ii.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Ii.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(c=>{c.whenStable(o)})};Ii.frameworkStabilizers||(Ii.frameworkStabilizers=[]),Ii.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?rr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Ox=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),df=new $(""),Qw=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Se(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(D(df),D(ne))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ll=class{constructor(e){this._doc=e}},af="ng-app-id",Xw=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Po(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${af}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(af),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(af,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(Co),D(Ao,8),D(xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),cf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mf=/%COMP%/g,Jw="%COMP%",Mx=`_nghost-${Jw}`,Nx=`_ngcontent-${Jw}`,Fx=!0,Vx=new $("",{providedIn:"root",factory:()=>Fx});function Lx(n){return Nx.replace(mf,n)}function Ux(n){return Mx.replace(mf,n)}function Zw(n,e){return e.map(t=>t.replace(mf,n))}var ul=(()=>{class n{constructor(t,i,r,s,o,c,l,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Po(c),this.defaultRenderer=new Vo(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Io.ShadowDom&&(i=ge(N({},i),{encapsulation:Io.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof hl?r.applyToHost(t):r instanceof Lo&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Io.Emulated:s=new hl(l,u,i,this.appId,d,o,c,p);break;case Io.ShadowDom:return new ff(l,u,t,i,o,c,this.nonce,p);default:s=new Lo(l,u,i,d,o,c,p);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(D(Qw),D(Xw),D(Co),D(Vx),D(J),D(xt),D(ne),D(Ao))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Vo=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Kw(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Kw(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Se(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=cf[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=cf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(So.DashCase|So.Important)?e.style.setProperty(t,i,r&So.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&So.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Kw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ff=class extends Vo{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Zw(r.id,r.styles);for(let d of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=d,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lo=class extends Vo{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Zw(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hl=class extends Lo{constructor(e,t,i,r,s,o,c,l){let u=r+"-"+i.id;super(e,t,i,s,o,c,l,u),this.contentAttr=Lx(u),this.hostAttr=Ux(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},jx=(()=>{class n extends ll{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Yw=["alt","control","meta","shift"],Bx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zx={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$x=(()=>{class n extends ll{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),Yw.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),o+=u+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Bx[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Yw.forEach(o=>{if(o!==r){let c=zx[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function qx(){uf.makeCurrent()}function Gx(){return new tr}function Hx(){return Qv(document),document}var Wx=[{provide:xt,useValue:Pw},{provide:Xv,useValue:qx,multi:!0},{provide:J,useFactory:Hx,deps:[]}],e0=gw(yw,"browser",Wx),Kx=new $(""),Yx=[{provide:tl,useClass:hf,deps:[]},{provide:pw,useClass:nl,deps:[ne,Kd,tl]},{provide:nl,useClass:nl,deps:[ne,Kd,tl]}],Qx=[{provide:Yv,useValue:"root"},{provide:tr,useFactory:Gx,deps:[]},{provide:df,useClass:jx,multi:!0,deps:[J,ne,xt]},{provide:df,useClass:$x,multi:!0,deps:[J]},ul,Xw,Qw,{provide:Kc,useExisting:ul},{provide:Ow,useClass:Ox,deps:[]},[]],t0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Co,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(D(Kx,12))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[...Qx,...Yx],imports:[Dw,vw]})}}return n})();var n0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=D(Xx),r},providedIn:"root"})}}return n})(),Xx=(()=>{class n extends gf{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Bt.NONE:return i;case Bt.HTML:return Yr(i,"HTML")?Kr(i):rw(this._doc,String(i)).toString();case Bt.STYLE:return Yr(i,"Style")?Kr(i):i;case Bt.SCRIPT:if(Yr(i,"Script"))return Kr(i);throw new Se(5200,!1);case Bt.URL:return Yr(i,"URL")?Kr(i):iw(String(i));case Bt.RESOURCE_URL:if(Yr(i,"ResourceURL"))return Kr(i);throw new Se(5201,!1);default:throw new Se(5202,!1)}}bypassSecurityTrustHtml(t){return Jv(t)}bypassSecurityTrustStyle(t){return Zv(t)}bypassSecurityTrustScript(t){return ew(t)}bypassSecurityTrustUrl(t){return tw(t)}bypassSecurityTrustResourceUrl(t){return nw(t)}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pf=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(pf||{});function i0(...n){let e=[],t=new Set,i=t.has(pf.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of n)t.add(s),r.length&&e.push(r);return Wt([[],ww(),t.has(pf.NoHttpTransferCache)||i?[]:Ww({}),e])}var ce="primary",Zo=Symbol("RouteTitle"),If=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function is(n){return new If(n)}function Jx(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Zx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sn(n[t],e[t]))return!1;return!0}function Sn(n,e){let t=n?Ef(n):void 0,i=e?Ef(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!p0(n[r],e[r]))return!1;return!0}function Ef(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function p0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function m0(n){return n.length>0?n[n.length-1]:null}function Di(n){return Bc(n)?n:il(n)?_t(Promise.resolve(n)):G(n)}var eR={exact:_0,subset:y0},g0={exact:tR,subset:nR,ignored:()=>!0};function r0(n,e,t){return eR[t.paths](n.root,e.root,t.matrixParams)&&g0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tR(n,e){return Sn(n,e)}function _0(n,e,t){if(!ar(n.segments,e.segments)||!pl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!_0(n.children[i],e.children[i],t))return!1;return!0}function nR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>p0(n[t],e[t]))}function y0(n,e,t){return v0(n,e,e.segments,t)}function v0(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ar(r,t)||e.hasChildren()||!pl(r,t,i))}else if(n.segments.length===t.length){if(!ar(n.segments,t)||!pl(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!y0(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ar(n.segments,r)||!pl(n.segments,r,i)||!n.children[ce]?!1:v0(n.children[ce],e,s,i)}}function pl(n,e,t){return e.every((i,r)=>g0[t](n[r].parameters,i.parameters))}var Gn=class{constructor(e=new xe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){return sR.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ml(this)}},or=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=is(this.parameters),this._parameterMap}toString(){return b0(this)}};function iR(n,e){return ar(n,e)&&n.every((t,i)=>Sn(t.parameters,e[i].parameters))}function ar(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function rR(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ce&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ce&&(t=t.concat(e(r,i)))}),t}var ea=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>new rs,providedIn:"root"})}}return n})(),rs=class{parse(e){let t=new Cf(e);return new Gn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Uo(e.root,!0)}`,i=cR(e.queryParams),r=typeof e.fragment=="string"?`#${oR(e.fragment)}`:"";return`${t}${i}${r}`}},sR=new rs;function ml(n){return n.segments.map(e=>b0(e)).join("/")}function Uo(n,e){if(!n.hasChildren())return ml(n);if(e){let t=n.children[ce]?Uo(n.children[ce],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ce&&i.push(`${r}:${Uo(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=rR(n,(i,r)=>r===ce?[Uo(n.children[ce],!1)]:[`${r}:${Uo(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${ml(n)}/${t[0]}`:`${ml(n)}/(${t.join("//")})`}}function w0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dl(n){return w0(n).replace(/%3B/gi,";")}function oR(n){return encodeURI(n)}function Tf(n){return w0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gl(n){return decodeURIComponent(n)}function s0(n){return gl(n.replace(/\+/g,"%20"))}function b0(n){return`${Tf(n.path)}${aR(n.parameters)}`}function aR(n){return Object.entries(n).map(([e,t])=>`;${Tf(e)}=${Tf(t)}`).join("")}function cR(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${dl(t)}=${dl(r)}`).join("&"):`${dl(t)}=${dl(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lR=/^[^\/()?;#]+/;function yf(n){let e=n.match(lR);return e?e[0]:""}var uR=/^[^\/()?;=#]+/;function hR(n){let e=n.match(uR);return e?e[0]:""}var dR=/^[^=?&#]+/;function fR(n){let e=n.match(dR);return e?e[0]:""}var pR=/^[^&#]+/;function mR(n){let e=n.match(pR);return e?e[0]:""}var Cf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ce]=new xe(e,t)),i}parseSegment(){let e=yf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new or(gl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=yf(this.remaining);r&&(i=r,this.capture(i))}e[gl(t)]=gl(i)}parseQueryParam(e){let t=fR(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=mR(this.remaining);o&&(i=o,this.capture(i))}let r=s0(t),s=s0(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=yf(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ce]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}};function I0(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function E0(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=E0(r);if(i===ce&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new xe(n.segments,e);return gR(t)}function gR(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function Go(n){return n instanceof Gn}function _R(n,e,t=null,i=null){let r=T0(n);return C0(r,e,t,i)}function T0(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let c=new xe(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=I0(i);return e??r}function C0(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return vf(r,r,r,t,i);let s=yR(e);if(s.toRoot())return vf(r,r,new xe([],{}),t,i);let o=vR(s,r,n),c=o.processChildren?zo(o.segmentGroup,o.index,s.commands):S0(o.segmentGroup,o.index,s.commands);return vf(r,o.segmentGroup,c,t,i)}function _l(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ho(n){return typeof n=="object"&&n!=null&&n.outlets}function vf(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=A0(n,e,t);let c=I0(E0(o));return new Gn(c,s,r)}function A0(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=A0(s,e,t)}),new xe(n.segments,i)}var yl=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&_l(i[0]))throw new Se(4003,!1);let r=i.find(Ho);if(r&&r!==m0(i))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yR(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new yl(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new yl(t,e,i)}var es=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function vR(n,e,t){if(n.isAbsolute)return new es(e,!0,0);if(!t)return new es(e,!1,NaN);if(t.parent===null)return new es(t,!0,0);let i=_l(n.commands[0])?0:1,r=t.segments.length-1+i;return wR(t,r,n.numberOfDoubleDots)}function wR(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Se(4005,!1);r=i.segments.length}return new es(i,!1,r-s)}function bR(n){return Ho(n[0])?n[0].outlets:{[ce]:n}}function S0(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return zo(n,e,t);let i=IR(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new xe(n.segments.slice(0,i.pathIndex),{});return s.children[ce]=new xe(n.segments.slice(i.pathIndex),n.children),zo(s,0,r)}else return i.match&&r.length===0?new xe(n.segments,{}):i.match&&!n.hasChildren()?Af(n,e,t):i.match?zo(n,0,r):Af(n,e,t)}function zo(n,e,t){if(t.length===0)return new xe(n.segments,{});{let i=bR(t),r={};if(Object.keys(i).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=zo(n.children[ce],e,t);return new xe(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=S0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new xe(n.segments,r)}}function IR(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(Ho(c))break;let l=`${c}`,u=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!a0(l,u,o))return s;i+=2}else{if(!a0(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Af(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Ho(s)){let l=ER(s.outlets);return new xe(i,l)}if(r===0&&_l(t[0])){let l=n.segments[e];i.push(new or(l.path,o0(t[0]))),r++;continue}let o=Ho(s)?s.outlets[ce]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&_l(c)?(i.push(new or(o,o0(c))),r+=2):(i.push(new or(o,{})),r++)}return new xe(i,{})}function ER(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Af(new xe([],{}),0,i))}),e}function o0(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function a0(n,e,t){return n==t.path&&Sn(e,t.parameters)}var $o="imperative",nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(nt||{}),Yt=class{constructor(e,t){this.id=e,this.url=t}},ss=class extends Yt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=nt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends Yt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=nt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gt||{}),vl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(vl||{}),qn=class extends Yt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=nt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ri=class extends Yt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=nt.NavigationSkipped}},Wo=class extends Yt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=nt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wl=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=nt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sf=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=nt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xf=class extends Yt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=nt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rf=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=nt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Df=class extends Yt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=nt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pf=class{constructor(e){this.route=e,this.type=nt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},kf=class{constructor(e){this.route=e,this.type=nt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Of=class{constructor(e){this.snapshot=e,this.type=nt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mf=class{constructor(e){this.snapshot=e,this.type=nt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nf=class{constructor(e){this.snapshot=e,this.type=nt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ff=class{constructor(e){this.snapshot=e,this.type=nt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bl=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=nt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ko=class{},os=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function TR(n,e){return n.providers&&!n._injector&&(n._injector=Gd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dn(n){return n.outlet||ce}function CR(n,e){let t=n.filter(i=>dn(i)===e);return t.push(...n.filter(i=>dn(i)!==e)),t}function ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Vf=class{get injector(){return ta(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new na(this.rootInjector),this.attachRef=null}},na=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Vf(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(D(Ei))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Il=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Lf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Lf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Uf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Uf(e,this._root).map(t=>t.value)}};function Lf(n,e){if(n===e.value)return e;for(let t of e.children){let i=Lf(n,t);if(i)return i}return null}function Uf(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Uf(n,t);if(i.length)return i.unshift(e),i}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Zr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var El=class extends Il{constructor(e,t){super(e),this.snapshot=t,Kf(this,e)}toString(){return this.snapshot.toString()}};function x0(n){let e=AR(n),t=new gt([new or("",{})]),i=new gt({}),r=new gt({}),s=new gt({}),o=new gt(""),c=new as(t,i,s,o,r,ce,n,e.root);return c.snapshot=e.root,new El(new qt(c,[]),e)}function AR(n){let e={},t={},i={},r="",s=new ts([],e,i,r,t,ce,n,null,{});return new Cl("",new qt(s,[]))}var as=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(se(u=>u[Zo]))??G(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>is(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>is(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tl(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&D0(r)&&(i.resolve[Zo]=r.title),i}var ts=class{get title(){return this.data?.[Zo]}constructor(e,t,i,r,s,o,c,l,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=is(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=is(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cl=class extends Il{constructor(e,t){super(t),this.url=e,Kf(this,t)}toString(){return R0(this._root)}};function Kf(n,e){e.value._routerState=n,e.children.forEach(t=>Kf(n,t))}function R0(n){let e=n.children.length>0?` { ${n.children.map(R0).join(", ")} } `:"";return`${n.value}${e}`}function wf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sn(e.params,t.params)||n.paramsSubject.next(t.params),Zx(e.url,t.url)||n.urlSubject.next(t.url),Sn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jf(n,e){let t=Sn(n.params,e.params)&&iR(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||jf(n.parent,e.parent))}function D0(n){return typeof n.title=="string"||n.title===null}var SR=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new ke,this.deactivateEvents=new ke,this.attachEvents=new ke,this.detachEvents=new ke,this.parentContexts=j(na),this.location=j(Ti),this.changeDetector=j(Ot),this.inputBinder=j(Dl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Bf(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[St]})}}return n})(),Bf=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===as?this.route:e===na?this.childContexts:this.parent.get(e,t)}},Dl=new $(""),c0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Gr([i.queryParams,i.params,i.data]).pipe(jt(([s,o,c],l)=>(c=N(N(N({},s),o),c),l===0?G(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=Ew(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function xR(n,e,t){let i=Yo(n,e._root,t?t._root:void 0);return new El(i,e)}function Yo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=RR(n,e,t);return new qt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Yo(n,c)),o}}let i=DR(e.value),r=e.children.map(s=>Yo(n,s));return new qt(i,r)}}function RR(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Yo(n,i,r);return Yo(n,i)})}function DR(n){return new as(new gt(n.url),new gt(n.params),new gt(n.queryParams),new gt(n.fragment),new gt(n.data),n.outlet,n.component,n)}var Qo=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},P0="ngNavigationCancelingError";function Al(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Go(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=k0(!1,Gt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function k0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[P0]=!0,t.cancellationCode=e,t}function PR(n){return O0(n)&&Go(n.url)}function O0(n){return!!n&&n[P0]}var kR=(n,e,t,i)=>se(r=>(new zf(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),zf=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),wf(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Zr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Zr(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ff(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Mf(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(wf(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),wf(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},Sl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ns=class{constructor(e,t){this.component=e,this.route=t}};function OR(n,e,t){let i=n._root,r=e?e._root:null;return jo(i,r,t,[i.value])}function MR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ls(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Kv(n)?n:e.get(n):i}function jo(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Zr(e);return n.children.forEach(o=>{NR(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>qo(c,t.getContext(o),r)),r}function NR(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=FR(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Sl(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?jo(n,e,c?c.children:null,i,r):jo(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ns(c.outlet.component,o))}else o&&qo(e,c,r),r.canActivateChecks.push(new Sl(i)),s.component?jo(n,null,c?c.children:null,i,r):jo(n,null,t,i,r);return r}function FR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ar(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ar(n.url,e.url)||!Sn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jf(n,e)||!Sn(n.queryParams,e.queryParams);case"paramsChange":default:return!jf(n,e)}}function qo(n,e,t){let i=Zr(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?qo(o,e.children.getContext(s),t):qo(o,null,t):qo(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ns(e.outlet.component,r)):t.canDeactivateChecks.push(new ns(null,r)):t.canDeactivateChecks.push(new ns(null,r))}function ia(n){return typeof n=="function"}function VR(n){return typeof n=="boolean"}function LR(n){return n&&ia(n.canLoad)}function UR(n){return n&&ia(n.canActivate)}function jR(n){return n&&ia(n.canActivateChild)}function BR(n){return n&&ia(n.canDeactivate)}function zR(n){return n&&ia(n.canMatch)}function M0(n){return n instanceof $v||n?.name==="EmptyError"}var fl=Symbol("INITIAL_VALUE");function cs(){return jt(n=>Gr(n.map(e=>e.pipe(ct(1),Ht(fl)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===fl)return fl;if(t===!1||$R(t))return t}return!0}),Ne(e=>e!==fl),ct(1)))}function $R(n){return Go(n)||n instanceof Qo}function qR(n,e){return Ut(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?G(ge(N({},t),{guardsResult:!0})):GR(o,i,r,n).pipe(Ut(c=>c&&VR(c)?HR(i,s,n,e):G(c)),se(c=>ge(N({},t),{guardsResult:c})))})}function GR(n,e,t,i){return _t(n).pipe(Ut(r=>XR(r.component,r.route,t,e,i)),bi(r=>r!==!0,!0))}function HR(n,e,t,i){return _t(e).pipe(wi(r=>zc(KR(r.route.parent,i),WR(r.route,i),QR(n,r.path,t),YR(n,r.route,t))),bi(r=>r!==!0,!0))}function WR(n,e){return n!==null&&e&&e(new Nf(n)),G(!0)}function KR(n,e){return n!==null&&e&&e(new Of(n)),G(!0)}function YR(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return G(!0);let r=i.map(s=>Zi(()=>{let o=ta(e)??t,c=ls(s,o),l=UR(c)?c.canActivate(e,n):on(o,()=>c(e,n));return Di(l).pipe(bi())}));return G(r).pipe(cs())}function QR(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>MR(o)).filter(o=>o!==null).map(o=>Zi(()=>{let c=o.guards.map(l=>{let u=ta(o.node)??t,d=ls(l,u),p=jR(d)?d.canActivateChild(i,n):on(u,()=>d(i,n));return Di(p).pipe(bi())});return G(c).pipe(cs())}));return G(s).pipe(cs())}function XR(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(c=>{let l=ta(e)??r,u=ls(c,l),d=BR(u)?u.canDeactivate(n,e,t,i):on(l,()=>u(n,e,t,i));return Di(d).pipe(bi())});return G(o).pipe(cs())}function JR(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return G(!0);let s=r.map(o=>{let c=ls(o,n),l=LR(c)?c.canLoad(e,t):on(n,()=>c(e,t));return Di(l)});return G(s).pipe(cs(),N0(i))}function N0(n){return jv(Oe(e=>{if(typeof e!="boolean")throw Al(n,e)}),se(e=>e===!0))}function ZR(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return G(!0);let s=r.map(o=>{let c=ls(o,n),l=zR(c)?c.canMatch(e,t):on(n,()=>c(e,t));return Di(l)});return G(s).pipe(cs(),N0(i))}var Xo=class{constructor(e){this.segmentGroup=e||null}},Jo=class extends Error{constructor(e){super(),this.urlTree=e}};function Jr(n){return Ji(new Xo(n))}function eD(n){return Ji(new Se(4e3,!1))}function tD(n){return Ji(k0(!1,Gt.GuardRejected))}var $f=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return G(i);if(r.numberOfChildren>1||!r.children[ce])return eD(`${e.redirectTo}`);r=r.children[ce]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:l,fragment:u,routeConfig:d,url:p,outlet:g,params:v,data:S,title:P}=r,k=on(s,()=>c({params:v,data:S,queryParams:l,fragment:u,routeConfig:d,url:p,outlet:g,title:P}));if(k instanceof Gn)throw new Jo(k);t=k}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Jo(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Gn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new xe(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Se(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},qf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nD(n,e,t,i,r){let s=F0(n,e,t);return s.matched?(i=TR(e,i),ZR(i,e,t,r).pipe(se(o=>o===!0?s:N({},qf)))):G(s)}function F0(n,e,t){if(e.path==="**")return iD(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},qf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Jx)(t,n,e);if(!r)return N({},qf);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function iD(n){return{matched:!0,parameters:n.length>0?m0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function l0(n,e,t,i){return t.length>0&&oD(n,t,i)?{segmentGroup:new xe(e,sD(i,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&aD(n,t,i)?{segmentGroup:new xe(n.segments,rD(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function rD(n,e,t,i){let r={};for(let s of t)if(Pl(n,e,s)&&!i[dn(s)]){let o=new xe([],{});r[dn(s)]=o}return N(N({},i),r)}function sD(n,e){let t={};t[ce]=e;for(let i of n)if(i.path===""&&dn(i)!==ce){let r=new xe([],{});t[dn(i)]=r}return t}function oD(n,e,t){return t.some(i=>Pl(n,e,i)&&dn(i)!==ce)}function aD(n,e,t){return t.some(i=>Pl(n,e,i))}function Pl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cD(n,e,t){return e.length===0&&!n.children[t]}var Gf=class{};function lD(n,e,t,i,r,s,o="emptyOnly"){return new Hf(n,e,t,i,r,o,s).recognize()}var uD=31,Hf=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new $f(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){let e=l0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:i})=>{let r=new qt(i,t),s=new Cl("",r),o=_R(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ts([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(se(i=>({children:i,rootSnapshot:t})),En(i=>{if(i instanceof Jo)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xo?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(se(o=>o instanceof qt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return _t(s).pipe(wi(o=>{let c=i.children[o],l=CR(t,o);return this.processSegmentGroup(e,l,c,o,r)}),Hv((o,c)=>(o.push(...c),o)),Vd(null),Gv(),Ut(o=>{if(o===null)return Jr(i);let c=V0(o);return hD(c),G(c)}))}processSegment(e,t,i,r,s,o,c){return _t(t).pipe(wi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,c).pipe(En(u=>{if(u instanceof Xo)return G(null);throw u}))),bi(l=>!!l),En(l=>{if(M0(l))return cD(i,r,s)?G(new Gf):Jr(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,l){return dn(i)!==o&&(o===ce||!Pl(r,s,i))?Jr(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Jr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:l,parameters:u,consumedSegments:d,positionalParamSegments:p,remainingSegments:g}=F0(t,r,s);if(!l)return Jr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uD&&(this.allowRedirects=!1));let v=new ts(s,u,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,u0(r),dn(r),r.component??r._loadedComponent??null,r,h0(r)),S=Tl(v,c,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let P=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(r,P).pipe(Ut(k=>this.processSegment(e,i,t,k.concat(g),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=nD(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(jt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(jt(({routes:u})=>{let d=i._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=l,S=new ts(g,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,u0(i),dn(i),i.component??i._loadedComponent??null,i,h0(i)),P=Tl(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:k,slicedSegments:M}=l0(t,g,v,u);if(M.length===0&&k.hasChildren())return this.processChildren(d,u,k,S).pipe(se(H=>new qt(S,H)));if(u.length===0&&M.length===0)return G(new qt(S,[]));let B=dn(i)===s;return this.processSegment(d,u,k,M,B?ce:s,!0,S).pipe(se(H=>new qt(S,H instanceof qt?[H]:[])))}))):Jr(t)))}getChildConfig(e,t,i){return t.children?G({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?G({routes:t._loadedRoutes,injector:t._loadedInjector}):JR(e,t,i,this.urlSerializer).pipe(Ut(r=>r?this.configLoader.loadChildren(e,t).pipe(Oe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):tD(t))):G({routes:[],injector:e})}};function hD(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function dD(n){let e=n.value.routeConfig;return e&&e.path===""}function V0(n){let e=[],t=new Set;for(let i of n){if(!dD(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=V0(i.children);e.push(new qt(i.value,r))}return e.filter(i=>!t.has(i))}function u0(n){return n.data||{}}function h0(n){return n.resolve||{}}function fD(n,e,t,i,r,s){return Ut(o=>lD(n,e,t,i,o.extractedUrl,r,s).pipe(se(({state:c,tree:l})=>ge(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function pD(n,e){return Ut(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return G(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of L0(l))o.add(u);let c=0;return _t(o).pipe(wi(l=>s.has(l)?mD(l,i,n,e):(l.data=Tl(l,l.parent,n).resolve,G(void 0))),Oe(()=>c++),Ud(1),Ut(l=>c===o.size?G(t):In))})}function L0(n){let e=n.children.map(t=>L0(t)).flat();return[n,...e]}function mD(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!D0(r)&&(s[Zo]=r.title),gD(s,n,e,i).pipe(se(o=>(n._resolvedData=o,n.data=Tl(n,n.parent,t).resolve,null)))}function gD(n,e,t,i){let r=Ef(n);if(r.length===0)return G({});let s={};return _t(r).pipe(Ut(o=>_D(n[o],e,t,i).pipe(bi(),Oe(c=>{if(c instanceof Qo)throw Al(new rs,c);s[o]=c}))),Ud(1),qv(s),En(o=>M0(o)?In:Ji(o)))}function _D(n,e,t,i){let r=ta(e)??i,s=ls(n,r),o=s.resolve?s.resolve(e,t):on(r,()=>s(e,t));return Di(o)}function bf(n){return jt(e=>{let t=n(e);return t?_t(t).pipe(se(()=>e)):G(e)})}var U0=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ce);return i}getResolvedTitleForRoute(t){return t.data[Zo]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(yD),providedIn:"root"})}}return n})(),yD=(()=>{class n extends U0{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(D(n0))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ra=new $("",{providedIn:"root",factory:()=>({})}),vD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ee({type:n,selectors:[["ng-component"]],standalone:!0,features:[tt],decls:1,vars:0,template:function(i,r){i&1&&vt(0,"router-outlet")},dependencies:[SR],encapsulation:2})}}return n})();function Yf(n){let e=n.children&&n.children.map(Yf),t=e?ge(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=vD),t}var xl=new $(""),Qf=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(sl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return G(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Di(t.loadComponent()).pipe(se(j0),Oe(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),er(()=>{this.componentLoaders.delete(t)})),r=new Dd(i,()=>new re).pipe(Rd());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=wD(i,this.compiler,t,this.onLoadEndListener).pipe(er(()=>{this.childrenLoaders.delete(i)})),o=new Dd(s,()=>new re).pipe(Rd());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wD(n,e,t,i){return Di(n.loadChildren()).pipe(se(j0),Ut(r=>r instanceof aw||Array.isArray(r)?G(r):_t(e.compileModuleAsync(r))),se(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(xl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Yf),injector:s}}))}function bD(n){return n&&typeof n=="object"&&"default"in n}function j0(n){return bD(n)?n.default:n}var Xf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(ID),providedIn:"root"})}}return n})(),ID=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),B0=new $(""),z0=new $("");function ED(n,e,t){let i=n.get(z0),r=n.get(J);return n.get(ne).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),c=r.startViewTransition(()=>(s(),TD(n))),{onViewTransitionCreated:l}=i;return l&&on(n,()=>l({transition:c,from:e,to:t})),o})}function TD(n){return new Promise(e=>{Ci({read:()=>setTimeout(e)},{injector:n})})}var CD=new $(""),Jf=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new re,this.transitionAbortSubject=new re,this.configLoader=j(Qf),this.environmentInjector=j(Ei),this.urlSerializer=j(ea),this.rootContexts=j(na),this.location=j($n),this.inputBindingEnabled=j(Dl,{optional:!0})!==null,this.titleStrategy=j(U0),this.options=j(ra,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Xf),this.createViewTransition=j(B0,{optional:!0}),this.navigationErrorHandler=j(CD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Pf(r)),i=r=>this.events.next(new kf(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(ge(N(N({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$o,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ne(s=>s.id!==0),se(s=>ge(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jt(s=>{let o=!1,c=!1;return G(s).pipe(jt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),In;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ge(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let p="";return this.events.next(new Ri(l.id,this.urlSerializer.serialize(l.rawUrl),p,vl.IgnoredSameUrlNavigation)),l.resolve(!1),In}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(jt(p=>{let g=this.transitions?.getValue();return this.events.next(new ss(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?In:Promise.resolve(p)}),fD(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ge(N({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new wl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:g,source:v,restoredState:S,extras:P}=l,k=new ss(p,this.urlSerializer.serialize(g),v,S);this.events.next(k);let M=x0(this.rootComponentType).snapshot;return this.currentTransition=s=ge(N({},l),{targetSnapshot:M,urlAfterRedirects:g,extras:ge(N({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,G(s)}else{let p="";return this.events.next(new Ri(l.id,this.urlSerializer.serialize(l.extractedUrl),p,vl.IgnoredByUrlHandlingStrategy)),l.resolve(!1),In}}),Oe(l=>{let u=new Sf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),se(l=>(this.currentTransition=s=ge(N({},l),{guards:OR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),qR(this.environmentInjector,l=>this.events.next(l)),Oe(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Al(this.urlSerializer,l.guardsResult);let u=new xf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ne(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Gt.GuardRejected),!1)),bf(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(Oe(u=>{let d=new Rf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),jt(u=>{let d=!1;return G(u).pipe(pD(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Gt.NoDataFromResolver)}}))}),Oe(u=>{let d=new Df(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),bf(l=>{let u=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(Oe(g=>{d.component=g}),se(()=>{})));for(let g of d.children)p.push(...u(g));return p};return Gr(u(l.targetSnapshot.root)).pipe(Vd(null),ct(1))}),bf(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?_t(d).pipe(se(()=>s)):G(s)}),se(l=>{let u=xR(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ge(N({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Oe(()=>{this.events.next(new Ko)}),kR(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ct(1),Oe({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Tn(this.transitionAbortSubject.pipe(Oe(l=>{throw l}))),er(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",Gt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),En(l=>{if(c=!0,O0(l))this.events.next(new qn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),PR(l)?this.events.next(new os(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Wo(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=on(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Qo){let{message:p,cancellationCode:g}=Al(this.urlSerializer,d);this.events.next(new qn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,g)),this.events.next(new os(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let p=t.errorHandler(l);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return In}))}))}cancelNavigationTransition(t,i,r){let s=new qn(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AD(n){return n!==$o}var SD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(xD),providedIn:"root"})}}return n})(),Wf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xD=(()=>{class n extends Wf{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:()=>j(RD),providedIn:"root"})}}return n})(),RD=(()=>{class n extends $0{constructor(){super(...arguments),this.location=j($n),this.urlSerializer=j(ea),this.options=j(ra,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Xf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=x0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof ss)this.stateMemento=this.createStateMemento();else if(t instanceof Ri)this.rawUrlTree=i.initialUrl;else if(t instanceof wl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Ko?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof qn&&(t.code===Gt.GuardRejected||t.code===Gt.NoDataFromResolver)?this.restoreHistory(i):t instanceof Wo?this.restoreHistory(i,!0):t instanceof Hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Gn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bo=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Bo||{});function q0(n,e){n.events.pipe(Ne(t=>t instanceof Hn||t instanceof qn||t instanceof Wo||t instanceof Ri),se(t=>t instanceof Hn||t instanceof Ri?Bo.COMPLETE:(t instanceof qn?t.code===Gt.Redirect||t.code===Gt.SupersededByNewNavigation:!1)?Bo.REDIRECTING:Bo.FAILED),Ne(t=>t!==Bo.REDIRECTING),ct(1)).subscribe(()=>{e()})}function DD(n){throw n}var PD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(el),this.stateManager=j($0),this.options=j(ra,{optional:!0})||{},this.pendingTasks=j(zd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Jf),this.urlSerializer=j(ea),this.location=j($n),this.urlHandlingStrategy=j(Xf),this._events=new re,this.errorHandler=this.options.errorHandler||DD,this.navigated=!1,this.routeReuseStrategy=j(SD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(xl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(Dl,{optional:!0}),this.eventsSubscription=new Pt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof qn&&i.code!==Gt.Redirect&&i.code!==Gt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hn)this.navigated=!0;else if(i instanceof os){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=N({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||AD(r.source)},o);this.scheduleNavigation(c,$o,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}MD(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$o,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=N({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:o,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let g=r?r.snapshot:this.routerState.snapshot.root;p=T0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return C0(p,t,d,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Go(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,$o,null,i)}navigate(t,i={skipLocationChange:!1}){return OD(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=N({},PD):i===!1?r=N({},kD):r=i,Go(t))return r0(this.currentUrlTree,t,r);let s=this.parseUrl(t);return r0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,u;o?(c=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,g)=>{c=p,l=g});let d=this.pendingTasks.add();return q0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OD(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Se(4008,!1)}function MD(n){return!(n instanceof Ko)&&!(n instanceof os)}var Rl=class{};var ND=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ne(t=>t instanceof Hn),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Gd(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return _t(r).pipe(Md())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=G(null);let s=r.pipe(Ut(o=>o===null?G(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return _t([s,o]).pipe(Md())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(D(cr),D(sl),D(Ei),D(Rl),D(Qf))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),G0=new $(""),FD=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ss?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Hn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ri&&t.code===vl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new bl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Hc()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function VD(n){return n.routerState.root}function sa(n,e){return{\u0275kind:n,\u0275providers:e}}function LD(){let n=j(Ve);return e=>{let t=n.get(ir);if(e!==t.components[0])return;let i=n.get(cr),r=n.get(H0);n.get(Zf)===1&&i.initialNavigation(),n.get(W0,null,jd.Optional)?.setUpPreloading(),n.get(G0,null,jd.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var H0=new $("",{factory:()=>new re}),Zf=new $("",{providedIn:"root",factory:()=>1});function UD(){return sa(2,[{provide:Zf,useValue:0},{provide:Yd,multi:!0,deps:[Ve],useFactory:e=>{let t=e.get(Aw,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(cr),s=e.get(H0);q0(r,()=>{i(!0)}),e.get(Jf).afterPreactivation=()=>(i(!0),s.closed?G(void 0):s),r.initialNavigation()}))}}])}function jD(){return sa(3,[{provide:Yd,multi:!0,useFactory:()=>{let e=j(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:Zf,useValue:2}])}var W0=new $("");function BD(n){return sa(0,[{provide:W0,useExisting:ND},{provide:Rl,useExisting:n}])}function zD(){return sa(8,[c0,{provide:Dl,useExisting:c0}])}function $D(n){let e=[{provide:B0,useValue:ED},{provide:z0,useValue:N({skipNextTransition:!!n?.skipInitialTransition},n)}];return sa(9,e)}var d0=new $("ROUTER_FORROOT_GUARD"),qD=[$n,{provide:ea,useClass:rs},cr,na,{provide:as,useFactory:VD,deps:[cr]},Qf,[]],ep=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[qD,[],{provide:xl,multi:!0,useValue:t},{provide:d0,useFactory:KD,deps:[[cr,new et,new Bd]]},{provide:ra,useValue:i||{}},i?.useHash?HD():WD(),GD(),i?.preloadingStrategy?BD(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?YD(i):[],i?.bindToComponentInputs?zD().\u0275providers:[],i?.enableViewTransitions?$D().\u0275providers:[],QD()]}}static forChild(t){return{ngModule:n,providers:[{provide:xl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(D(d0,8))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function GD(){return{provide:G0,useFactory:()=>{let n=j(kw),e=j(ne),t=j(ra),i=j(Jf),r=j(ea);return t.scrollOffset&&n.setOffset(t.scrollOffset),new FD(r,i,n,e,t)}}}function HD(){return{provide:Qd,useClass:xw}}function WD(){return{provide:Qd,useClass:Sw}}function KD(n){return"guarded"}function YD(n){return[n.initialNavigation==="disabled"?jD().\u0275providers:[],n.initialNavigation==="enabledBlocking"?UD().\u0275providers:[]]}var f0=new $("");function QD(){return[{provide:f0,useFactory:LD},{provide:rl,multi:!0,useExisting:f0}]}var XD=[],kl=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n});static \u0275inj=ee({imports:[ep.forRoot(XD),ep]})};var Ap={};fx(Ap,{FirebaseError:()=>Mt,SDK_VERSION:()=>pn,_DEFAULT_ENTRY_NAME:()=>Dn,_addComponent:()=>ds,_addOrOverwriteComponent:()=>Cp,_apps:()=>Pi,_clearComponents:()=>JP,_components:()=>hs,_getProvider:()=>hr,_isFirebaseApp:()=>Ib,_isFirebaseServerApp:()=>Pn,_registerComponent:()=>fn,_removeServiceInstance:()=>bb,_serverApps:()=>us,deleteApp:()=>da,getApp:()=>dr,getApps:()=>ha,initializeApp:()=>fs,initializeServerApp:()=>Eb,onLog:()=>Ul,registerVersion:()=>Fe,setLogLevel:()=>jl});var Y0=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},JD=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0,d=s>>2,p=(s&3)<<4|c>>4,g=(c&15)<<2|u>>6,v=u&63;l||(v=64,o||(g=64)),i.push(t[d],t[p],t[g],t[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Y0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let p=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new np;let g=s<<2|c>>4;if(i.push(g),u!==64){let v=c<<4&240|u>>2;if(i.push(v),p!==64){let S=u<<6&192|p;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},np=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ZD=function(n){let e=Y0(n);return Q0.encodeByteArray(e,!0)},oa=function(n){return ZD(n).replace(/\./g,"")},rp=function(n){try{return Q0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aa(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!eP(t)||(n[t]=aa(n[t],e[t]));return n}function eP(n){return n!=="__proto__"}function sp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tP=()=>sp().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&rp(n[1]);return e&&JSON.parse(e)},Ml=()=>{try{return tP()||nP()||iP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},op=n=>{var e,t;return(t=(e=Ml())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},X0=n=>{let e=op(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ap=()=>{var n;return(n=Ml())===null||n===void 0?void 0:n.config},cp=n=>{var e;return(e=Ml())===null||e===void 0?void 0:e[`_${n}`]};var Ol=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function J0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[oa(JSON.stringify(t)),oa(JSON.stringify(o)),""].join(".")}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function rP(){var n;let e=(n=Ml())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eb(){return typeof window<"u"||lp()}function lp(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nb(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ib(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rb(){let n=it();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sb(){return!rP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function up(){try{return typeof indexedDB=="object"}catch{return!1}}function ob(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var sP="FirebaseError",Mt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=sP,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}},Qt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?oP(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Mt(r,c,i)}};function oP(n,e){return n.replace(aP,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var aP=/\{\$([^}]+)}/g;function hp(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ab(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lr(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(K0(s)&&K0(o)){if(!lr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function K0(n){return n!==null&&typeof n=="object"}function ca(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Nl(n,e){let t=new ip(n,e);return t.subscribe.bind(t)}var ip=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");cP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=tp),r.error===void 0&&(r.error=tp),r.complete===void 0&&(r.complete=tp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function cP(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tp(){}var tB=4*60*60*1e3;function Wn(n){return n&&n._delegate?n._delegate:n}var Nt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ur="[DEFAULT]";var dp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Ol;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uP(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:lP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lP(n){return n===ur?void 0:n}function uP(n){return n.instantiationMode==="EAGER"}var la=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new dp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fp=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),cb={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},hP=pe.INFO,dP={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},fP=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=dP[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xn=class{constructor(e){this.name=e,this._logLevel=hP,this._logHandler=fP,this._userLogHandler=null,fp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};function lb(n){fp.forEach(e=>{e.setLogLevel(n)})}function ub(n,e){for(let t of fp){let i=null;e&&e.level&&(i=cb[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...o)=>{let c=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&n({level:pe[s].toLowerCase(),message:c,args:o,type:r.name})}}}var pP=(n,e)=>e.some(t=>n instanceof t),hb,db;function mP(){return hb||(hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gP(){return db||(db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fb=new WeakMap,mp=new WeakMap,pb=new WeakMap,pp=new WeakMap,_p=new WeakMap;function _P(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Rn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&fb.set(t,n)}).catch(()=>{}),_p.set(e,n),e}function yP(n){if(mp.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});mp.set(n,e)}var gp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mb(n){gp=n(gp)}function vP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Fl(this),e,...t);return pb.set(i,e.sort?e.sort():[e]),Rn(i)}:gP().includes(n)?function(...e){return n.apply(Fl(this),e),Rn(fb.get(this))}:function(...e){return Rn(n.apply(Fl(this),e))}}function wP(n){return typeof n=="function"?vP(n):(n instanceof IDBTransaction&&yP(n),pP(n,mP())?new Proxy(n,gp):n)}function Rn(n){if(n instanceof IDBRequest)return _P(n);if(pp.has(n))return pp.get(n);let e=wP(n);return e!==n&&(pp.set(n,e),_p.set(e,n)),e}var Fl=n=>_p.get(n);function _b(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=Rn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Rn(o.result),l.oldVersion,l.newVersion,Rn(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var bP=["get","getKey","getAll","getAllKeys","count"],IP=["put","add","delete","clear"],yp=new Map;function gb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=IP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||bP.includes(t)))return;let s=function(o,...c){return E(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),r&&l.done]))[0]})};return yp.set(e,s),s}mb(n=>ge(N({},n),{get:(e,t,i)=>gb(e,t)||n.get(e,t,i),has:(e,t)=>!!gb(e,t)||n.has(e,t)}));var wp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EP(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function EP(n){let e=n.getComponent();return e?.type==="VERSION"}var Vl="@firebase/app",bp="0.10.12";var Kn=new xn("@firebase/app"),TP="@firebase/app-compat",CP="@firebase/analytics-compat",AP="@firebase/analytics",SP="@firebase/app-check-compat",xP="@firebase/app-check",RP="@firebase/auth",DP="@firebase/auth-compat",PP="@firebase/database",kP="@firebase/data-connect",OP="@firebase/database-compat",MP="@firebase/functions",NP="@firebase/functions-compat",FP="@firebase/installations",VP="@firebase/installations-compat",LP="@firebase/messaging",UP="@firebase/messaging-compat",jP="@firebase/performance",BP="@firebase/performance-compat",zP="@firebase/remote-config",$P="@firebase/remote-config-compat",qP="@firebase/storage",GP="@firebase/storage-compat",HP="@firebase/firestore",WP="@firebase/vertexai-preview",KP="@firebase/firestore-compat",YP="firebase",QP="10.14.0";var Dn="[DEFAULT]",XP={[Vl]:"fire-core",[TP]:"fire-core-compat",[AP]:"fire-analytics",[CP]:"fire-analytics-compat",[xP]:"fire-app-check",[SP]:"fire-app-check-compat",[RP]:"fire-auth",[DP]:"fire-auth-compat",[PP]:"fire-rtdb",[kP]:"fire-data-connect",[OP]:"fire-rtdb-compat",[MP]:"fire-fn",[NP]:"fire-fn-compat",[FP]:"fire-iid",[VP]:"fire-iid-compat",[LP]:"fire-fcm",[UP]:"fire-fcm-compat",[jP]:"fire-perf",[BP]:"fire-perf-compat",[zP]:"fire-rc",[$P]:"fire-rc-compat",[qP]:"fire-gcs",[GP]:"fire-gcs-compat",[HP]:"fire-fst",[KP]:"fire-fst-compat",[WP]:"fire-vertex","fire-js":"fire-js",[YP]:"fire-js-all"};var Pi=new Map,us=new Map,hs=new Map;function ds(n,e){try{n.container.addComponent(e)}catch(t){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cp(n,e){n.container.addOrOverwriteComponent(e)}function fn(n){let e=n.name;if(hs.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;hs.set(e,n);for(let t of Pi.values())ds(t,n);for(let t of us.values())ds(t,n);return!0}function hr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bb(n,e,t=Dn){hr(n,e).clearInstance(t)}function Ib(n){return n.options!==void 0}function Pn(n){return n.settings!==void 0}function JP(){hs.clear()}var ZP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Qt("app","Firebase",ZP);var Ll=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};var Ip=class extends Ll{constructor(e,t,i,r){let s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{let c=e;super(c.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Fe(Vl,bp,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){da(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}};var pn=QP;function fs(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Dn,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Xt.create("bad-app-name",{appName:String(r)});if(t||(t=ap()),!t)throw Xt.create("no-options");let s=Pi.get(r);if(s){if(lr(t,s.options)&&lr(i,s.config))return s;throw Xt.create("duplicate-app",{appName:r})}let o=new la(r);for(let l of hs.values())o.addComponent(l);let c=new Ll(t,i,o);return Pi.set(r,c),c}function Eb(n,e){if(eb()&&!lp())throw Xt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Ib(n)?t=n.options:t=n;let i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;let r=u=>[...u].reduce((d,p)=>Math.imul(31,d)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(i)),o=us.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let c=new la(s);for(let u of hs.values())c.addComponent(u);let l=new Ip(t,e,s,c);return us.set(s,l),l}function dr(n=Dn){let e=Pi.get(n);if(!e&&n===Dn&&ap())return fs();if(!e)throw Xt.create("no-app",{appName:n});return e}function ha(){return Array.from(Pi.values())}function da(n){return E(this,null,function*(){let e=!1,t=n.name;Pi.has(t)?(e=!0,Pi.delete(t)):us.has(t)&&n.decRefCount()<=0&&(us.delete(t),e=!0),e&&(yield Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)})}function Fe(n,e,t){var i;let r=(i=XP[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(c.join(" "));return}fn(new Nt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Ul(n,e){if(n!==null&&typeof n!="function")throw Xt.create("invalid-log-argument");ub(n,e)}function jl(n){lb(n)}var ek="firebase-heartbeat-database",tk=1,ua="firebase-heartbeat-store",vp=null;function Tb(){return vp||(vp=_b(ek,tk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ua)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xt.create("idb-open",{originalErrorMessage:n.message})})),vp}function nk(n){return E(this,null,function*(){try{let t=(yield Tb()).transaction(ua),i=yield t.objectStore(ua).get(Cb(n));return yield t.done,i}catch(e){if(e instanceof Mt)Kn.warn(e.message);else{let t=Xt.create("idb-get",{originalErrorMessage:e?.message});Kn.warn(t.message)}}})}function yb(n,e){return E(this,null,function*(){try{let i=(yield Tb()).transaction(ua,"readwrite");yield i.objectStore(ua).put(e,Cb(n)),yield i.done}catch(t){if(t instanceof Mt)Kn.warn(t.message);else{let i=Xt.create("idb-set",{originalErrorMessage:t?.message});Kn.warn(i.message)}}})}function Cb(n){return`${n.name}!${n.options.appId}`}var ik=1024,rk=30*24*60*60*1e3,Ep=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Tp(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=rk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Kn.warn(i)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=vb(),{heartbeatsToSend:i,unsentEntries:r}=sk(this._heartbeatsCache.heartbeats),s=oa(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Kn.warn(t),""}})}};function vb(){return new Date().toISOString().substring(0,10)}function sk(n,e=ik){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),wb(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),wb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Tp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return up()?ob().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield nk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function wb(n){return oa(JSON.stringify({version:2,heartbeats:n})).length}function ok(n){fn(new Nt("platform-logger",e=>new wp(e),"PRIVATE")),fn(new Nt("heartbeat",e=>new Ep(e),"PRIVATE")),Fe(Vl,bp,n),Fe(Vl,bp,"esm2017"),Fe("fire-js","")}ok("");var ak="firebase",ck="10.14.0";Fe(ak,ck,"app");var kn=new Xr("ANGULARFIRE2_VERSION");function zl(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var fa=(n,e)=>{let t=e?[e]:ha(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},ms=class{constructor(){return fa(lk)}},lk="app-check";function ps(){}var Bl=class{zone;delegate;constructor(e,t=zv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Sp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ps,{},ps,ps)),t.pipe(Oe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},gs=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Bl(Zone.current)),this.insideAngular=t.run(()=>new Bl(Zone.current,Bv)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(D(ne))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $l(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function uk(n){return $l().ngZone.runOutsideAngular(()=>n())}function fr(n){return $l().ngZone.run(()=>n())}function hk(n){return dk($l())(n)}function dk(n){return function(t){return t=t.lift(new Sp(n.ngZone)),t.pipe(Od(n.outsideAngular),kd(n.insideAngular))}}var fk=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),fr(()=>n.apply(void 0,i))},ki=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=fr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ps,{},ps,ps))),i[s]=fk(i[s],t));let r=uk(()=>n.apply(this,i));if(!e)if(r instanceof Lt){let s=$l();return r.pipe(Od(s.outsideAngular),kd(s.insideAngular))}else return fr(()=>r);return r instanceof Lt?r.pipe(hk):r instanceof Promise?fr(()=>new Promise((s,o)=>r.then(c=>fr(()=>s(c)),c=>fr(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:fr(()=>r)};var Yn=class{constructor(e){return e}},pr=class{constructor(){return ha()}};function pk(n){return n&&n.length===1?n[0]:new Yn(dr())}var xp=new $("angularfire2._apps"),mk={provide:Yn,useFactory:pk,deps:[[new et,xp]]},gk={provide:pr,deps:[[new et,xp]]};function _k(n){return(e,t)=>{let i=t.get(xt);Fe("angularfire",kn.full,"core"),Fe("angularfire",kn.full,"app"),Fe("angular",Zc.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Yn(r)}}function Ab(n,...e){return Wt([mk,gk,{provide:xp,useFactory:_k(n),multi:!0,deps:[ne,Ve,gs,...e]}])}var Sb=ki(fs,!0);function zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $b=zb,qb=new Qt("auth","Firebase",zb());var Yl=new xn("@firebase/auth");function yk(n,...e){Yl.logLevel<=pe.WARN&&Yl.warn(`Auth (${pn}): ${n}`,...e)}function Gl(n,...e){Yl.logLevel<=pe.ERROR&&Yl.error(`Auth (${pn}): ${n}`,...e)}function Mi(n,...e){throw Kp(n,...e)}function gr(n,...e){return Kp(n,...e)}function Gb(n,e,t){let i=Object.assign(Object.assign({},$b()),{[e]:t});return new Qt("auth","Firebase",i).create(e,{appName:n.name})}function mr(n){return Gb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qb.create(n,...e)}function ie(n,e,...t){if(!n)throw Kp(e,...t)}function Qn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gl(e),new Error(e)}function Ni(n,e){n||Qn(e)}function kp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vk(){return xb()==="http:"||xb()==="https:"}function xb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vk()||nb()||"connection"in navigator)?navigator.onLine:!0}function bk(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var _r=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=Z0()||ib()}get(){return wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yp(n,e){Ni(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ql=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ek=new _r(3e4,6e4);function Qp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ys(s,o,c,l){return E(this,arguments,function*(n,e,t,i,r={}){return Hb(n,r,()=>E(this,null,function*(){let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});let p=ca(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:g},u);return tb()||(v.referrerPolicy="no-referrer"),Ql.fetch()(Wb(n,n.config.apiHost,t,p),v)}))})}function Hb(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Ik),e);try{let r=new Op(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ql(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ql(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ql(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ql(n,"user-disabled",o);let d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Gb(n,d,u);Mi(n,d)}}catch(r){if(r instanceof Mt)throw r;Mi(n,"network-request-failed",{message:String(r)})}})}function Tk(s,o,c,l){return E(this,arguments,function*(n,e,t,i,r={}){let u=yield ys(n,e,t,i,r);return"mfaPendingCredential"in u&&Mi(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function Wb(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Yp(n.config,r):`${n.config.apiScheme}://${r}`}var Op=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),Ek.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ql(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=gr(n,e,i);return r.customData._tokenResponse=t,r}function Ck(n,e){return E(this,null,function*(){return ys(n,"POST","/v1/accounts:delete",e)})}function Kb(n,e){return E(this,null,function*(){return ys(n,"POST","/v1/accounts:lookup",e)})}function pa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xp(n,e=!1){return E(this,null,function*(){let t=Wn(n),i=yield t.getIdToken(e),r=Jp(i);ie(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:pa(Rp(r.auth_time)),issuedAtTime:pa(Rp(r.iat)),expirationTime:pa(Rp(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Rp(n){return Number(n)*1e3}function Jp(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{let r=rp(t);return r?JSON.parse(r):(Gl("Failed to decode base64 JWT payload"),null)}catch(r){return Gl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Rb(n){let e=Jp(n);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ga(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Mt&&Ak(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function Ak({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Mp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _a=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xl(n){return E(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield ga(n,Kb(t,{idToken:i}));ie(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Yb(s.providerUserInfo):[],c=Sk(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!c?.length,d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new _a(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,p)})}function Zp(n){return E(this,null,function*(){let e=Wn(n);yield Xl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Sk(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Yb(n){return n.map(e=>{var{providerId:t}=e,i=Pd(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function xk(n,e){return E(this,null,function*(){let t=yield Hb(n,{},()=>E(this,null,function*(){let i=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Wb(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ql.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Rk(n,e){return E(this,null,function*(){return ys(n,"POST","/v2/accounts:revokeToken",Qp(n,e))})}var ma=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");let t=Rb(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield xk(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ie(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ie(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Qn("not implemented")}};function Oi(n,e){ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var _s=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Pd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _a(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield ga(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Xp(this,e)}reload(){return Zp(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Xl(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Pn(this.auth.app))return Promise.reject(mr(this.auth));let e=yield this.getIdToken();return yield ga(this,Ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,u,d;let p=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,M=(u=t.createdAt)!==null&&u!==void 0?u:void 0,B=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:Q,isAnonymous:be,providerData:ae,stsTokenManager:I}=t;ie(H&&I,e,"internal-error");let _=ma.fromJSON(this.name,I);ie(typeof H=="string",e,"internal-error"),Oi(p,e.name),Oi(g,e.name),ie(typeof Q=="boolean",e,"internal-error"),ie(typeof be=="boolean",e,"internal-error"),Oi(v,e.name),Oi(S,e.name),Oi(P,e.name),Oi(k,e.name),Oi(M,e.name),Oi(B,e.name);let y=new n({uid:H,auth:e,email:g,emailVerified:Q,displayName:p,isAnonymous:be,photoURL:S,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:M,lastLoginAt:B});return ae&&Array.isArray(ae)&&(y.providerData=ae.map(b=>Object.assign({},b))),k&&(y._redirectEventId=k),y}static _fromIdTokenResponse(e,t,i=!1){return E(this,null,function*(){let r=new ma;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Xl(s),s})}static _fromGetAccountInfoResponse(e,t,i){return E(this,null,function*(){let r=t.users[0];ie(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Yb(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new ma;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new _a(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var Db=new Map;function Xn(n){Ni(n instanceof Function,"Expected a class definition");let e=Db.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Db.set(n,e),e)}var Dk=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,i){return E(this,null,function*(){this.storage[t]=i})}_get(t){return E(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Np=Dk;function Hl(n,e,t){return`firebase:${n}:${e}:${t}`}var Jl=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Hl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Hl("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?_s._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return E(this,null,function*(){if(!t.length)return new n(Xn(Np),e,i);let r=(yield Promise.all(t.map(u=>E(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||Xn(Np),o=Hl(i,e.config.apiKey,e.name),c=null;for(let u of t)try{let d=yield u._get(o);if(d){let p=_s._fromJSON(e,d);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(u=>E(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,i))})}};function Pb(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tI(e))return"Blackberry";if(nI(e))return"Webos";if(Xb(e))return"Safari";if((e.includes("chrome/")||Jb(e))&&!e.includes("edge/"))return"Chrome";if(eI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Qb(n=it()){return/firefox\//i.test(n)}function Xb(n=it()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jb(n=it()){return/crios\//i.test(n)}function Zb(n=it()){return/iemobile/i.test(n)}function eI(n=it()){return/android/i.test(n)}function tI(n=it()){return/blackberry/i.test(n)}function nI(n=it()){return/webos/i.test(n)}function em(n=it()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pk(n=it()){var e;return em(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kk(){return rb()&&document.documentMode===10}function iI(n=it()){return em(n)||eI(n)||nI(n)||tI(n)||/windows phone/i.test(n)||Zb(n)}function rI(n,e=[]){let t;switch(n){case"Browser":t=Pb(it());break;case"Worker":t=`${Pb(it())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pn}/${i}`}var Fp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Ok(t){return E(this,arguments,function*(n,e={}){return ys(n,"GET","/v2/passwordPolicy",Qp(n,e))})}var Mk=6,Vp=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Mk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Lp=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zl(this),this.idTokenSubscription=new Zl(this),this.beforeStateQueue=new Fp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xn(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Jl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Kb(this,{idToken:e}),i=yield _s._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Pn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Xl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=bk()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Pn(this.app))return Promise.reject(mr(this));let t=e?Wn(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Pn(this.app)?Promise.reject(mr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Pn(this.app)?Promise.reject(mr(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Xn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield Ok(this),t=new Vp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Rk(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Xn(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=yield Jl.create(this,[Xn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return E(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&yk(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function tm(n){return Wn(n)}var Zl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nl(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var nm={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nk(n){nm=n}function Fk(n){return nm.loadJS(n)}function Vk(){return nm.gapiScript}function sI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function im(n,e){let t=hr(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(lr(s,e??{}))return r;Mi(r,"already-initialized")}return t.initialize({options:e})}function Lk(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Xn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function rm(n,e,t){let i=tm(n);ie(i._canInitEmulator,i,"emulator-config-failed"),ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=oI(e),{host:o,port:c}=Uk(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||jk()}function oI(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Uk(n){let e=oI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:kb(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:kb(o)}}}function kb(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function jk(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var eu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,t){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}};function Dp(n,e){return E(this,null,function*(){return Tk(n,"POST","/v1/accounts:signInWithIdp",Qp(n,e))})}var tu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Up=class extends tu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ya=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return E(this,null,function*(){let s=yield _s._fromIdTokenResponse(e,i,r),o=Ob(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return E(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=Ob(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function Ob(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jp=class n extends Mt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function aI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(n,s,e,i):s})}function Bk(n,e,t=!1){return E(this,null,function*(){let i=yield ga(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ya._forOperation(n,"link",i)})}function zk(n,e,t=!1){return E(this,null,function*(){let{auth:i}=n;if(Pn(i.app))return Promise.reject(mr(i));let r="reauthenticate";try{let s=yield ga(n,aI(i,r,e,n),t);ie(s.idToken,i,"internal-error");let o=Jp(s.idToken);ie(o,i,"internal-error");let{sub:c}=o;return ie(n.uid===c,i,"user-mismatch"),ya._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mi(i,"user-mismatch"),s}})}function $k(n,e,t=!1){return E(this,null,function*(){if(Pn(n.app))return Promise.reject(mr(n));let i="signIn",r=yield aI(n,i,e),s=yield ya._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function sm(n,e,t,i){return Wn(n).onIdTokenChanged(e,t,i)}function om(n,e,t){return Wn(n).beforeAuthStateChanged(e,t)}var nu="__sak";var iu=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qk=1e3,Gk=10,Hk=(()=>{class n extends iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);kk()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Gk):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return E(this,null,function*(){yield vi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return E(this,null,function*(){let i=yield vi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return E(this,null,function*(){yield vi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),cI=Hk;var Wk=(()=>{class n extends iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),am=Wk;function Kk(n){return Promise.all(n.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Yk=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(d=>E(this,null,function*(){return d(i.origin,o)})),u=yield Kk(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function lI(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Bp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return E(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=lI("",20);r.port1.start();let d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function On(){return window}function Qk(n){On().location.href=n}function uI(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}function Xk(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Jk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Zk(){return uI()?self:null}var hI="firebaseLocalStorageDb",eO=1,ru="firebaseLocalStorage",dI="fbase_key",yr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ou(n,e){return n.transaction([ru],e?"readwrite":"readonly").objectStore(ru)}function tO(){let n=indexedDB.deleteDatabase(hI);return new yr(n).toPromise()}function zp(){let n=indexedDB.open(hI,eO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(ru,{keyPath:dI})}catch(r){t(r)}}),n.addEventListener("success",()=>E(this,null,function*(){let i=n.result;i.objectStoreNames.contains(ru)?e(i):(i.close(),yield tO(),e(yield zp()))}))})}function Mb(n,e,t){return E(this,null,function*(){let i=ou(n,!0).put({[dI]:e,value:t});return new yr(i).toPromise()})}function nO(n,e){return E(this,null,function*(){let t=ou(n,!1).get(e),i=yield new yr(t).toPromise();return i===void 0?null:i.value})}function Nb(n,e){let t=ou(n,!0).delete(e);return new yr(t).toPromise()}var iO=800,rO=3,sO=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield zp(),this.db)})}_withRetries(t){return E(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>rO)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return uI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=Yk._getInstance(Zk()),this.receiver._subscribe("keyChanged",(t,i)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,i;if(this.activeServiceWorker=yield Xk(),!this.activeServiceWorker)return;this.sender=new Bp(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Jk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield zp();return yield Mb(t,nu,"1"),yield Nb(t,nu),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>Mb(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let i=yield this._withRetries(r=>nO(r,t));return this.localCache[t]=i,i})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>Nb(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(s=>{let o=ou(s,!1).getAll();return new yr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),iO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),fI=sO;var BB=sI("rcb"),zB=new _r(3e4,6e4);function oO(n,e){return e?Xn(e):(ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var va=class extends eu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dp(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function aO(n){return $k(n.auth,new va(n),n.bypassAuthState)}function cO(n){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),zk(t,new va(n),n.bypassAuthState)}function lO(n){return E(this,null,function*(){let{auth:e,user:t}=n;return ie(t,e,"internal-error"),Bk(t,new va(n),n.bypassAuthState)})}var $p=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aO;case"linkViaPopup":case"linkViaRedirect":return lO;case"reauthViaPopup":case"reauthViaRedirect":return cO;default:Mi(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $B=new _r(2e3,1e4);var uO="pendingRedirect",Wl=new Map,qp=class n extends $p{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return E(this,null,function*(){let e=Wl.get(this.auth._key());if(!e){try{let i=(yield hO(this.resolver,this.auth))?yield vi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Wl.set(this.auth._key(),e)}return this.bypassAuthState||Wl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return vi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function hO(n,e){return E(this,null,function*(){let t=pO(e),i=fO(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function dO(n,e){Wl.set(n._key(),e)}function fO(n){return Xn(n._redirectPersistence)}function pO(n){return Hl(uO,n.config.apiKey,n.name)}function mO(n,e,t=!1){return E(this,null,function*(){if(Pn(n.app))return Promise.reject(mr(n));let i=tm(n),r=oO(i,e),o=yield new qp(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var gO=10*60*1e3,Gp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_O(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!pI(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(gr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fb(e))}saveEventToCache(e){this.cachedEventUids.add(Fb(e)),this.lastProcessedEventTime=Date.now()}};function Fb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _O(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pI(n);default:return!1}}function yO(t){return E(this,arguments,function*(n,e={}){return ys(n,"GET","/v1/projects",e)})}var vO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wO=/^https?/;function bO(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield yO(n);for(let t of e)try{if(IO(t))return}catch{}Mi(n,"unauthorized-domain")})}function IO(n){let e=kp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!wO.test(t))return!1;if(vO.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var EO=new _r(3e4,6e4);function Vb(){let n=On().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TO(n){return new Promise((e,t)=>{var i,r,s;function o(){Vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vb(),t(gr(n,"network-request-failed"))},timeout:EO.get()})}if(!((r=(i=On().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{let c=sI("iframefcb");return On()[c]=()=>{gapi.load?o():t(gr(n,"network-request-failed"))},Fk(`${Vk()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Kl=null,e})}var Kl=null;function CO(n){return Kl=Kl||TO(n),Kl}var AO=new _r(5e3,15e3),SO="__/auth/iframe",xO="emulator/auth/iframe",RO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PO(n){let e=n.config;ie(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Yp(e,xO):`https://${n.config.authDomain}/${SO}`,i={apiKey:e.apiKey,appName:n.name,v:pn},r=DO.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ca(i).slice(1)}`}function kO(n){return E(this,null,function*(){let e=yield CO(n),t=On().gapi;return ie(t,n,"internal-error"),e.open({where:document.body,url:PO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RO,dontclear:!0},i=>new Promise((r,s)=>E(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=gr(n,"network-request-failed"),c=On().setTimeout(()=>{s(o)},AO.get());function l(){On().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var OO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MO=500,NO=600,FO="_blank",VO="http://localhost",su=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function LO(n,e,t,i=MO,r=NO){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},OO),{width:i.toString(),height:r.toString(),top:s,left:o}),u=it().toLowerCase();t&&(c=Jb(u)?FO:t),Qb(u)&&(e=e||VO,l.scrollbars="yes");let d=Object.entries(l).reduce((g,[v,S])=>`${g}${v}=${S},`,"");if(Pk(u)&&c!=="_self")return UO(e||"",c),new su(null);let p=window.open(e||"",c,d);ie(p,n,"popup-blocked");try{p.focus()}catch{}return new su(p)}function UO(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var jO="__/auth/handler",BO="emulator/auth/handler",zO=encodeURIComponent("fac");function Lb(n,e,t,i,r,s){return E(this,null,function*(){ie(n.config.authDomain,n,"auth-domain-config-required"),ie(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:pn,eventId:r};if(e instanceof tu){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ab(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof Up){let d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let d of Object.keys(c))c[d]===void 0&&delete c[d];let l=yield n._getAppCheckToken(),u=l?`#${zO}=${encodeURIComponent(l)}`:"";return`${$O(n)}?${ca(c).slice(1)}${u}`})}function $O({config:n}){return n.emulator?Yp(n,BO):`https://${n.authDomain}/${jO}`}var Pp="webStorageSupport",Hp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=am,this._completeRedirectFn=mO,this._overrideRedirectResult=dO}_openPopup(e,t,i,r){return E(this,null,function*(){var s;Ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Lb(e,t,i,kp(),r);return LO(e,o,lI())})}_openRedirect(e,t,i,r){return E(this,null,function*(){yield this._originValidation(e);let s=yield Lb(e,t,i,kp(),r);return Qk(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Ni(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return E(this,null,function*(){let t=yield kO(e),i=new Gp(e);return t.register("authEvent",r=>(ie(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pp,{type:Pp},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Pp];o!==void 0&&t(!!o),Mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iI()||Xb()||em()}},mI=Hp;var Ub="@firebase/auth",jb="1.7.9";var Wp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GO(n){fn(new Nt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rI(n)},u=new Lp(i,r,s,l);return Lk(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),fn(new Nt("auth-internal",e=>{let t=tm(e.getProvider("auth").getImmediate());return(i=>new Wp(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(Ub,jb,qO(n)),Fe(Ub,jb,"esm2017")}var HO=5*60,WO=cp("authIdTokenMaxAge")||HO,Bb=null,KO=n=>e=>E(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>WO)return;let r=t?.token;Bb!==r&&(Bb=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function cm(n=dr()){let e=hr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=im(n,{popupRedirectResolver:mI,persistence:[fI,cI,am]}),i=cp("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=KO(s.toString());om(t,o,()=>o(t.currentUser)),sm(t,c=>o(c))}}let r=op("auth");return r&&rm(t,`http://${r}`),t}function YO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Nk({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=gr("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",YO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GO("Browser");var gI="auth",wa=class{constructor(e){return e}},ba=class{constructor(){return fa(gI)}};var lm=new $("angularfire2.auth-instances");function $M(n,e){let t=zl(gI,n,e);return t&&new wa(t)}function qM(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new wa(i)}}var GM={provide:ba,deps:[[new et,lm]]},HM={provide:wa,useFactory:$M,deps:[[new et,lm],Yn]};function _I(n,...e){return Fe("angularfire",kn.full,"auth"),Wt([HM,GM,{provide:lm,useFactory:qM(n),multi:!0,deps:[ne,Ve,gs,pr,[new et,ms],...e]}])}var yI=ki(cm,!0);var vI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wI={};var Fi,um;(function(){var n;function e(I,_){function y(){}y.prototype=_.prototype,I.D=_.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(b,T,A){for(var w=Array(arguments.length-2),R=2;R<arguments.length;R++)w[R-2]=arguments[R];return _.prototype[T].apply(b,w)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,y){y||(y=0);var b=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)b[T]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(T=0;16>T;++T)b[T]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=I.g[0],y=I.g[1],T=I.g[2];var A=I.g[3],w=_+(A^y&(T^A))+b[0]+3614090360&4294967295;_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[1]+3905402710&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[2]+606105819&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[3]+3250441966&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[4]+4118548399&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[5]+1200080426&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[6]+2821735955&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[7]+4249261313&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[8]+1770035416&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[9]+2336552879&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[10]+4294925233&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[11]+2304563134&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(A^y&(T^A))+b[12]+1804603682&4294967295,_=y+(w<<7&4294967295|w>>>25),w=A+(T^_&(y^T))+b[13]+4254626195&4294967295,A=_+(w<<12&4294967295|w>>>20),w=T+(y^A&(_^y))+b[14]+2792965006&4294967295,T=A+(w<<17&4294967295|w>>>15),w=y+(_^T&(A^_))+b[15]+1236535329&4294967295,y=T+(w<<22&4294967295|w>>>10),w=_+(T^A&(y^T))+b[1]+4129170786&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[6]+3225465664&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[11]+643717713&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[0]+3921069994&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[5]+3593408605&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[10]+38016083&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[15]+3634488961&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[4]+3889429448&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[9]+568446438&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[14]+3275163606&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[3]+4107603335&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[8]+1163531501&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(T^A&(y^T))+b[13]+2850285829&4294967295,_=y+(w<<5&4294967295|w>>>27),w=A+(y^T&(_^y))+b[2]+4243563512&4294967295,A=_+(w<<9&4294967295|w>>>23),w=T+(_^y&(A^_))+b[7]+1735328473&4294967295,T=A+(w<<14&4294967295|w>>>18),w=y+(A^_&(T^A))+b[12]+2368359562&4294967295,y=T+(w<<20&4294967295|w>>>12),w=_+(y^T^A)+b[5]+4294588738&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[8]+2272392833&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[11]+1839030562&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[14]+4259657740&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[1]+2763975236&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[4]+1272893353&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[7]+4139469664&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[10]+3200236656&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[13]+681279174&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[0]+3936430074&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[3]+3572445317&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[6]+76029189&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(y^T^A)+b[9]+3654602809&4294967295,_=y+(w<<4&4294967295|w>>>28),w=A+(_^y^T)+b[12]+3873151461&4294967295,A=_+(w<<11&4294967295|w>>>21),w=T+(A^_^y)+b[15]+530742520&4294967295,T=A+(w<<16&4294967295|w>>>16),w=y+(T^A^_)+b[2]+3299628645&4294967295,y=T+(w<<23&4294967295|w>>>9),w=_+(T^(y|~A))+b[0]+4096336452&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[7]+1126891415&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[14]+2878612391&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[5]+4237533241&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[12]+1700485571&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[3]+2399980690&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[10]+4293915773&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[1]+2240044497&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[8]+1873313359&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[15]+4264355552&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[6]+2734768916&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[13]+1309151649&4294967295,y=T+(w<<21&4294967295|w>>>11),w=_+(T^(y|~A))+b[4]+4149444226&4294967295,_=y+(w<<6&4294967295|w>>>26),w=A+(y^(_|~T))+b[11]+3174756917&4294967295,A=_+(w<<10&4294967295|w>>>22),w=T+(_^(A|~y))+b[2]+718787259&4294967295,T=A+(w<<15&4294967295|w>>>17),w=y+(A^(T|~_))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+A&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var y=_-this.blockSize,b=this.B,T=this.h,A=0;A<_;){if(T==0)for(;A<=y;)r(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<_;)if(b[T++]=I.charCodeAt(A++),T==this.blockSize){r(this,b),T=0;break}}else for(;A<_;)if(b[T++]=I[A++],T==this.blockSize){r(this,b),T=0;break}}this.h=T,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var y=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=y&255,y/=256;for(this.u(I),I=Array(16),_=y=0;4>_;++_)for(var b=0;32>b;b+=8)I[y++]=this.g[_]>>>b&255;return I};function s(I,_){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=_(I)}function o(I,_){this.h=_;for(var y=[],b=!0,T=I.length-1;0<=T;T--){var A=I[T]|0;b&&A==_||(y[T]=A,b=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return k(u(-I));for(var _=[],y=1,b=0;I>=y;b++)_[b]=I/y|0,y*=4294967296;return new o(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return k(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(_,8)),b=p,T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T),w=parseInt(I.substring(T,T+A),_);8>A?(A=u(Math.pow(_,A)),b=b.j(A).add(u(w))):(b=b.j(y),b=b.add(u(w)))}return b}var p=l(0),g=l(1),v=l(16777216);n=o.prototype,n.m=function(){if(P(this))return-k(this).m();for(var I=0,_=1,y=0;y<this.g.length;y++){var b=this.i(y);I+=(0<=b?b:4294967296+b)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(P(this))return"-"+k(this).toString(I);for(var _=u(Math.pow(I,6)),y=this,b="";;){var T=Q(y,_).g;y=M(y,T.j(_));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=T,S(y))return A+b;for(;6>A.length;)A="0"+A;b=A+b}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=M(this,I),P(I)?-1:S(I)?0:1};function k(I){for(var _=I.g.length,y=[],b=0;b<_;b++)y[b]=~I.g[b];return new o(y,~I.h).add(g)}n.abs=function(){return P(this)?k(this):this},n.add=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0,T=0;T<=_;T++){var A=b+(this.i(T)&65535)+(I.i(T)&65535),w=(A>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);b=w>>>16,A&=65535,w&=65535,y[T]=w<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function M(I,_){return I.add(k(_))}n.j=function(I){if(S(this)||S(I))return p;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var _=this.g.length+I.g.length,y=[],b=0;b<2*_;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<I.g.length;T++){var A=this.i(b)>>>16,w=this.i(b)&65535,R=I.i(T)>>>16,q=I.i(T)&65535;y[2*b+2*T]+=w*q,B(y,2*b+2*T),y[2*b+2*T+1]+=A*q,B(y,2*b+2*T+1),y[2*b+2*T+1]+=w*R,B(y,2*b+2*T+1),y[2*b+2*T+2]+=A*R,B(y,2*b+2*T+2)}for(b=0;b<_;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=_;b<2*_;b++)y[b]=0;return new o(y,0)};function B(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function H(I,_){this.g=I,this.h=_}function Q(I,_){if(S(_))throw Error("division by zero");if(S(I))return new H(p,p);if(P(I))return _=Q(k(I),_),new H(k(_.g),k(_.h));if(P(_))return _=Q(I,k(_)),new H(k(_.g),_.h);if(30<I.g.length){if(P(I)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,b=_;0>=b.l(I);)y=be(y),b=be(b);var T=ae(y,1),A=ae(b,1);for(b=ae(b,2),y=ae(y,2);!S(b);){var w=A.add(b);0>=w.l(I)&&(T=T.add(y),A=w),b=ae(b,1),y=ae(y,1)}return _=M(I,T.j(_)),new H(T,_)}for(T=p;0<=I.l(_);){for(y=Math.max(1,Math.floor(I.m()/_.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),A=u(y),w=A.j(_);P(w)||0<w.l(I);)y-=b,A=u(y),w=A.j(_);S(A)&&(A=g),T=T.add(A),I=M(I,w)}return new H(T,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)&I.i(b);return new o(y,this.h&I.h)},n.or=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)|I.i(b);return new o(y,this.h|I.h)},n.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),y=[],b=0;b<_;b++)y[b]=this.i(b)^I.i(b);return new o(y,this.h^I.h)};function be(I){for(var _=I.g.length+1,y=[],b=0;b<_;b++)y[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(y,I.h)}function ae(I,_){var y=_>>5;_%=32;for(var b=I.g.length-y,T=[],A=0;A<b;A++)T[A]=0<_?I.i(A+y)>>>_|I.i(A+y+1)<<32-_:I.i(A+y);return new o(T,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,um=wI.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Fi=wI.Integer=o}).apply(typeof vI<"u"?vI:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={};var hm,WM,vs,dm,Ia,cu,fm,pm,mm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=t(this);function r(a,h){if(h)e:{var f=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in f))break e;f=f[C]}a=a[a.length-1],m=f[a],h=h(m),h!=m&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var f=0,m=!1,C={next:function(){if(!m&&f<a.length){var x=f++;return{value:h(x,a[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(a){return a||function(){return s(this,function(h,f){return f})}});var o=o||{},c=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function u(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function d(a,h,f){return a.call.apply(a.bind,arguments)}function p(a,h,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function v(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function S(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,C,x){for(var L=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)L[Pe-2]=arguments[Pe];return h.prototype[C].apply(m,L)}}function P(a){let h=a.length;if(0<h){let f=Array(h);for(let m=0;m<h;m++)f[m]=a[m];return f}return[]}function k(a,h){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let C=a.length||0,x=m.length||0;a.length=C+x;for(let L=0;L<x;L++)a[C+L]=m[L]}else a.push(m)}}class M{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(a){return/^[\s\xa0]*$/.test(a)}function H(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Q(a){return Q[" "](a),a}Q[" "]=function(){};var be=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ae(a,h,f){for(let m in a)h.call(f,a[m],m,a)}function I(a,h){for(let f in a)h.call(void 0,a[f],f,a)}function _(a){let h={};for(let f in a)h[f]=a[f];return h}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)a[f]=m[f];for(let x=0;x<y.length;x++)f=y[x],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function T(a){var h=1;a=a.split(":");let f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){c.setTimeout(()=>{throw a},0)}function w(){var a=he;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class R{constructor(){this.h=this.g=null}add(h,f){let m=q.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var q=new M(()=>new F,a=>a.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Z=!1,he=new R,de=()=>{let a=c.Promise.resolve(void 0);K=()=>{a.then(Re)}};var Re=()=>{for(var a;a=w();){try{a.h.call(a.g)}catch(f){A(f)}var h=q;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Z=!1};function Ae(){this.s=this.s,this.C=this.C}Ae.prototype.s=!1,Ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return a}();function st(a,h){if(De.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(be){e:{try{Q(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&st.aa.h.call(this)}}S(st,De);var nn={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),rn=0;function so(a,h,f,m,C){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=C,this.key=++rn,this.da=this.fa=!1}function Tc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Cc(a){this.src=a,this.g={},this.h=0}Cc.prototype.add=function(a,h,f,m,C){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var L=od(a,h,m,C);return-1<L?(h=a[L],f||(h.fa=!1)):(h=new so(h,this.src,x,!!m,C),h.fa=f,a.push(h)),h};function sd(a,h){var f=h.type;if(f in a.g){var m=a.g[f],C=Array.prototype.indexOf.call(m,h,void 0),x;(x=0<=C)&&Array.prototype.splice.call(m,C,1),x&&(Tc(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function od(a,h,f,m){for(var C=0;C<a.length;++C){var x=a[C];if(!x.da&&x.listener==h&&x.capture==!!f&&x.ha==m)return C}return-1}var ad="closure_lm_"+(1e6*Math.random()|0),cd={};function Uy(a,h,f,m,C){if(m&&m.once)return By(a,h,f,m,C);if(Array.isArray(h)){for(var x=0;x<h.length;x++)Uy(a,h[x],f,m,C);return null}return f=dd(f),a&&a[ot]?a.K(h,f,u(m)?!!m.capture:!!m,C):jy(a,h,f,!1,m,C)}function jy(a,h,f,m,C,x){if(!h)throw Error("Invalid event type");var L=u(C)?!!C.capture:!!C,Pe=ud(a);if(Pe||(a[ad]=Pe=new Cc(a)),f=Pe.add(h,f,m,L,x),f.proxy)return f;if(m=US(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)Qe||(C=L),C===void 0&&(C=!1),a.addEventListener(h.toString(),m,C);else if(a.attachEvent)a.attachEvent($y(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function US(){function a(f){return h.call(a.src,a.listener,f)}let h=jS;return a}function By(a,h,f,m,C){if(Array.isArray(h)){for(var x=0;x<h.length;x++)By(a,h[x],f,m,C);return null}return f=dd(f),a&&a[ot]?a.L(h,f,u(m)?!!m.capture:!!m,C):jy(a,h,f,!0,m,C)}function zy(a,h,f,m,C){if(Array.isArray(h))for(var x=0;x<h.length;x++)zy(a,h[x],f,m,C);else m=u(m)?!!m.capture:!!m,f=dd(f),a&&a[ot]?(a=a.i,h=String(h).toString(),h in a.g&&(x=a.g[h],f=od(x,f,m,C),-1<f&&(Tc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete a.g[h],a.h--)))):a&&(a=ud(a))&&(h=a.g[h.toString()],a=-1,h&&(a=od(h,f,m,C)),(f=-1<a?h[a]:null)&&ld(f))}function ld(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ot])sd(h.i,a);else{var f=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(f,m,a.capture):h.detachEvent?h.detachEvent($y(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=ud(h))?(sd(f,a),f.h==0&&(f.src=null,h[ad]=null)):Tc(a)}}}function $y(a){return a in cd?cd[a]:cd[a]="on"+a}function jS(a,h){if(a.da)a=!0;else{h=new st(h,this);var f=a.listener,m=a.ha||a.src;a.fa&&ld(a),a=f.call(m,h)}return a}function ud(a){return a=a[ad],a instanceof Cc?a:null}var hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function dd(a){return typeof a=="function"?a:(a[hd]||(a[hd]=function(h){return a.handleEvent(h)}),a[hd])}function ft(){Ae.call(this),this.i=new Cc(this),this.M=this,this.F=null}S(ft,Ae),ft.prototype[ot]=!0,ft.prototype.removeEventListener=function(a,h,f,m){zy(this,a,h,f,m)};function Ct(a,h){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new De(h,a);else if(h instanceof De)h.target=h.target||a;else{var C=h;h=new De(m,a),b(h,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var L=h.g=f[x];C=Ac(L,m,!0,h)&&C}if(L=h.g=a,C=Ac(L,m,!0,h)&&C,C=Ac(L,m,!1,h)&&C,f)for(x=0;x<f.length;x++)L=h.g=f[x],C=Ac(L,m,!1,h)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],m=0;m<f.length;m++)Tc(f[m]);delete a.g[h],a.h--}}this.F=null},ft.prototype.K=function(a,h,f,m){return this.i.add(String(a),h,!1,f,m)},ft.prototype.L=function(a,h,f,m){return this.i.add(String(a),h,!0,f,m)};function Ac(a,h,f,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,x=0;x<h.length;++x){var L=h[x];if(L&&!L.da&&L.capture==f){var Pe=L.listener,at=L.ha||L.src;L.fa&&sd(a.i,L),C=Pe.call(at,m)!==!1&&C}}return C&&!m.defaultPrevented}function qy(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(a,h||0)}function Gy(a){a.g=qy(()=>{a.g=null,a.i&&(a.i=!1,Gy(a))},a.l);let h=a.h;a.h=null,a.m.apply(null,h)}class BS extends Ae{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Gy(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(a){Ae.call(this),this.h=a,this.g={}}S(oo,Ae);var Hy=[];function Wy(a){ae(a.g,function(h,f){this.g.hasOwnProperty(f)&&ld(h)},a),a.g={}}oo.prototype.N=function(){oo.aa.N.call(this),Wy(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fd=c.JSON.stringify,zS=c.JSON.parse,$S=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function pd(){}pd.prototype.h=null;function Ky(a){return a.h||(a.h=a.i())}function Yy(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function md(){De.call(this,"d")}S(md,De);function gd(){De.call(this,"c")}S(gd,De);var Ki={},Qy=null;function Sc(){return Qy=Qy||new ft}Ki.La="serverreachability";function Xy(a){De.call(this,Ki.La,a)}S(Xy,De);function co(a){let h=Sc();Ct(h,new Xy(h))}Ki.STAT_EVENT="statevent";function Jy(a,h){De.call(this,Ki.STAT_EVENT,a),this.stat=h}S(Jy,De);function At(a){let h=Sc();Ct(h,new Jy(h,a))}Ki.Ma="timingevent";function Zy(a,h){De.call(this,Ki.Ma,a),this.size=h}S(Zy,De);function lo(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},h)}function uo(){this.g=!0}uo.prototype.xa=function(){this.g=!1};function qS(a,h,f,m,C,x){a.info(function(){if(a.g)if(x)for(var L="",Pe=x.split("&"),at=0;at<Pe.length;at++){var Ie=Pe[at].split("=");if(1<Ie.length){var pt=Ie[0];Ie=Ie[1];var mt=pt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(pt+"="+Ie+"&"):L+(pt+"=redacted&")}}else L=null;else L=x;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+f+`
`+L})}function GS(a,h,f,m,C,x,L){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+f+`
`+x+" "+L})}function Br(a,h,f,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+WS(a,f)+(m?" "+m:"")})}function HS(a,h){a.info(function(){return"TIMEOUT: "+h})}uo.prototype.info=function(){};function WS(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return fd(f)}catch{return h}}var xc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ev={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function Rc(){}S(Rc,pd),Rc.prototype.g=function(){return new XMLHttpRequest},Rc.prototype.i=function(){return{}},_d=new Rc;function gi(a,h,f,m){this.j=a,this.i=h,this.l=f,this.R=m||1,this.U=new oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tv}function tv(){this.i=null,this.g="",this.h=!1}var nv={},yd={};function vd(a,h,f){a.L=1,a.v=Oc(jn(h)),a.m=f,a.P=!0,iv(a,null)}function iv(a,h){a.F=Date.now(),Dc(a),a.A=jn(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),_v(f.i,"t",m),a.C=0,f=a.j.J,a.h=new tv,a.g=Nv(a.j,f?h:null,!a.m),0<a.O&&(a.M=new BS(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,m=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Hy[0]=C.toString()),C=Hy);for(var x=0;x<C.length;x++){var L=Uy(f,C[x],m||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),co(),qS(a.i,a.u,a.A,a.l,a.R,a.m)}gi.prototype.ca=function(a){a=a.target;let h=this.M;h&&Bn(a)==3?h.j():this.Y(a)},gi.prototype.Y=function(a){try{if(a==this.g)e:{let mt=Bn(this.g);var h=this.g.Ba();let qr=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Tv(this.g)))){this.J||mt!=4||h==7||(h==8||0>=qr?co(3):co(2)),wd(this);var f=this.g.Z();this.X=f;t:if(rv(this)){var m=Tv(this.g);a="";var C=m.length,x=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),ho(this);var L="";break t}this.h.i=new c.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(m[h],{stream:!(x&&h==C-1)});m.length=0,this.h.g+=a,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,GS(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,at=this.g;if((Pe=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Pe)){var Ie=Pe;break t}}Ie=null}if(f=Ie)Br(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bd(this,f);else{this.o=!1,this.s=3,At(12),Yi(this),ho(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=KS(this,L),sn==yd){mt==4&&(this.s=4,At(14),f=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==nv){this.s=4,At(15),Br(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Br(this.i,this.l,sn,null),bd(this,sn);if(rv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)Br(this.i,this.l,L,"[Invalid Chunked Response]"),Yi(this),ho(this);else if(0<L.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Sd(pt),pt.M=!0,At(11))}}else Br(this.i,this.l,L,null),bd(this,L);mt==4&&Yi(this),this.o&&!this.J&&(mt==4?Pv(this.j,this):(this.o=!1,Dc(this)))}else hx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Yi(this),ho(this)}}}catch{}finally{}};function rv(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function KS(a,h){var f=a.C,m=h.indexOf(`
`,f);return m==-1?yd:(f=Number(h.substring(f,m)),isNaN(f)?nv:(m+=1,m+f>h.length?yd:(h=h.slice(m,m+f),a.C=m+f,h)))}gi.prototype.cancel=function(){this.J=!0,Yi(this)};function Dc(a){a.S=Date.now()+a.I,sv(a,a.I)}function sv(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=lo(g(a.ba,a),h)}function wd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}gi.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(HS(this.i,this.A),this.L!=2&&(co(),At(17)),Yi(this),this.s=2,ho(this)):sv(this,this.S-a)};function ho(a){a.j.G==0||a.J||Pv(a.j,a)}function Yi(a){wd(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Wy(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function bd(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Id(f.h,a))){if(!a.K&&Id(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Lc(f),Fc(f);else break e;Ad(f),At(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=lo(g(f.Za,f),6e3));if(1>=cv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Xi(f,11)}else if((a.K||f.g==a)&&Lc(f),!B(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let Ie=C[h];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let pt=Ie[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let mt=Ie[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let qr=Ie[5];qr!=null&&typeof qr=="number"&&0<qr&&(m=1.5*qr,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let sn=a.g;if(sn){let jc=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var x=m.h;x.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Ed(x,x.h),x.h=null))}if(m.D){let xd=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(m.ya=xd,Me(m.I,m.D,xd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var L=a;if(m.qa=Mv(m,m.J?m.ia:null,m.W),L.K){lv(m.h,L);var Pe=L,at=m.L;at&&(Pe.I=at),Pe.B&&(wd(Pe),Dc(Pe)),m.g=L}else Rv(m);0<f.i.length&&Vc(f)}else Ie[0]!="stop"&&Ie[0]!="close"||Xi(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Xi(f,7):Cd(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}co(4)}catch{}}var YS=class{constructor(a,h){this.g=a,this.map=h}};function ov(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function av(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cv(a){return a.h?1:a.g?a.g.size:0}function Id(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Ed(a,h){a.g?a.g.add(h):a.h=h}function lv(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}ov.prototype.cancel=function(){if(this.i=uv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function uv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(let f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function QS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],f=a.length,m=0;m<f;m++)h.push(a[m]);return h}h=[],f=0;for(m in a)h[f++]=a[m];return h}function XS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(let m in a)h[f++]=m;return h}}}function hv(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=XS(a),m=QS(a),C=m.length,x=0;x<C;x++)h.call(void 0,m[x],f&&f[x],a)}var dv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JS(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),C=null;if(0<=m){var x=a[f].substring(0,m);C=a[f].substring(m+1)}else x=a[f];h(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Qi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Qi){this.h=a.h,Pc(this,a.j),this.o=a.o,this.g=a.g,kc(this,a.s),this.l=a.l;var h=a.i,f=new mo;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),fv(this,f),this.m=a.m}else a&&(h=String(a).match(dv))?(this.h=!1,Pc(this,h[1]||"",!0),this.o=fo(h[2]||""),this.g=fo(h[3]||"",!0),kc(this,h[4]),this.l=fo(h[5]||"",!0),fv(this,h[6]||"",!0),this.m=fo(h[7]||"")):(this.h=!1,this.i=new mo(null,this.h))}Qi.prototype.toString=function(){var a=[],h=this.j;h&&a.push(po(h,pv,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(po(h,pv,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(po(f,f.charAt(0)=="/"?tx:ex,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",po(f,ix)),a.join("")};function jn(a){return new Qi(a)}function Pc(a,h,f){a.j=f?fo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function kc(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function fv(a,h,f){h instanceof mo?(a.i=h,rx(a.i,a.h)):(f||(h=po(h,nx)),a.i=new mo(h,a.h))}function Me(a,h,f){a.i.set(h,f)}function Oc(a){return Me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function fo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function po(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,ZS),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pv=/[#\/\?@]/g,ex=/[#\?:]/g,tx=/[#\?]/g,nx=/[#\?@]/g,ix=/#/g;function mo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function _i(a){a.g||(a.g=new Map,a.h=0,a.i&&JS(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}n=mo.prototype,n.add=function(a,h){_i(this),this.i=null,a=zr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function mv(a,h){_i(a),h=zr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function gv(a,h){return _i(a),h=zr(a,h),a.g.has(h)}n.forEach=function(a,h){_i(this),this.g.forEach(function(f,m){f.forEach(function(C){a.call(h,C,m,this)},this)},this)},n.na=function(){_i(this);let a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){let C=a[m];for(let x=0;x<C.length;x++)f.push(h[m])}return f},n.V=function(a){_i(this);let h=[];if(typeof a=="string")gv(this,a)&&(h=h.concat(this.g.get(zr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},n.set=function(a,h){return _i(this),this.i=null,a=zr(this,a),gv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},n.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function _v(a,h,f){mv(a,h),0<f.length&&(a.i=null,a.g.set(zr(a,h),P(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];let x=encodeURIComponent(String(m)),L=this.V(m);for(m=0;m<L.length;m++){var C=x;L[m]!==""&&(C+="="+encodeURIComponent(String(L[m]))),a.push(C)}}return this.i=a.join("&")};function zr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function rx(a,h){h&&!a.j&&(_i(a),a.i=null,a.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(mv(this,m),_v(this,C,f))},a)),a.j=h}function sx(a,h){let f=new uo;if(c.Image){let m=new Image;m.onload=v(yi,f,"TestLoadImage: loaded",!0,h,m),m.onerror=v(yi,f,"TestLoadImage: error",!1,h,m),m.onabort=v(yi,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=v(yi,f,"TestLoadImage: timeout",!1,h,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function ox(a,h){let f=new uo,m=new AbortController,C=setTimeout(()=>{m.abort(),yi(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(x=>{clearTimeout(C),x.ok?yi(f,"TestPingServer: ok",!0,h):yi(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),yi(f,"TestPingServer: error",!1,h)})}function yi(a,h,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function ax(){this.g=new $S}function cx(a,h,f){let m=f||"";try{hv(a,function(C,x){let L=C;u(C)&&(L=fd(C)),h.push(m+x+"="+encodeURIComponent(L))})}catch(C){throw h.push(m+"type="+encodeURIComponent("_badmap")),C}}function go(a){this.l=a.Ub||null,this.j=a.eb||!1}S(go,pd),go.prototype.g=function(){return new Mc(this.l,this.j)},go.prototype.i=function(a){return function(){return a}}({});function Mc(a,h){ft.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Mc,ft),n=Mc.prototype,n.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,yo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yv(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function yv(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?_o(this):yo(this),this.readyState==3&&yv(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_o(this))},n.Qa=function(a){this.g&&(this.response=a,_o(this))},n.ga=function(){this.g&&_o(this)};function _o(a){a.readyState=4,a.l=null,a.j=null,a.v=null,yo(a)}n.setRequestHeader=function(a,h){this.u.append(a,h)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function yo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vv(a){let h="";return ae(a,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function Td(a,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=vv(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Me(a,h,f))}function Ue(a){ft.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ue,ft);var lx=/^https?$/i,ux=["POST","PUT"];n=Ue.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?Ky(this.o):Ky(_d),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(x){wv(this,x);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ux,h,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,L]of f)this.g.setRequestHeader(x,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ev(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){wv(this,x)}};function wv(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,bv(a),Nc(a)}function bv(a){a.A||(a.A=!0,Ct(a,"complete"),Ct(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ct(this,"complete"),Ct(this,"abort"),Nc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Iv(this):this.bb())},n.bb=function(){Iv(this)};function Iv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Bn(a)!=4||a.Z()!=2)){if(a.u&&Bn(a)==4)qy(a.Ea,0,a);else if(Ct(a,"readystatechange"),Bn(a)==4){a.h=!1;try{let L=a.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=L===0){var C=String(a.D).match(dv)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),m=!lx.test(C?C.toLowerCase():"")}f=m}if(f)Ct(a,"complete"),Ct(a,"success");else{a.m=6;try{var x=2<Bn(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",bv(a)}}finally{Nc(a)}}}}function Nc(a,h){if(a.g){Ev(a);let f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||Ct(a,"ready");try{f.onreadystatechange=m}catch{}}}function Ev(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Bn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),zS(h)}};function Tv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function hx(a){let h={};a=(a.g&&2<=Bn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(B(a[m]))continue;var f=T(a[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=h[C]||[];h[C]=x,x.push(f)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Cv(a){this.Aa=0,this.i=[],this.j=new uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vo("baseRetryDelayMs",5e3,a),this.cb=vo("retryDelaySeedMs",1e4,a),this.Wa=vo("forwardChannelMaxRetries",2,a),this.wa=vo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ov(a&&a.concurrentRequestLimit),this.Da=new ax,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cv.prototype,n.la=8,n.G=1,n.connect=function(a,h,f,m){At(0),this.W=a,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Mv(this,null,this.W),Vc(this)};function Cd(a){if(Av(a),a.G==3){var h=a.U++,f=jn(a.I);if(Me(f,"SID",a.K),Me(f,"RID",h),Me(f,"TYPE","terminate"),wo(a,f),h=new gi(a,a.j,h),h.L=2,h.v=Oc(jn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Nv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Dc(h)}Ov(a)}function Fc(a){a.g&&(Sd(a),a.g.cancel(),a.g=null)}function Av(a){Fc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Lc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Vc(a){if(!av(a.h)&&!a.s){a.s=!0;var h=a.Ga;K||de(),Z||(K(),Z=!0),he.add(h,a),a.B=0}}function dx(a,h){return cv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=lo(g(a.Ga,a,h),kv(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new gi(this,this.j,a),x=this.o;if(this.S&&(x?(x=_(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=xv(this,C,h),f=jn(this.I),Me(f,"RID",a),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),wo(this,f),x&&(this.O?h="headers="+encodeURIComponent(String(vv(x)))+"&"+h:this.m&&Td(f,this.m,x)),Ed(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",h),Me(f,"SID","null"),C.T=!0,vd(C,f,null)):vd(C,f,h),this.G=2}}else this.G==3&&(a?Sv(this,a):this.i.length==0||av(this.h)||Sv(this))};function Sv(a,h){var f;h?f=h.l:f=a.U++;let m=jn(a.I);Me(m,"SID",a.K),Me(m,"RID",f),Me(m,"AID",a.T),wo(a,m),a.m&&a.o&&Td(m,a.m,a.o),f=new gi(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=xv(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ed(a.h,f),vd(f,m,h)}function wo(a,h){a.H&&ae(a.H,function(f,m){Me(h,m,f)}),a.l&&hv({},function(f,m){Me(h,m,f)})}function xv(a,h,f){f=Math.min(a.i.length,f);var m=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let x=-1;for(;;){let L=["count="+f];x==-1?0<f?(x=C[0].g,L.push("ofs="+x)):x=0:L.push("ofs="+x);let Pe=!0;for(let at=0;at<f;at++){let Ie=C[at].g,pt=C[at].map;if(Ie-=x,0>Ie)x=Math.max(0,C[at].g-100),Pe=!1;else try{cx(pt,L,"req"+Ie+"_")}catch{m&&m(pt)}}if(Pe){m=L.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,m}function Rv(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;K||de(),Z||(K(),Z=!0),he.add(h,a),a.v=0}}function Ad(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=lo(g(a.Fa,a),kv(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Dv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=lo(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Fc(this),Dv(this))};function Sd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Dv(a){a.g=new gi(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=jn(a.qa);Me(h,"RID","rpc"),Me(h,"SID",a.K),Me(h,"AID",a.T),Me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Me(h,"TO",a.ja),Me(h,"TYPE","xmlhttp"),wo(a,h),a.m&&a.o&&Td(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Oc(jn(h)),f.m=null,f.P=!0,iv(f,a)}n.Za=function(){this.C!=null&&(this.C=null,Fc(this),Ad(this),At(19))};function Lc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Pv(a,h){var f=null;if(a.g==h){Lc(a),Sd(a),a.g=null;var m=2}else if(Id(a.h,h))f=h.D,lv(a.h,h),m=1;else return;if(a.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;m=Sc(),Ct(m,new Zy(m,f)),Vc(a)}else Rv(a);else if(C=h.s,C==3||C==0&&0<h.X||!(m==1&&dx(a,h)||m==2&&Ad(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),C){case 1:Xi(a,5);break;case 4:Xi(a,10);break;case 3:Xi(a,6);break;default:Xi(a,2)}}}function kv(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Xi(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),m=a.Xa;let C=!m;m=new Qi(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Pc(m,"https"),Oc(m),C?sx(m.toString(),f):ox(m.toString(),f)}else At(2);a.G=0,a.l&&a.l.sa(h),Ov(a),Av(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Ov(a){if(a.G=0,a.ka=[],a.l){let h=uv(a.h);(h.length!=0||a.i.length!=0)&&(k(a.ka,h),k(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Mv(a,h,f){var m=f instanceof Qi?jn(f):new Qi(f);if(m.g!="")h&&(m.g=h+"."+m.g),kc(m,m.s);else{var C=c.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var x=new Qi(null);m&&Pc(x,m),h&&(x.g=h),C&&kc(x,C),f&&(x.l=f),m=x}return f=a.D,h=a.ya,f&&h&&Me(m,f,h),Me(m,"VER",a.la),wo(a,m),m}function Nv(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ue(new go({eb:f})):new Ue(a.pa),h.Ha(a.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fv(){}n=Fv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Uc(){}Uc.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){ft.call(this),this.g=new Cv(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!B(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new $r(this)}S(Vt,ft),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Cd(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=fd(a),a=f);h.i.push(new YS(h.Ya++,a)),h.G==3&&Vc(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Cd(this.g),delete this.g,Vt.aa.N.call(this)};function Vv(a){md.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(let f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(Vv,md);function Lv(){gd.call(this),this.status=1}S(Lv,gd);function $r(a){this.g=a}S($r,Fv),$r.prototype.ua=function(){Ct(this.g,"a")},$r.prototype.ta=function(a){Ct(this.g,new Vv(a))},$r.prototype.sa=function(a){Ct(this.g,new Lv)},$r.prototype.ra=function(){Ct(this.g,"b")},Uc.prototype.createWebChannel=Uc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,mm=Jn.createWebChannelTransport=function(){return new Uc},pm=Jn.getStatEventTarget=function(){return Sc()},fm=Jn.Event=Ki,cu=Jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xc.NO_ERROR=0,xc.TIMEOUT=8,xc.HTTP_ERROR=6,Ia=Jn.ErrorCode=xc,ev.COMPLETE="complete",dm=Jn.EventType=ev,Yy.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",ft.prototype.listen=ft.prototype.K,vs=Jn.WebChannel=Yy,WM=Jn.FetchXmlHttpFactory=go,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,hm=Jn.XhrIo=Ue}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});var bI="@firebase/firestore";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var Ls="10.14.0";var Ir=new xn("@firebase/firestore");function Ea(){return Ir.logLevel}function W(n,...e){if(Ir.logLevel<=pe.DEBUG){let t=e.map(Xg);Ir.debug(`Firestore (${Ls}): ${n}`,...t)}}function ni(n,...e){if(Ir.logLevel<=pe.ERROR){let t=e.map(Xg);Ir.error(`Firestore (${Ls}): ${n}`,...t)}}function As(n,...e){if(Ir.logLevel<=pe.WARN){let t=e.map(Xg);Ir.warn(`Firestore (${Ls}): ${n}`,...t)}}function Xg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ue(n="Unexpected state"){let e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Be(n,e){n||ue()}function ye(n,e){return n}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ei=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var du=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},Im=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Em=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ei,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ei)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new du(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new rt(e)}},Tm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Cm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Tm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Am=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Be(this.o===void 0);let i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string"),this.R=t.token,new Am(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function KM(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var fu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=KM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function Ce(n,e){return n<e?-1:n>e?1:0}function Ss(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Jt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Jt(0,0))}static max(){return new n(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pu=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&ue(),i===void 0?i=e.length-t:i>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ye=class n extends pu{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},YM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class n extends pu{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return YM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ye(e.slice()))}};var xm=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};xm.UNKNOWN_ID=-1;function QM(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=le.fromTimestamp(i===1e9?new Jt(t+1,0):new Jt(t,i));return new Er(r,X.empty(),e)}function XM(n){return new Er(n.readTime,n.key,-1)}var Er=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(le.min(),X.empty(),-1)}static max(){return new n(le.max(),X.empty(),-1)}};function JM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var ZM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jg(n){return E(this,null,function*(){if(n.code!==U.FAILED_PRECONDITION||n.message!==ZM)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let u=l;t(e[u]).next(d=>{o[u]=d,++c,c===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function eN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function za(n){return n.name==="IndexedDbTransactionError"}var ZI=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Lu(n){return n==null}function mu(n){return n===0&&1/n==-1/0}var tN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bz=[...tN,"documentOverlays"],nN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iN=nN,rN=[...iN,"indexConfiguration","indexState","indexEntries"];var zz=[...rN,"globals"];function II(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uu(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Es(this.root,e,this.comparator,!1)}getReverseIterator(){return new Es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Es(this.root,e,this.comparator,!0)}},Es=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var It=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gu(this.data.getIterator())}getIteratorFrom(e){return new gu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vr=class n{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new n([])}unionWith(e){let t=new It(mn.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var _u=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _u("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var oN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(n){if(Be(!!n),typeof n=="string"){let e=0,t=oN.exec(n);if(Be(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(n.seconds),nanos:Le(n.nanos)}}function Le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}function Zg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function e_(n){let e=n.mapValue.fields.__previous_value__;return Zg(e)?e_(e):e}function Da(n){let e=ii(n.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}var Dm=class{constructor(e,t,i,r,s,o,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},yu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zg(n)?4:tE(n)?9007199254740991:eE(n)?10:11:ue()}function Vn(n,e){if(n===e)return!0;let t=Tr(n);if(t!==Tr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Da(n).isEqual(Da(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ii(r.timestampValue),c=ii(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Vi(r.bytesValue).isEqual(Vi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Le(r.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Le(r.integerValue)===Le(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Le(r.doubleValue),c=Le(s.doubleValue);return o===c?mu(o)===mu(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Ss(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(II(o)!==II(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Vn(o[l],c[l])))return!1;return!0}(n,e);default:return ue()}}function Pa(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function xs(n,e){if(n===e)return 0;let t=Tr(n),i=Tr(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return EI(n.timestampValue,e.timestampValue);case 4:return EI(Da(n),Da(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Vi(s),l=Vi(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){let d=Ce(c[u],l[u]);if(d!==0)return d}return Ce(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ce(Le(s.latitude),Le(o.latitude));return c!==0?c:Ce(Le(s.longitude),Le(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return TI(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,u,d;let p=s.fields||{},g=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,P=Ce(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=S?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:TI(v,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===lu.mapValue&&o===lu.mapValue)return 0;if(s===lu.mapValue)return 1;if(o===lu.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){let g=Ce(l[p],d[p]);if(g!==0)return g;let v=xs(c[l[p]],u[d[p]]);if(v!==0)return v}return Ce(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ue()}}function EI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=ii(n),i=ii(e),r=Ce(t.seconds,i.seconds);return r!==0?r:Ce(t.nanos,i.nanos)}function TI(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=xs(t[r],i[r]);if(s)return s}return Ce(t.length,i.length)}function Rs(n){return Pm(n)}function Pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ii(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return X.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Pm(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Pm(t.fields[o])}`;return r+"}"}(n.mapValue):ue()}function km(n){return!!n&&"integerValue"in n}function t_(n){return!!n&&"arrayValue"in n}function CI(n){return!!n&&"nullValue"in n}function AI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gm(n){return!!n&&"mapValue"in n}function eE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ca(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Uu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ca(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ca(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Zn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ca(t)}setAll(e){let t=mn.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Ca(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];gm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Uu(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ca(this.value))}};var gn=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Zn.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,le.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Zn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ds=class{constructor(e,t){this.position=e,this.inclusive=t}};function SI(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=X.comparator(X.fromName(o.referenceValue),t.key):i=xs(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function xI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var Ps=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function aN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vu=class{},Je=class n extends vu{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Mm(e,t,i):t==="array-contains"?new Vm(e,i):t==="in"?new Lm(e,i):t==="not-in"?new Um(e,i):t==="array-contains-any"?new jm(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Nm(e,i):new Fm(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xs(t,this.value)):t!==null&&Tr(this.value)===Tr(t)&&this.matchesComparison(xs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ln=class n extends vu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return nE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function nE(n){return n.op==="and"}function iE(n){return cN(n)&&nE(n)}function cN(n){for(let e of n.filters)if(e instanceof Ln)return!1;return!0}function Om(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+Rs(n.value);if(iE(n))return n.filters.map(e=>Om(e)).join(",");{let e=n.filters.map(t=>Om(t)).join(",");return`${n.op}(${e})`}}function rE(n,e){return n instanceof Je?function(i,r){return r instanceof Je&&i.op===r.op&&i.field.isEqual(r.field)&&Vn(i.value,r.value)}(n,e):n instanceof Ln?function(i,r){return r instanceof Ln&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&rE(o,r.filters[c]),!0):!1}(n,e):void ue()}function sE(n){return n instanceof Je?function(t){return`${t.field.canonicalString()} ${t.op} ${Rs(t.value)}`}(n):n instanceof Ln?function(t){return t.op.toString()+" {"+t.getFilters().map(sE).join(" ,")+"}"}(n):"Filter"}var Mm=class extends Je{constructor(e,t,i){super(e,t,i),this.key=X.fromName(i.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},Nm=class extends Je{constructor(e,t){super(e,"in",t),this.keys=oE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Fm=class extends Je{constructor(e,t){super(e,"not-in",t),this.keys=oE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function oE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>X.fromName(i.referenceValue))}var Vm=class extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return t_(t)&&Pa(t.arrayValue,this.value)}},Lm=class extends Je{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Pa(this.value.arrayValue,t)}},Um=class extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Pa(this.value.arrayValue,t)}},jm=class extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!t_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Pa(this.value.arrayValue,i))}};var Bm=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function RI(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Bm(n,e,t,i,r,s,o)}function n_(n){let e=ye(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Om(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Rs(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Rs(i)).join(",")),e.ue=t}return e.ue}function i_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xI(n.startAt,e.startAt)&&xI(n.endAt,e.endAt)}function zm(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ks=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function lN(n,e,t,i,r,s,o,c){return new ks(n,e,t,i,r,s,o,c)}function r_(n){return new ks(n)}function DI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uN(n){return n.collectionGroup!==null}function Aa(n){let e=ye(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new It(mn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ps(s,i))}),t.has(mn.keyField().canonicalString())||e.ce.push(new Ps(mn.keyField(),i))}return e.ce}function Fn(n){let e=ye(n);return e.le||(e.le=hN(e,Aa(n))),e.le}function hN(n,e){if(n.limitType==="F")return RI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Ps(r.field,s)});let t=n.endAt?new Ds(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ds(n.startAt.position,n.startAt.inclusive):null;return RI(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function $m(n,e,t){return new ks(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ju(n,e){return i_(Fn(n),Fn(e))&&n.limitType===e.limitType}function aE(n){return`${n_(Fn(n))}|lt:${n.limitType}`}function ws(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>sE(r)).join(", ")}]`),Lu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Rs(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Rs(r)).join(",")),`Target(${i})`}(Fn(n))}; limitType=${n.limitType})`}function Bu(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Aa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let u=SI(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,Aa(i),r)||i.endAt&&!function(o,c,l){let u=SI(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,Aa(i),r))}(n,e)}function dN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cE(n){return(e,t)=>{let i=!1;for(let r of Aa(n)){let s=fN(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function fN(n,e,t){let i=n.field.isKeyField()?X.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),u=c.data.field(s);return l!==null&&u!==null?xs(l,u):ue()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}var Li=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Uu(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return sN(this.inner)}size(){return this.innerSize}};var pN=new $e(X.comparator);function Ui(){return pN}var lE=new $e(X.comparator);function Ta(...n){let e=lE;for(let t of n)e=e.insert(t.key,t);return e}function mN(n){let e=lE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function wr(){return Sa()}function uE(){return Sa()}function Sa(){return new Li(n=>n.toString(),(n,e)=>n.isEqual(e))}var qz=new $e(X.comparator),gN=new It(X.comparator);function we(...n){let e=gN;for(let t of n)e=e.add(t);return e}var _N=new It(Ce);function yN(){return _N}function vN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function wN(n){return{integerValue:""+n}}var Os=class{constructor(){this._=void 0}};function bN(n,e,t){return n instanceof ka?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Zg(s)&&(s=e_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ms?hE(n,e):n instanceof Ns?dE(n,e):function(r,s){let o=EN(r,s),c=PI(o)+PI(r.Pe);return km(o)&&km(r.Pe)?wN(c):vN(r.serializer,c)}(n,e)}function IN(n,e,t){return n instanceof Ms?hE(n,e):n instanceof Ns?dE(n,e):t}function EN(n,e){return n instanceof Oa?function(i){return km(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var ka=class extends Os{},Ms=class extends Os{constructor(e){super(),this.elements=e}};function hE(n,e){let t=fE(e);for(let i of n.elements)t.some(r=>Vn(r,i))||t.push(i);return{arrayValue:{values:t}}}var Ns=class extends Os{constructor(e){super(),this.elements=e}};function dE(n,e){let t=fE(e);for(let i of n.elements)t=t.filter(r=>!Vn(r,i));return{arrayValue:{values:t}}}var Oa=class extends Os{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function PI(n){return Le(n.integerValue||n.doubleValue)}function fE(n){return t_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function TN(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Ms&&r instanceof Ms||i instanceof Ns&&r instanceof Ns?Ss(i.elements,r.elements,Vn):i instanceof Oa&&r instanceof Oa?Vn(i.Pe,r.Pe):i instanceof ka&&r instanceof ka}(n.transform,e.transform)}var xa=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ma=class{};function pE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qm(n.key,xa.none()):new Na(n.key,n.data,xa.none());{let t=n.data,i=Zn.empty(),r=new It(mn.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Fs(n.key,i,new vr(r.toArray()),xa.none())}}function CN(n,e,t){n instanceof Na?function(r,s,o){let c=r.value.clone(),l=OI(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Fs?function(r,s,o){if(!hu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=OI(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(mE(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ra(n,e,t,i){return n instanceof Na?function(s,o,c,l){if(!hu(s.precondition,o))return c;let u=s.value.clone(),d=MI(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof Fs?function(s,o,c,l){if(!hu(s.precondition,o))return c;let u=MI(s.fieldTransforms,l,o),d=o.data;return d.setAll(mE(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(s,o,c){return hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function kI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ss(i,r,(s,o)=>TN(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Na=class extends Ma{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Fs=class extends Ma{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function OI(n,e,t){let i=new Map;Be(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,IN(o,c,t[r]))}return i}function MI(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,bN(s,o,e))}return i}var qm=class extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Gm=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&CN(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ra(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Ra(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=uE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=pE(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(t,i)=>kI(t,i))&&Ss(this.baseMutations,e.baseMutations,(t,i)=>kI(t,i))}};var Hm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Wm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,_e;function gE(n){if(n===void 0)return ni("GRPC error has no .code"),U.UNKNOWN;switch(n){case We.OK:return U.OK;case We.CANCELLED:return U.CANCELLED;case We.UNKNOWN:return U.UNKNOWN;case We.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case We.INTERNAL:return U.INTERNAL;case We.UNAVAILABLE:return U.UNAVAILABLE;case We.UNAUTHENTICATED:return U.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case We.NOT_FOUND:return U.NOT_FOUND;case We.ALREADY_EXISTS:return U.ALREADY_EXISTS;case We.PERMISSION_DENIED:return U.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case We.ABORTED:return U.ABORTED;case We.OUT_OF_RANGE:return U.OUT_OF_RANGE;case We.UNIMPLEMENTED:return U.UNIMPLEMENTED;case We.DATA_LOSS:return U.DATA_LOSS;default:return ue()}}(_e=We||(We={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var NI=null;function AN(){return new TextEncoder}var SN=new Fi([4294967295,4294967295],0);function FI(n){let e=AN().encode(n),t=new um;return t.update(e),new Uint8Array(t.digest())}function VI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([t,i],0),new Fi([r,s],0)]}var Km=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new br(`Invalid padding: ${t}`);if(i<0)throw new br(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new br(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new br(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fi.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Fi.fromNumber(i)));return r.compare(SN)===1&&(r=new Fi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=FI(e),[i,r]=VI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=FI(e),[i,r]=VI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},br=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wu=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(le.min(),r,new $e(Ce),Ui(),we())}},Fa=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,we(),we(),we())}};var Ts=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},bu=class{constructor(e,t){this.targetId=e,this.me=t}},Iu=class{constructor(e,t,i=Et.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Eu=class{constructor(){this.fe=0,this.ge=UI(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),t=we(),i=we();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new Fa(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=UI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ym=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ui(),this.qe=LI(),this.Qe=new $e(Ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(zm(s))if(i===0){let o=new X(s.path);this.Ue(t,o,gn.newNoDocument(o,le.min()))}else Be(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}NI?.et(function(d,p,g,v,S){var P,k,M,B,H,Q;let be={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ae=p.unchangedNames;return ae&&(be.bloomFilter={applied:S===0,hashCount:(P=ae?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(B=(M=(k=ae?.bits)===null||k===void 0?void 0:k.bitmap)===null||M===void 0?void 0:M.length)!==null&&B!==void 0?B:0,padding:(Q=(H=ae?.bits)===null||H===void 0?void 0:H.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var _;return(_=v?.mightContain(I))!==null&&_!==void 0&&_}}),be}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Vi(i).toUint8Array()}catch(l){if(l instanceof _u)return As("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Km(o,r,s)}catch(l){return As(l instanceof br?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&zm(c.target)){let l=new X(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,gn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=we();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new wu(e,t,this.Qe,this.ke,i);return this.ke=Ui(),this.qe=LI(),this.Qe=new $e(Ce),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Eu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new It(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Eu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function LI(){return new $e(X.comparator)}function UI(){return new $e(X.comparator)}var xN={asc:"ASCENDING",desc:"DESCENDING"},RN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DN={and:"AND",or:"OR"},Qm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Xm(n,e){return n.useProto3Json||Lu(e)?e:{value:e}}function PN(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Cs(n){return Be(!!n),le.fromTimestamp(function(t){let i=ii(t);return new Jt(i.seconds,i.nanos)}(n))}function ON(n,e){return Jm(n,e).canonicalString()}function Jm(n,e){let t=function(r){return new Ye(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function _E(n){let e=Ye.fromString(n);return Be(IE(e)),e}function _m(n,e){let t=_E(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(vE(t))}function yE(n,e){return ON(n.databaseId,e)}function MN(n){let e=_E(n);return e.length===4?Ye.emptyPath():vE(e)}function jI(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vE(n){return Be(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function NN(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Be(d===void 0||typeof d=="string"),Et.fromBase64String(d||"")):(Be(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Et.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(u){let d=u.code===void 0?U.UNKNOWN:gE(u.code);return new Y(d,u.message||"")}(o);t=new Iu(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=_m(n,i.document.name),s=Cs(i.document.updateTime),o=i.document.createTime?Cs(i.document.createTime):le.min(),c=new Zn({mapValue:{fields:i.document.fields}}),l=gn.newFoundDocument(r,s,o,c),u=i.targetIds||[],d=i.removedTargetIds||[];t=new Ts(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=_m(n,i.document),s=i.readTime?Cs(i.readTime):le.min(),o=gn.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Ts([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=_m(n,i.document),s=i.removedTargetIds||[];t=new Ts([],s,r,null)}else{if(!("filter"in e))return ue();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Wm(r,s),c=i.targetId;t=new bu(c,o)}}return t}function FN(n,e){return{documents:[yE(n,e.path)]}}function VN(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yE(n,r);let s=function(u){if(u.length!==0)return bE(Ln.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:bs(g.field),direction:jN(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=Xm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:r}}function LN(n){let e=MN(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Be(i===1);let d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(p){let g=wE(p);return g instanceof Ln&&iE(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(S){return new Ps(Is(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(t.orderBy));let c=null;t.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Lu(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){let g=!!p.before,v=p.values||[];return new Ds(v,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let g=!p.before,v=p.values||[];return new Ds(v,g)}(t.endAt)),lN(e,r,o,s,c,"F",l,u)}function UN(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Is(t.unaryFilter.field);return Je.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Is(t.unaryFilter.field);return Je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Is(t.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Is(t.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(t){return Je.create(Is(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ln.create(t.compositeFilter.filters.map(i=>wE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(t.compositeFilter.op))}(n):ue()}function jN(n){return xN[n]}function BN(n){return RN[n]}function zN(n){return DN[n]}function bs(n){return{fieldPath:n.canonicalString()}}function Is(n){return mn.fromServerFormat(n.fieldPath)}function bE(n){return n instanceof Je?function(t){if(t.op==="=="){if(AI(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NAN"}};if(CI(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AI(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NOT_NAN"}};if(CI(t.value))return{unaryFilter:{field:bs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(t.field),op:BN(t.op),value:t.value}}}(n):n instanceof Ln?function(t){let i=t.getFilters().map(r=>bE(r));return i.length===1?i[0]:{compositeFilter:{op:zN(t.op),filters:i}}}(n):ue()}function IE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Va=class n{constructor(e,t,i,r,s=le.min(),o=le.min(),c=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zm=class{constructor(e){this.ct=e}};function $N(n){let e=LN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$m(e,e.limit,"L"):e}var Tu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Le(e.integerValue));else if("doubleValue"in e){let i=Le(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),mu(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=ii(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?tE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):eE(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ue()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Le(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),X.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Tu.vt=new Tu;var eg=class{constructor(){this.un=new tg}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Er.min())}updateCollectionGroup(e,t,i){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},tg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new It(Ye.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new It(Ye.comparator)).toArray()}};var Gz=new Uint8Array(0);var Mn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(41943040,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);var La=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var ng=class{constructor(){this.changes=new Li(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?V.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ig=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var rg=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Ra(i.mutation,r,vr.empty(),Jt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,we()).next(()=>i))}getLocalViewOfDocuments(e,t,i=we()){let r=wr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ta();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=wr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,we()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=Ui(),o=Sa(),c=function(){return Sa()}();return t.forEach((l,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Fs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ra(d.mutation,u,d.mutation.getFieldMask(),Jt.now())):o.set(u.key,vr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var p;return c.set(u,new ig(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Sa(),r=new $e((o,c)=>o-c),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let d=i.get(l)||vr.empty();d=c.applyToLocalView(u,d),i.set(l,d);let p=(r.get(c.batchId)||we()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,d=l.value,p=uE();d.forEach(g=>{if(!s.has(g)){let v=pE(t.get(g),i.get(g));v!==null&&p.set(g,v),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return V.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):V.resolve(wr()),c=-1,l=s;return o.next(u=>V.forEach(u,(d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,we())).next(d=>({batchId:c,changes:mN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(i=>{let r=Ta();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Ta();return this.indexManager.getCollectionParents(e,s).next(c=>V.forEach(c,l=>{let u=function(p,g){return new ks(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,gn.newInvalidDocument(d)))});let c=Ta();return o.forEach((l,u)=>{let d=s.get(l);d!==void 0&&Ra(d.mutation,u,vr.empty(),Jt.now()),Bu(t,u)&&(c=c.insert(l,u))}),c})}};var sg=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Cs(r.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:$N(r.bundledQuery),readTime:Cs(r.readTime)}}(t)),V.resolve()}};var og=class{constructor(){this.overlays=new $e(X.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let i=wr();return V.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),V.resolve()}getOverlaysForCollection(e,t,i){let r=wr(),s=t.length+1,o=new X(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return V.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new $e((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let d=s.get(u.largestBatchId);d===null&&(d=wr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let c=wr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>c.set(u,d)),!(c.size()>=r)););return V.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Hm(t,i));let s=this.Ir.get(t);s===void 0&&(s=we(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var ag=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Ua=class{constructor(){this.Tr=new It(Ke.Er),this.dr=new It(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Ke(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Ke(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new X(new Ye([])),i=new Ke(t,e),r=new Ke(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new X(new Ye([])),i=new Ke(t,e),r=new Ke(t,e+1),s=we();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ke(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Ke=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return X.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||X.comparator(e.key,t.key)}};var cg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new It(Ke.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Gm(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Ke(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Ke(t,0),r=new Ke(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(Ce);return t.forEach(r=>{let s=new Ke(r,0),o=new Ke(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),V.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;X.isDocumentKey(s)||(s=s.child(""));let o=new Ke(new X(s),0),c=new It(Ce);return this.br.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.wr)),!0)},o),V.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Be(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return V.forEach(t.mutations,r=>{let s=new Ke(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Ke(t,0),r=this.br.firstAfterOrEqual(i);return V.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lg=class{constructor(e){this.Mr=e,this.docs=function(){return new $e(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return V.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let i=Ui();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():gn.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Ui(),o=t.path,c=new X(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||JM(XM(d),i)<=0||(r.has(d.key)||Bu(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ue()}Or(e,t){return V.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new ug(this)}getSize(e){return V.resolve(this.size)}},ug=class extends ng{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var hg=class{constructor(e){this.persistence=e,this.Nr=new Li(t=>n_(t),i_),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ua,this.targetCount=0,this.kr=La.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new La(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),V.waitFor(s).next(()=>r)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return V.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),V.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return V.resolve(i)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var dg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ZI(0),this.Kr=!1,this.Kr=!0,this.$r=new ag,this.referenceDelegate=e(this),this.Ur=new hg(this),this.indexManager=new eg,this.remoteDocumentCache=function(r){return new lg(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Zm(t),this.Gr=new sg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new og,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new cg(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);let r=new fg(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return V.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},fg=class extends Rm{constructor(e){super(),this.currentSequenceNumber=e}},pg=class n{constructor(e){this.persistence=e,this.Jr=new Ua,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),V.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,i=>{let r=X.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var mg=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=we(),r=we();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var gg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _g=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sb()?8:eN(it())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gg;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(Ea()<=pe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Ea()<=pe.DEBUG&&W("QueryEngine","Query:",ws(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ea()<=pe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):V.resolve())}Yi(e,t){if(DI(t))return V.resolve(null);let i=Fn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=$m(t,null,"F"),i=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=we(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.ts(t,c);return this.ns(t,u,o,l.readTime)?this.Yi(e,$m(t,null,"F")):this.rs(e,u,t,l)}))})))}Zi(e,t,i,r){return DI(t)||r.isEqual(le.min())?V.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?V.resolve(null):(Ea()<=pe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ws(t)),this.rs(e,o,t,QM(r,-1)).next(c=>c))})}ts(e,t){let i=new It(cE(e));return t.forEach((r,s)=>{Bu(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return Ea()<=pe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,Er.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yg=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new $e(Ce),this._s=new Li(s=>n_(s),i_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qN(n,e,t,i){return new yg(n,e,t,i)}function EE(n,e){return E(this,null,function*(){let t=ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=we();for(let u of r){o.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}for(let u of s){c.push(u.batchId);for(let d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:c}))})})})}function TE(n){let e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function GN(n,e){let t=ye(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((d,p)=>{let g=r.get(p);if(!g)return;c.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,p)));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Et.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),r=r.insert(p,v),function(P,k,M){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(g,v,d)&&c.push(t.Ur.updateTargetData(s,v))});let l=Ui(),u=we();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(HN(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(le.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(d)}return V.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.os=r,s))}function HN(n,e,t){let i=we(),r=we();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Ui();return t.forEach((c,l)=>{let u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function WN(n,e){let t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,V.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Va(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function vg(n,e,t){return E(this,null,function*(){let i=ye(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!za(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function BI(n,e,t){let i=ye(n),r=le.min(),s=we();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){let p=ye(l),g=p._s.get(d);return g!==void 0?V.resolve(p.os.get(g)):p.Ur.getTargetData(u,d)}(i,o,Fn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:le.min(),t?s:we())).next(c=>(KN(i,dN(e),c),{documents:c,Ts:s})))}function KN(n,e,t){let i=n.us.get(e)||le.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var Cu=class{constructor(){this.activeTargetIds=yN()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wg=class{constructor(){this.so=new Cu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cu,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bg=class{_o(e){}shutdown(){}};var Au=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var uu=null;function ym(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}var YN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ig=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var bt="WebChannelConnection",Eg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=ym(),l=this.xo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,l,u,r).then(d=>(W("RestConnection",`Received RPC '${t}' ${c}: `,d),d),d=>{throw As("RestConnection",`RPC '${t}' ${c} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=YN[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=ym();return new Promise((o,c)=>{let l=new hm;l.setWithCredentials(!0),l.listenOnce(dm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ia.NO_ERROR:let d=l.getResponseJson();W(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ia.TIMEOUT:W(bt,`RPC '${e}' ${s} timed out`),c(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:let p=l.getStatus();if(W(bt,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);let v=g?.error;if(v&&v.status&&v.message){let S=function(k){let M=k.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(M)>=0?M:U.UNKNOWN}(v.status);c(new Y(S,v.message))}else c(new Y(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{W(bt,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);W(bt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",u,i,15)})}Bo(e,t,i){let r=ym(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mm(),c=pm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let d=s.join("");W(bt,`Creating RPC '${e}' stream ${r}: ${d}`,l);let p=o.createWebChannel(d,l),g=!1,v=!1,S=new Ig({Io:k=>{v?W(bt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(g||(W(bt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),W(bt,`RPC '${e}' stream ${r} sending:`,k),p.send(k))},To:()=>p.close()}),P=(k,M,B)=>{k.listen(M,H=>{try{B(H)}catch(Q){setTimeout(()=>{throw Q},0)}})};return P(p,vs.EventType.OPEN,()=>{v||(W(bt,`RPC '${e}' stream ${r} transport opened.`),S.yo())}),P(p,vs.EventType.CLOSE,()=>{v||(v=!0,W(bt,`RPC '${e}' stream ${r} transport closed`),S.So())}),P(p,vs.EventType.ERROR,k=>{v||(v=!0,As(bt,`RPC '${e}' stream ${r} transport errored:`,k),S.So(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),P(p,vs.EventType.MESSAGE,k=>{var M;if(!v){let B=k.data[0];Be(!!B);let H=B,Q=H.error||((M=H[0])===null||M===void 0?void 0:M.error);if(Q){W(bt,`RPC '${e}' stream ${r} received error:`,Q);let be=Q.status,ae=function(y){let b=We[y];if(b!==void 0)return gE(b)}(be),I=Q.message;ae===void 0&&(ae=U.INTERNAL,I="Unknown error status: "+be+" with message "+Q.message),v=!0,S.So(new Y(ae,I)),p.close()}else W(bt,`RPC '${e}' stream ${r} received:`,B),S.bo(B)}}),P(c,fm.STAT_EVENT,k=>{k.stat===cu.PROXY?W(bt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===cu.NOPROXY&&W(bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function vm(){return typeof document<"u"?document:null}function CE(n){return new Qm(n,!0)}var Su=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Tg=class{constructor(e,t,i,r,s,o,c,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Su(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return E(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return E(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return E(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new Y(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>E(this,null,function*(){this.state=0,this.start()}))}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Cg=class extends Tg{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=NN(this.serializer,e),i=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Cs(o.readTime):le.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=jI(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=zm(l)?{documents:FN(s,l)}:{query:VN(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=kN(s,o.resumeToken);let u=Xm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=PN(s,o.snapshotVersion.toTimestamp());let u=Xm(s,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let i=UN(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=jI(this.serializer),t.removeTarget=e,this.a_(t)}};var Ag=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Jm(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(U.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Jm(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Sg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ni(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var xg=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>E(this,null,function*(){qa(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(l){return E(this,null,function*(){let u=ye(l);u.L_.add(4),yield $a(u),u.q_.set("Unknown"),u.L_.delete(4),yield zu(u)})}(this))}))}),this.q_=new Sg(i,r)}};function zu(n){return E(this,null,function*(){if(qa(n))for(let e of n.B_)yield e(!0)})}function $a(n){return E(this,null,function*(){for(let e of n.B_)yield e(!1)})}function AE(n,e){let t=ye(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),c_(t)?a_(t):Us(t).r_()&&o_(t,e))}function s_(n,e){let t=ye(n),i=Us(t);t.N_.delete(e),i.r_()&&SE(t,e),t.N_.size===0&&(i.r_()?i.o_():qa(t)&&t.q_.set("Unknown"))}function o_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Us(n).A_(e)}function SE(n,e){n.Q_.xe(e),Us(n).R_(e)}function a_(n){n.Q_=new Ym({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Us(n).start(),n.q_.v_()}function c_(n){return qa(n)&&!Us(n).n_()&&n.N_.size>0}function qa(n){return ye(n).L_.size===0}function xE(n){n.Q_=void 0}function QN(n){return E(this,null,function*(){n.q_.set("Online")})}function XN(n){return E(this,null,function*(){n.N_.forEach((e,t)=>{o_(n,e)})})}function JN(n,e){return E(this,null,function*(){xE(n),c_(n)?(n.q_.M_(e),a_(n)):n.q_.set("Unknown")})}function ZN(n,e,t){return E(this,null,function*(){if(n.q_.set("Online"),e instanceof Iu&&e.state===2&&e.cause)try{yield function(r,s){return E(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield zI(n,i)}else if(e instanceof Ts?n.Q_.Ke(e):e instanceof bu?n.Q_.He(e):n.Q_.We(e),!t.isEqual(le.min()))try{let i=yield TE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{let d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Et.EMPTY_BYTE_STRING,d.snapshotVersion)),SE(s,l);let p=new Va(d.target,l,u,d.sequenceNumber);o_(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield zI(n,i)}})}function zI(n,e,t){return E(this,null,function*(){if(!za(e))throw e;n.L_.add(1),yield $a(n),n.q_.set("Offline"),t||(t=()=>TE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zu(n)}))})}function $I(n,e){return E(this,null,function*(){let t=ye(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=qa(t);t.L_.add(3),yield $a(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zu(t)})}function e1(n,e){return E(this,null,function*(){let t=ye(n);e?(t.L_.delete(2),yield zu(t)):e||(t.L_.add(2),yield $a(t),t.q_.set("Unknown"))})}function Us(n){return n.K_||(n.K_=function(t,i,r){let s=ye(t);return s.w_(),new Cg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:QN.bind(null,n),Ro:XN.bind(null,n),mo:JN.bind(null,n),d_:ZN.bind(null,n)}),n.B_.push(e=>E(this,null,function*(){e?(n.K_.s_(),c_(n)?a_(n):n.q_.set("Unknown")):(yield n.K_.stop(),xE(n))}))),n.K_}var Rg=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function RE(n,e){if(ni("AsyncQueue",`${e}: ${n}`),za(n))return new Y(U.UNAVAILABLE,`${e}: ${n}`);throw n}var xu=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||X.comparator(t.key,i.key):(t,i)=>X.comparator(t.key,i.key),this.keyedMap=Ta(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ru=class{constructor(){this.W_=new $e(X.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Vs=class n{constructor(e,t,i,r,s,o,c,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,xu.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Dg=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Pg=class{constructor(){this.queries=qI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=ye(t),s=r.queries;r.queries=qI(),s.forEach((o,c)=>{for(let l of c.j_)l.onError(i)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}};function qI(){return new Li(n=>aE(n),ju)}function t1(n,e){return E(this,null,function*(){let t=ye(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new Dg,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=RE(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&l_(t)})}function n1(n,e){return E(this,null,function*(){let t=ye(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function i1(n,e){let t=ye(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&l_(t)}function r1(n,e,t){let i=ye(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function l_(n){n.Y_.forEach(e=>{e.next()})}var kg,GI;(GI=kg||(kg={})).ea="default",GI.Cache="cache";var Og=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Vs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kg.Cache}};var Du=class{constructor(e){this.key=e}},Pu=class{constructor(e){this.key=e}},Mg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=cE(e),this.Ra=new xu(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new Ru,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,p)=>{let g=r.get(d),v=Bu(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),k=!1;g&&v?g.data.isEqual(v.data)?S!==P&&(i.track({type:3,doc:v}),k=!0):this.ga(g,v)||(i.track({type:2,doc:v}),k=!0,(l&&this.Aa(v,l)>0||u&&this.Aa(v,u)<0)&&(c=!0)):!g&&v?(i.track({type:0,doc:v}),k=!0):g&&!v&&(i.track({type:1,doc:g}),k=!0,(l||u)&&(c=!0)),k&&(v?(o=o.add(v),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,p)=>function(v,S){let P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return P(v)-P(S)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Vs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ru,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=we(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Pu(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Du(i))}),t}ba(e){this.Ta=e.Ts,this.da=we();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Vs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ng=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Fg=class{constructor(e){this.key=e,this.va=!1}},Vg=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Li(c=>aE(c),ju),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(X.comparator),this.Na=new Map,this.La=new Ua,this.Ba={},this.ka=new Map,this.qa=La.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function s1(n,e,t=!0){return E(this,null,function*(){let i=ME(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield DE(i,e,t,!0),r})}function o1(n,e){return E(this,null,function*(){let t=ME(n);yield DE(t,e,!0,!1)})}function DE(n,e,t,i){return E(this,null,function*(){let r=yield WN(n.localStore,Fn(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield a1(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&AE(n.remoteStore,r),c})}function a1(n,e,t,i,r){return E(this,null,function*(){n.Ka=(p,g,v)=>function(P,k,M,B){return E(this,null,function*(){let H=k.view.ma(M);H.ns&&(H=yield BI(P.localStore,k.query,!1).then(({documents:I})=>k.view.ma(I,H)));let Q=B&&B.targetChanges.get(k.targetId),be=B&&B.targetMismatches.get(k.targetId)!=null,ae=k.view.applyChanges(H,P.isPrimaryClient,Q,be);return WI(P,k.targetId,ae.wa),ae.snapshot})}(n,p,g,v);let s=yield BI(n.localStore,e,!0),o=new Mg(e,s.Ts),c=o.ma(s.documents),l=Fa.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),u=o.applyChanges(c,n.isPrimaryClient,l);WI(n,t,u.wa);let d=new Ng(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function c1(n,e,t){return E(this,null,function*(){let i=ye(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ju(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&s_(i.remoteStore,r.targetId),Lg(i,r.targetId)}).catch(Jg))):(Lg(i,r.targetId),yield vg(i.localStore,r.targetId,!0))})}function l1(n,e){return E(this,null,function*(){let t=ye(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),s_(t.remoteStore,i.targetId))})}function PE(n,e){return E(this,null,function*(){let t=ye(n);try{let i=yield GN(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(Be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Be(o.va):r.removedDocuments.size>0&&(Be(o.va),o.va=!1))}),yield OE(t,i,e)}catch(i){yield Jg(i)}})}function HI(n,e,t){let i=ye(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=ye(o);l.onlineState=c;let u=!1;l.queries.forEach((d,p)=>{for(let g of p.j_)g.Z_(c)&&(u=!0)}),u&&l_(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function u1(n,e,t){return E(this,null,function*(){let i=ye(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new $e(X.comparator);o=o.insert(s,gn.newNoDocument(s,le.min()));let c=we().add(s),l=new wu(le.min(),new Map,new $e(Ce),o,c);yield PE(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),u_(i)}else yield vg(i.localStore,e,!1).then(()=>Lg(i,e,t)).catch(Jg)})}function Lg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||kE(n,i)})}function kE(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(s_(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),u_(n))}function WI(n,e,t){for(let i of t)i instanceof Du?(n.La.addReference(i.key,e),h1(n,i)):i instanceof Pu?(W("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||kE(n,i.key)):ue()}function h1(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(i),u_(n))}function u_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new X(Ye.fromString(e)),i=n.qa.next();n.Na.set(i,new Fg(t)),n.Oa=n.Oa.insert(t,i),AE(n.remoteStore,new Va(Fn(r_(t.path)),i,"TargetPurposeLimboResolution",ZI.oe))}}function OE(n,e,t){return E(this,null,function*(){let i=ye(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,l)=>{o.push(i.Ka(l,e,t).then(u=>{var d;if((u||t)&&i.isPrimaryClient){let p=u?!u.fromCache:(d=t?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);let p=mg.Wi(l.targetId,u);s.push(p)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(l,u){return E(this,null,function*(){let d=ye(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(u,g=>V.forEach(g.$i,v=>d.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>V.forEach(g.Ui,v=>d.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!za(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let v=d.os.get(g),S=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(g,P)}}})}(i.localStore,s))})}function d1(n,e){return E(this,null,function*(){let t=ye(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield EE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new Y(U.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield OE(t,i.hs)}})}function f1(n,e){let t=ye(n),i=t.Na.get(e);if(i&&i.va)return we().add(i.key);{let r=we(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function ME(n){let e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u1.bind(null,e),e.Ca.d_=i1.bind(null,e.eventManager),e.Ca.$a=r1.bind(null,e.eventManager),e}var KI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=CE(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return qN(this.persistence,new _g,t.initialUser,this.serializer)}Ga(t){return new dg(pg.Zr,this.serializer)}Wa(t){return new wg}terminate(){return E(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var p1=(()=>{class n{initialize(t,i){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d1.bind(null,this.syncEngine),yield e1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Pg}()}createDatastore(t){let i=CE(t.databaseInfo.databaseId),r=function(o){return new Eg(o)}(t.databaseInfo);return function(o,c,l,u){return new Ag(o,c,l,u)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,c,l){return new xg(r,s,o,c,l)}(this.localStore,this.datastore,t.asyncQueue,i=>HI(this.syncEngine,i,0),function(){return Au.D()?new Au:new bg}())}createSyncEngine(t,i){return function(s,o,c,l,u,d,p){let g=new Vg(s,o,c,l,u,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return E(this,null,function*(){var t,i;yield function(s){return E(this,null,function*(){let o=ye(s);W("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield $a(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Ug=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var jg=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=rt.UNAUTHENTICATED,this.clientId=fu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>E(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=RE(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function wm(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>E(this,null,function*(){i.isEqual(r)||(yield EE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function YI(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield m1(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>$I(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>$I(e.remoteStore,r)),n._onlineComponents=e})}function m1(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;As("Error using user provided cache. Falling back to memory cache: "+t),yield wm(n,new KI)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield wm(n,new KI);return n._offlineComponents})}function g1(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield YI(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield YI(n,new p1))),n._onlineComponents})}function _1(n){return E(this,null,function*(){let e=yield g1(n),t=e.eventManager;return t.onListen=s1.bind(null,e.syncEngine),t.onUnlisten=c1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=o1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=l1.bind(null,e.syncEngine),t})}function y1(n,e,t={}){let i=new ei;return n.asyncQueue.enqueueAndForget(()=>E(this,null,function*(){return function(s,o,c,l,u){let d=new Ug({next:g=>{d.Za(),o.enqueueAndForget(()=>n1(s,p));let v=g.docs.has(c);!v&&g.fromCache?u.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&l&&l.source==="server"?u.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Og(r_(c.path),d,{includeMetadataChanges:!0,_a:!0});return t1(s,p)}(yield _1(n),n.asyncQueue,e,t,i)})),i.promise}function NE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QI=new Map;function v1(n,e,t){if(!t)throw new Y(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w1(n,e,t,i){if(e===!0&&i===!0)throw new Y(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XI(n){if(!X.isDocumentKey(n))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function b1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue()}function Bg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=b1(n);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ku=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ja=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ku({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ku(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bm;switch(i.type){case"firstParty":return new Cm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=QI.get(t);i&&(W("ComponentProvider","Removing Datastore"),QI.delete(t),i.terminate())}(this),Promise.resolve()}};function FE(n,e,t,i={}){var r;let s=(n=Bg(n,ja))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=rt.MOCK_USER;else{c=J0(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rt(u)}n._authCredentials=new Im(new du(c,l))}}var zg=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ti=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ba=class n extends zg{constructor(e,t,i){super(e,t,r_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function VE(n,e,...t){if(n=Wn(n),arguments.length===1&&(e=fu.newId()),v1("doc","path",e),n instanceof ja){let i=Ye.fromString(e,...t);return XI(i),new ti(n,null,new X(i))}{if(!(n instanceof ti||n instanceof Ba))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ye.fromString(e,...t));return XI(i),new ti(n.firestore,n instanceof Ba?n.converter:null,new X(i))}}var Ou=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Su(this,"async_queue_retry"),this.Vu=()=>{let i=vm();i&&W("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ei;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return E(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!za(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Rg.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ue()}verifyOperationInProgress(){}wu(){return E(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Mu=class extends ja{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Ou,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ou(e),this._firestoreClient=void 0,yield e}})}};function LE(n,e){let t=typeof n=="object"?n:dr(),i=typeof n=="string"?n:e||"(default)",r=hr(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=X0("firestore");s&&FE(r,...s)}return r}function I1(n){if(n._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||E1(n),n._firestoreClient}function E1(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,u,d){return new Dm(c,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NE(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new jg(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}var $g=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qg=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}};var Gg=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var T1=new RegExp("[~\\*/\\[\\]]");function C1(n,e,t){if(e.search(T1)>=0)throw JI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nu(...e.split("."))._internalPath}catch{throw JI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JI(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Y(U.INVALID_ARGUMENT,c+n+l)}var Fu=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(UE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Hg=class extends Fu{data(){return super.data()}};function UE(n,e){return typeof e=="string"?C1(n,e):e instanceof Nu?e._internalPath:e._delegate._internalPath}var Wg=class{convertValue(e,t="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Uu(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Le(o.doubleValue));return new Gg(s)}convertGeoPoint(e){return new qg(Le(e.latitude),Le(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=e_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){let t=ii(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ye.fromString(e);Be(IE(i));let r=new yu(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(t)||ni(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var Kg=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vu=class extends Fu{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(UE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Yg=class extends Vu{data(e={}){return super.data(e)}};function jE(n){n=Bg(n,ti);let e=Bg(n.firestore,Mu);return y1(I1(e),n._key).then(t=>A1(e,n,t))}var Qg=class extends Wg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $g(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,t)}};function A1(n,e,t){let i=t.docs.get(e._key),r=new Qg(n);return new Vu(n,r,e._key,i,new Kg(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ls=r})(pn),fn(new Nt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Mu(new Em(i.getProvider("auth-internal")),new Sm(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(u.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Fe(bI,"4.7.3",e),Fe(bI,"4.7.3","esm2017")})();var Cr=class{constructor(e){return e}},BE="firestore",h_=class{constructor(){return fa(BE)}};var d_=new $("angularfire2.firestore-instances");function S1(n,e){let t=zl(BE,n,e);return t&&new Cr(t)}function x1(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Cr(i)}}var R1={provide:h_,deps:[[new et,d_]]},D1={provide:Cr,useFactory:S1,deps:[[new et,d_],Yn]};function zE(n,...e){return Fe("angularfire",kn.full,"fst"),Wt([D1,R1,{provide:d_,useFactory:x1(n),multi:!0,deps:[ne,Ve,gs,pr,[new et,ba],[new et,ms],...e]}])}var $u=ki(VE,!0);var qu=ki(jE,!0);var $E=ki(LE,!0);var p_;try{p_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{p_=!1}var qe=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?ol(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||p_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(D(xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ga;function P1(){if(Ga==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ga=!0}))}finally{Ga=Ga||!1}return Ga}function js(n){return P1()?n:!!n.capture}var _n=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(_n||{}),Gu,Ar;function Hu(){if(Ar==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ar=!1,Ar;if("scrollBehavior"in document.documentElement.style)Ar=!0;else{let n=Element.prototype.scrollTo;n?Ar=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Ar=!1}}return Ar}function Bs(){if(typeof document!="object"||!document)return _n.NORMAL;if(Gu==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Gu=_n.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Gu=n.scrollLeft===0?_n.NEGATED:_n.INVERTED),n.remove()}return Gu}var f_;function k1(){if(f_==null){let n=typeof document<"u"?document.head:null;f_=!!(n&&(n.createShadowRoot||n.attachShadow))}return f_}function qE(n){if(k1()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ha(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function yn(n){return n.composedPath?n.composedPath()[0]:n.target}function Wa(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ji(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ri(n,e=0){return O1(n)?Number(n):arguments.length===2?e:0}function O1(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function zs(n){return Array.isArray(n)?n:[n]}function Ge(n){return n==null?"":typeof n=="string"?n:`${n}px`}function si(n){return n instanceof Te?n.nativeElement:n}var M1=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var GE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[M1]})}}return n})();var HE=new Set,Sr,N1=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):V1}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&F1(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(Ao,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F1(n,e){if(!HE.has(n))try{Sr||(Sr=document.createElement("style"),e&&Sr.setAttribute("nonce",e),Sr.setAttribute("type","text/css"),document.head.appendChild(Sr)),Sr.sheet&&(Sr.sheet.insertRule(`@media ${n} {body{ }}`,0),HE.add(n))}catch(t){console.error(t)}}function V1(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var KE=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new re}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return WE(zs(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=WE(zs(t)).map(o=>this._registerQuery(o).observable),s=Gr(r);return s=zc(s.pipe(ct(1)),s.pipe(qc(1),$c(0))),s.pipe(se(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new Lt(o=>{let c=l=>this._zone.run(()=>o.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Ht(i),se(({matches:o})=>({query:t,matches:o})),Tn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(D(N1),D(ne))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function WE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var nF=200,g_=class{constructor(e,t){this._letterKeyStream=new re,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new re,this.selectedItem=this._selectedItem;let i=typeof t?.debounceInterval=="number"?t.debounceInterval:nF;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(Oe(t=>this._pressedLetters.push(t)),$c(e),Ne(()=>this._pressedLetters.length>0),se(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},__=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=Pt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new re,this.change=new re,e instanceof To?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):qd(e)&&(this._effectRef=Iw(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new g_(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||ji(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),r=t[i];this._activeItem=r??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let r=(this._activeItemIndex+e*i+t.length)%t.length,s=t[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return qd(this._items)?this._items():this._items instanceof To?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}};var Yu=class extends __{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var Ya=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return rF(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=iF(dF(t));if(i&&(YE(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=YE(t);return t.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!uF(t)?!1:r==="audio"?t.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return hF(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||n)(D(qe))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iF(n){try{return n.frameElement}catch{return null}}function rF(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function sF(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function oF(n){return cF(n)&&n.type=="hidden"}function aF(n){return lF(n)&&n.hasAttribute("href")}function cF(n){return n.nodeName.toLowerCase()=="input"}function lF(n){return n.nodeName.toLowerCase()=="a"}function JE(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function YE(n){if(!JE(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function uF(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function hF(n){return oF(n)?!1:sF(n)||aF(n)||n.hasAttribute("contenteditable")||JE(n)}function dF(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var y_=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1,o){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Ci(e,{injector:this._injector}):setTimeout(e)}},Qu=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._injector=j(Ve),this._document=r}create(t,i=!1){return new y_(t,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(D(Ya),D(ne),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v_(n){return n.buttons===0||n.detail===0}function w_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var fF=new $("cdk-input-modality-detector-options"),pF={ignoreKeys:[18,17,224,91,16]},ZE=650,$s=js({passive:!0,capture:!0}),mF=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new gt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yn(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<ZE||(this._modality.next(v_(o)?"keyboard":"mouse"),this._mostRecentTarget=yn(o))},this._onTouchstart=o=>{if(w_(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yn(o)},this._options=N(N({},pF),s),this.modalityDetected=this._modality.pipe(qc(1)),this.modalityChanged=this.modalityDetected.pipe(Ld()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,$s),r.addEventListener("mousedown",this._onMousedown,$s),r.addEventListener("touchstart",this._onTouchstart,$s)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,$s),document.removeEventListener("mousedown",this._onMousedown,$s),document.removeEventListener("touchstart",this._onTouchstart,$s))}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(ne),D(J),D(fF,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ku=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Ku||{}),gF=new $("cdk-focus-monitor-default-options"),Wu=js({passive:!0,capture:!0}),qs=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new re,this._rootNodeFocusAndBlurListener=c=>{let l=yn(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=o?.detectionMode||Ku.IMMEDIATE}monitor(t,i=!1){let r=si(t);if(!this._platform.isBrowser||r.nodeType!==1)return G();let s=qE(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let c={checkChildren:i,subject:new re,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let i=si(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let s=si(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,i,l)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Ku.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Ku.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?ZE:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),s=yn(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wu)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Tn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(D(ne),D(qe),D(mF),D(J,8),D(gF,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xr=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(xr||{}),QE="cdk-high-contrast-black-on-white",XE="cdk-high-contrast-white-on-black",m_="cdk-high-contrast-active",b_=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=j(KE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return xr.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return xr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return xr.BLACK_ON_WHITE}return xr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(m_,QE,XE),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===xr.BLACK_ON_WHITE?t.add(m_,QE):i===xr.WHITE_ON_BLACK&&t.add(m_,XE)}}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eT=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||n)(D(b_))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[GE]})}}return n})();var _F=new $("cdk-dir-doc",{providedIn:"root",factory:yF});function yF(){return j(J)}var vF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function wF(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?vF.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var oi=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new ke,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=wF(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(D(_F,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();function bF(){return!0}var IF=new $("mat-sanity-checks",{providedIn:"root",factory:bF}),Tt=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Wa()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(D(b_),D(IF,8),D(J))}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Bi,Bi]})}}return n})();var C_=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})(),Zt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Zt||{}),E_=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Zt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},tT=js({passive:!0,capture:!0}),T_=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=yn(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,tT)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,tT)))}},nT={enterDuration:225,exitDuration:150},EF=800,iT=js({passive:!0,capture:!0}),rT=["mousedown","touchstart"],sT=["mouseup","mouseleave","touchend","touchcancel"],oT=class n{static{this._eventManager=new T_}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=si(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},nT),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||TF(e,t,r),c=e-r.left,l=t-r.top,u=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${c-o}px`,d.style.top=`${l-o}px`,d.style.height=`${o*2}px`,d.style.width=`${o*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(d);let p=window.getComputedStyle(d),g=p.transitionProperty,v=p.transitionDuration,S=g==="none"||v==="0s"||v==="0s, 0s"||r.width===0&&r.height===0,P=new E_(this,d,i,S);d.style.transform="scale3d(1, 1, 1)",P.state=Zt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let k=null;return!S&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{k&&(k.fallbackTimer=null),clearTimeout(H),this._finishRippleTransition(P)},B=()=>this._destroyRipple(P),H=setTimeout(B,u+100);d.addEventListener("transitionend",M),d.addEventListener("transitioncancel",B),k={onTransitionEnd:M,onTransitionCancel:B,fallbackTimer:H}}),this._activeRipples.set(P,k),(S||!u)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Zt.FADING_OUT||e.state===Zt.HIDDEN)return;let t=e.element,i=N(N({},nT),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Zt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=si(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,rT.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{sT.forEach(t=>{this._triggerElement.addEventListener(t,this,iT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Zt.FADING_IN?this._startFadeOutTransition(e):e.state===Zt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Zt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Zt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=v_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+EF;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!w_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Zt.VISIBLE||e.config.terminateOnPointerUp&&e.state===Zt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(rT.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(sT.forEach(t=>e.removeEventListener(t,this,iT)),this._pointerUpEventsRegistered=!1))}};function TF(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var aT=["*"];var CF=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}",A_=class{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){let e=Math.max(...this.tracker);return e>1?this.rowCount+e-1:this.rowCount}update(e,t){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(e),this.tracker.fill(0,0,this.tracker.length),this.positions=t.map(i=>this._trackTile(i))}_trackTile(e){let t=this._findMatchingGap(e.colspan);return this._markTilePosition(t,e),this.columnIndex=t+e.colspan,new S_(this.rowIndex,t)}_findMatchingGap(e){e>this.tracker.length;let t=-1,i=-1;do{if(this.columnIndex+e>this.tracker.length){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t);continue}if(t=this.tracker.indexOf(0,this.columnIndex),t==-1){this._nextRow(),t=this.tracker.indexOf(0,this.columnIndex),i=this._findGapEndIndex(t);continue}i=this._findGapEndIndex(t),this.columnIndex=t+1}while(i-t<e||i==0);return Math.max(t,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let e=0;e<this.tracker.length;e++)this.tracker[e]=Math.max(0,this.tracker[e]-1)}_findGapEndIndex(e){for(let t=e+1;t<this.tracker.length;t++)if(this.tracker[t]!=0)return t;return this.tracker.length}_markTilePosition(e,t){for(let i=0;i<t.colspan;i++)this.tracker[e+i]=t.rowspan}},S_=class{constructor(e,t){this.row=e,this.col=t}},cT=new $("MAT_GRID_LIST"),P_=(()=>{class n{constructor(t,i){this._element=t,this._gridList=i,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(ri(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(ri(t))}_setStyle(t,i){this._element.nativeElement.style[t]=i}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(cT,8))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(i,r){i&2&&lt("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],standalone:!0,features:[tt],ngContentSelectors:aT,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(i,r){i&1&&(Kt(),oe(0,"div",0),ut(1),fe())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-app-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-app-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}}return n})();var AF=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,Qa=class{constructor(){this._rows=0,this._rowspan=0}init(e,t,i,r){this._gutterSize=lT(e),this._rows=t.rowCount,this._rowspan=t.rowspan,this._cols=i,this._direction=r}getBaseTileSize(e,t){return`(${e}% - (${this._gutterSize} * ${t}))`}getTilePosition(e,t){return t===0?"0":Rr(`(${e} + ${this._gutterSize}) * ${t}`)}getTileSize(e,t){return`(${e} * ${t}) + (${t-1} * ${this._gutterSize})`}setStyle(e,t,i){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(e,i,r,s),this.setRowStyles(e,t,r,s)}setColStyles(e,t,i,r){let s=this.getBaseTileSize(i,r),o=this._direction==="rtl"?"right":"left";e._setStyle(o,this.getTilePosition(s,t)),e._setStyle("width",Rr(this.getTileSize(s,e.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(e){return`${this._rowspan} * ${this.getTileSize(e,1)}`}getComputedHeight(){return null}},x_=class extends Qa{constructor(e){super(),this.fixedRowHeight=e}init(e,t,i,r){super.init(e,t,i,r),this.fixedRowHeight=lT(this.fixedRowHeight),AF.test(this.fixedRowHeight)}setRowStyles(e,t){e._setStyle("top",this.getTilePosition(this.fixedRowHeight,t)),e._setStyle("height",Rr(this.getTileSize(this.fixedRowHeight,e.rowspan)))}getComputedHeight(){return["height",Rr(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["height",null]),e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}},R_=class extends Qa{constructor(e){super(),this._parseRatio(e)}setRowStyles(e,t,i,r){let s=i/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(s,r),e._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,t)),e._setStyle("paddingTop",Rr(this.getTileSize(this.baseTileHeight,e.rowspan)))}getComputedHeight(){return["paddingBottom",Rr(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(e){e._setListStyle(["paddingBottom",null]),e._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(e){let t=e.split(":");t.length,this.rowHeightRatio=parseFloat(t[0])/parseFloat(t[1])}},D_=class extends Qa{setRowStyles(e,t){let i=100/this._rowspan,r=(this._rows-1)/this._rows,s=this.getBaseTileSize(i,r);e._setStyle("top",this.getTilePosition(s,t)),e._setStyle("height",Rr(this.getTileSize(s,e.rowspan)))}reset(e){e._tiles&&e._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}};function Rr(n){return`calc(${n})`}function lT(n){return n.match(/([A-Za-z%]+)$/)?n:`${n}px`}var SF="fit",uT=(()=>{class n{constructor(t,i){this._element=t,this._dir=i,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(ri(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${t??""}`}get rowHeight(){return this._rowHeight}set rowHeight(t){let i=`${t??""}`;i!==this._rowHeight&&(this._rowHeight=i,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),t===SF?this._tileStyler=new D_:t&&t.indexOf(":")>-1?this._tileStyler=new R_(t):this._tileStyler=new x_(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new A_);let t=this._tileCoordinator,i=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,i),this._tileStyler.init(this.gutterSize,t,this.cols,r),i.forEach((s,o)=>{let c=t.positions[o];this._tileStyler.setStyle(s,c.row,c.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(oi,8))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-grid-list"]],contentQueries:function(i,r,s){if(i&1&&Si(s,P_,5),i&2){let o;zt(o=$t())&&(r._tiles=o)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(i,r){i&2&&lt("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],standalone:!0,features:[ht([{provide:cT,useExisting:n}]),tt],ngContentSelectors:aT,decls:2,vars:0,template:function(i,r){i&1&&(Kt(),oe(0,"div"),ut(1),fe())},styles:[CF],encapsulation:2,changeDetection:0})}}return n})(),hT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[C_,Tt,C_,Tt]})}}return n})();var Ju=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var RF=0,k_=new $("CdkAccordion"),fT=(()=>{class n{constructor(){this._stateChanges=new re,this._openCloseAllActions=new re,this.id=`cdk-accordion-${RF++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",wt]},exportAs:["cdkAccordion"],standalone:!0,features:[ht([{provide:k_,useExisting:n}]),Rt,St]})}}return n})(),DF=0,pT=(()=>{class n{get expanded(){return this._expanded}set expanded(t){if(this._expanded!==t){if(this._expanded=t,this.expandedChange.emit(t),t){this.opened.emit();let i=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,i)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Pt.EMPTY,this.closed=new ke,this.opened=new ke,this.destroyed=new ke,this.expandedChange=new ke,this.id=`cdk-accordion-child-${DF++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static{this.\u0275fac=function(i){return new(i||n)(O(k_,12),O(Ot),O(Ju))}}static{this.\u0275dir=me({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",wt],disabled:[2,"disabled","disabled",wt]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[ht([{provide:k_,useValue:void 0}]),Rt]})}}return n})(),mT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var Xa=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Gs=class extends Xa{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},zi=class extends Xa{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},O_=class extends Xa{constructor(e){super(),this.element=e instanceof Te?e.nativeElement:e}},Hs=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Gs)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof zi)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof O_)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Zu=class extends Hs{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ve.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Dr=(()=>{class n extends Hs{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new ke,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(c,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(o,c)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||n)(O(Wc),O(Ti),O(J))}}static{this.\u0275dir=me({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Xe]})}}return n})();var ai=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var OF=["body"],MF=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],NF=["mat-expansion-panel-header","*","mat-action-row"];function FF(n,e){}var VF=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],LF=["mat-panel-title","mat-panel-description","*"];function UF(n,e){if(n&1&&(oe(0,"span",1),Gc(),oe(1,"svg",2),vt(2,"path",3),fe()()),n&2){let t=Ai();hn("@indicatorRotate",t._getExpandedState())}}var M_=new $("MAT_ACCORDION"),gT="225ms cubic-bezier(0.4,0.0,0.2,1)",yT={indicatorRotate:Jd("indicatorRotate",[Oo("collapsed, void",ko({transform:"rotate(0deg)"})),Oo("expanded",ko({transform:"rotate(180deg)"})),ef("expanded <=> collapsed, void => collapsed",Zd(gT))]),bodyExpansion:Jd("bodyExpansion",[Oo("collapsed, void",ko({height:"0px",visibility:"hidden"})),Oo("expanded",ko({height:"*",visibility:""})),ef("expanded <=> collapsed, void => collapsed",Zd(gT))])},vT=new $("MAT_EXPANSION_PANEL"),jF=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static{this.\u0275fac=function(i){return new(i||n)(O(nr),O(vT,8))}}static{this.\u0275dir=me({type:n,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return n})(),BF=0,wT=new $("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),N_=(()=>{class n extends pT{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,c,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new ke,this.afterCollapse=new ke,this._inputChanges=new re,this._headerId=`mat-expansion-panel-header-${BF++}`,this.accordion=t,this._document=o,this._animationsDisabled=c==="NoopAnimations",l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ht(null),Ne(()=>this.expanded&&!this._portal),ct(1)).subscribe(()=>{this._portal=new zi(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_animationStarted(t){!_T(t)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(t){_T(t)||(t.toState==="expanded"?this.afterExpand.emit():t.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(i){return new(i||n)(O(M_,12),O(Ot),O(Ju),O(Ti),O(J),O(un,8),O(wT,8))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(i&1&&Si(s,jF,5),i&2){let o;zt(o=$t())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(i&1&&Qr(OF,5),i&2){let s;zt(s=$t())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){i&2&&yt("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[ht([{provide:M_,useValue:void 0},{provide:vT,useExisting:n}]),Rt,Xe,St,tt],ngContentSelectors:NF,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(i&1){let s=zn();Kt(MF),ut(0),oe(1,"div",1,0),He("@bodyExpansion.start",function(c){return an(s),cn(r._animationStarted(c))})("@bodyExpansion.done",function(c){return an(s),cn(r._animationDone(c))}),oe(3,"div",2),ut(4,1),Cn(5,FF,0,0,"ng-template",3),fe(),ut(6,2),fe()}i&2&&(kt(),hn("@bodyExpansion",r._getExpandedState())("id",r.id),lt("aria-labelledby",r._headerId),kt(4),hn("cdkPortalOutlet",r._portal))},dependencies:[Dr],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[yT.bodyExpansion]},changeDetection:0})}}return n})();function _T(n){return n.fromState==="void"}var F_=(()=>{class n{constructor(t,i,r,s,o,c,l){this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=c,this._parentChangeSubscription=Pt.EMPTY,this.tabIndex=0;let u=t.accordion?t.accordion._stateChanges.pipe(Ne(d=>!!(d.hideToggle||d.togglePosition))):In;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Wr(t.opened,t.closed,u,t._inputChanges.pipe(Ne(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ne(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ji(t)||(t.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t);return}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(i){return new(i||n)(O(N_,1),O(Te),O(qs),O(Ot),O(wT,8),O(un,8),Eo("tabindex"))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){i&1&&He("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),i&2&&(lt("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Ro("height",r._getHeaderHeight()),yt("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before")("_mat-animation-noopable",r._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:bw(t)]},standalone:!0,features:[Rt,tt],ngContentSelectors:LF,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){i&1&&(Kt(VF),oe(0,"span",0),ut(1),ut(2,1),ut(3,2),fe(),Cn(4,UF,3,1,"span",1)),i&2&&(yt("mat-content-hide-toggle",!r._showToggle()),kt(4),Hd(r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[yT.indicatorRotate]},changeDetection:0})}}return n})();var bT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return n})(),IT=(()=>{class n extends fT{constructor(){super(...arguments),this._ownHeaders=new To,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(Ht(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new Yu(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=me({type:n,selectors:[["mat-accordion"]],contentQueries:function(i,r,s){if(i&1&&Si(s,F_,5),i&2){let o;zt(o=$t())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(i,r){i&2&&yt("mat-accordion-multi",r.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",wt],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[ht([{provide:M_,useExisting:n}]),Rt,Xe]})}}return n})(),ET=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,mT,ai]})}}return n})();var $F={value:()=>{}};function CT(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new eh(t)}function eh(n){this._=n}function qF(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}eh.prototype=CT.prototype={constructor:eh,on:function(n,e){var t=this._,i=qF(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=GF(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=TT(t[r],n.name,e);else if(e==null)for(r in t)t[r]=TT(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new eh(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function GF(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function TT(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=$F,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Ja=CT;var th="http://www.w3.org/1999/xhtml",V_={svg:"http://www.w3.org/2000/svg",xhtml:th,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ci(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),V_.hasOwnProperty(e)?{space:V_[e],local:n}:n}function HF(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===th&&e.documentElement.namespaceURI===th?e.createElement(n):e.createElementNS(t,n)}}function WF(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function nh(n){var e=ci(n);return(e.local?WF:HF)(e)}function KF(){}function Pr(n){return n==null?KF:function(){return this.querySelector(n)}}function AT(n){typeof n!="function"&&(n=Pr(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=new Array(o),l,u,d=0;d<o;++d)(l=s[d])&&(u=n.call(l,l.__data__,d,s))&&("__data__"in l&&(u.__data__=l.__data__),c[d]=u);return new ze(i,this._parents)}function L_(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function YF(){return[]}function Za(n){return n==null?YF:function(){return this.querySelectorAll(n)}}function QF(n){return function(){return L_(n.apply(this,arguments))}}function ST(n){typeof n=="function"?n=QF(n):n=Za(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],c=o.length,l,u=0;u<c;++u)(l=o[u])&&(i.push(n.call(l,l.__data__,u,o)),r.push(l));return new ze(i,r)}function ec(n){return function(){return this.matches(n)}}function ih(n){return function(e){return e.matches(n)}}var XF=Array.prototype.find;function JF(n){return function(){return XF.call(this.children,n)}}function ZF(){return this.firstElementChild}function xT(n){return this.select(n==null?ZF:JF(typeof n=="function"?n:ih(n)))}var eV=Array.prototype.filter;function tV(){return Array.from(this.children)}function nV(n){return function(){return eV.call(this.children,n)}}function RT(n){return this.selectAll(n==null?tV:nV(typeof n=="function"?n:ih(n)))}function DT(n){typeof n!="function"&&(n=ec(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&c.push(l);return new ze(i,this._parents)}function rh(n){return new Array(n.length)}function PT(){return new ze(this._enter||this._groups.map(rh),this._parents)}function tc(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}tc.prototype={constructor:tc,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function kT(n){return function(){return n}}function iV(n,e,t,i,r,s){for(var o=0,c,l=e.length,u=s.length;o<u;++o)(c=e[o])?(c.__data__=s[o],i[o]=c):t[o]=new tc(n,s[o]);for(;o<l;++o)(c=e[o])&&(r[o]=c)}function rV(n,e,t,i,r,s,o){var c,l,u=new Map,d=e.length,p=s.length,g=new Array(d),v;for(c=0;c<d;++c)(l=e[c])&&(g[c]=v=o.call(l,l.__data__,c,e)+"",u.has(v)?r[c]=l:u.set(v,l));for(c=0;c<p;++c)v=o.call(n,s[c],c,s)+"",(l=u.get(v))?(i[c]=l,l.__data__=s[c],u.delete(v)):t[c]=new tc(n,s[c]);for(c=0;c<d;++c)(l=e[c])&&u.get(g[c])===l&&(r[c]=l)}function sV(n){return n.__data__}function OT(n,e){if(!arguments.length)return Array.from(this,sV);var t=e?rV:iV,i=this._parents,r=this._groups;typeof n!="function"&&(n=kT(n));for(var s=r.length,o=new Array(s),c=new Array(s),l=new Array(s),u=0;u<s;++u){var d=i[u],p=r[u],g=p.length,v=oV(n.call(d,d&&d.__data__,u,i)),S=v.length,P=c[u]=new Array(S),k=o[u]=new Array(S),M=l[u]=new Array(g);t(d,p,P,k,M,v,e);for(var B=0,H=0,Q,be;B<S;++B)if(Q=P[B]){for(B>=H&&(H=B+1);!(be=k[H])&&++H<S;);Q._next=be||null}}return o=new ze(o,i),o._enter=c,o._exit=l,o}function oV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function MT(){return new ze(this._exit||this._groups.map(rh),this._parents)}function NT(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function FT(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),c=new Array(r),l=0;l<o;++l)for(var u=t[l],d=i[l],p=u.length,g=c[l]=new Array(p),v,S=0;S<p;++S)(v=u[S]||d[S])&&(g[S]=v);for(;l<r;++l)c[l]=t[l];return new ze(c,this._parents)}function VT(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function LT(n){n||(n=aV);function e(p,g){return p&&g?n(p.__data__,g.__data__):!p-!g}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],c=o.length,l=r[s]=new Array(c),u,d=0;d<c;++d)(u=o[d])&&(l[d]=u);l.sort(e)}return new ze(r,this._parents).order()}function aV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function UT(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function jT(){return Array.from(this)}function BT(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function zT(){let n=0;for(let e of this)++n;return n}function $T(){return!this.node()}function qT(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,c;s<o;++s)(c=r[s])&&n.call(c,c.__data__,s,r);return this}function cV(n){return function(){this.removeAttribute(n)}}function lV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function uV(n,e){return function(){this.setAttribute(n,e)}}function hV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function dV(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function fV(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function GT(n,e){var t=ci(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?lV:cV:typeof e=="function"?t.local?fV:dV:t.local?hV:uV)(t,e))}function sh(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function pV(n){return function(){this.style.removeProperty(n)}}function mV(n,e,t){return function(){this.style.setProperty(n,e,t)}}function gV(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function HT(n,e,t){return arguments.length>1?this.each((e==null?pV:typeof e=="function"?gV:mV)(n,e,t??"")):$i(this.node(),n)}function $i(n,e){return n.style.getPropertyValue(e)||sh(n).getComputedStyle(n,null).getPropertyValue(e)}function _V(n){return function(){delete this[n]}}function yV(n,e){return function(){this[n]=e}}function vV(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function WT(n,e){return arguments.length>1?this.each((e==null?_V:typeof e=="function"?vV:yV)(n,e)):this.node()[n]}function KT(n){return n.trim().split(/^|\s+/)}function U_(n){return n.classList||new YT(n)}function YT(n){this._node=n,this._names=KT(n.getAttribute("class")||"")}YT.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function QT(n,e){for(var t=U_(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function XT(n,e){for(var t=U_(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function wV(n){return function(){QT(this,n)}}function bV(n){return function(){XT(this,n)}}function IV(n,e){return function(){(e.apply(this,arguments)?QT:XT)(this,n)}}function JT(n,e){var t=KT(n+"");if(arguments.length<2){for(var i=U_(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?IV:e?wV:bV)(t,e))}function EV(){this.textContent=""}function TV(n){return function(){this.textContent=n}}function CV(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function ZT(n){return arguments.length?this.each(n==null?EV:(typeof n=="function"?CV:TV)(n)):this.node().textContent}function AV(){this.innerHTML=""}function SV(n){return function(){this.innerHTML=n}}function xV(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function eC(n){return arguments.length?this.each(n==null?AV:(typeof n=="function"?xV:SV)(n)):this.node().innerHTML}function RV(){this.nextSibling&&this.parentNode.appendChild(this)}function tC(){return this.each(RV)}function DV(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nC(){return this.each(DV)}function iC(n){var e=typeof n=="function"?n:nh(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function PV(){return null}function rC(n,e){var t=typeof n=="function"?n:nh(n),i=e==null?PV:typeof e=="function"?e:Pr(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function kV(){var n=this.parentNode;n&&n.removeChild(this)}function sC(){return this.each(kV)}function OV(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function MV(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function oC(n){return this.select(n?MV:OV)}function aC(n){return arguments.length?this.property("__data__",n):this.node().__data__}function NV(n){return function(e){n.call(this,e,this.__data__)}}function FV(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function VV(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function LV(n,e,t){return function(){var i=this.__on,r,s=NV(e);if(i){for(var o=0,c=i.length;o<c;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function cC(n,e,t){var i=FV(n+""),r,s=i.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var l=0,u=c.length,d;l<u;++l)for(r=0,d=c[l];r<s;++r)if((o=i[r]).type===d.type&&o.name===d.name)return d.value}return}for(c=e?LV:VV,r=0;r<s;++r)this.each(c(i[r],e,t));return this}function lC(n,e,t){var i=sh(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function UV(n,e){return function(){return lC(this,n,e)}}function jV(n,e){return function(){return lC(this,n,e.apply(this,arguments))}}function uC(n,e){return this.each((typeof e=="function"?jV:UV)(n,e))}function*hC(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var j_=[null];function ze(n,e){this._groups=n,this._parents=e}function dC(){return new ze([[document.documentElement]],j_)}function BV(){return this}ze.prototype=dC.prototype={constructor:ze,select:AT,selectAll:ST,selectChild:xT,selectChildren:RT,filter:DT,data:OT,enter:PT,exit:MT,join:NT,merge:FT,selection:BV,order:VT,sort:LT,call:UT,nodes:jT,node:BT,size:zT,empty:$T,each:qT,attr:GT,style:HT,property:WT,classed:JT,text:ZT,html:eC,raise:tC,lower:nC,append:iC,insert:rC,remove:sC,clone:oC,datum:aC,on:cC,dispatch:uC,[Symbol.iterator]:hC};var li=dC;function en(n){return typeof n=="string"?new ze([[document.querySelector(n)]],[document.documentElement]):new ze([[n]],j_)}function fC(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ui(n,e){if(n=fC(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}var oh={capture:!0,passive:!1};function ah(n){n.preventDefault(),n.stopImmediatePropagation()}function B_(n){var e=n.document.documentElement,t=en(n).on("dragstart.drag",ah,oh);"onselectstart"in e?t.on("selectstart.drag",ah,oh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function z_(n,e){var t=n.document.documentElement,i=en(n).on("dragstart.drag",null);e&&(i.on("click.drag",ah,oh),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function ch(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function $_(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function rc(){}var nc=.7,hh=1/nc,Ws="\\s*([+-]?\\d+)\\s*",ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zV=/^#([0-9a-f]{3,8})$/,$V=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),qV=new RegExp(`^rgb\\(${Un},${Un},${Un}\\)$`),GV=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${ic}\\)$`),HV=new RegExp(`^rgba\\(${Un},${Un},${Un},${ic}\\)$`),WV=new RegExp(`^hsl\\(${ic},${Un},${Un}\\)$`),KV=new RegExp(`^hsla\\(${ic},${Un},${Un},${ic}\\)$`),pC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ch(rc,qi,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:mC,formatHex:mC,formatHex8:YV,formatHsl:QV,formatRgb:gC,toString:gC});function mC(){return this.rgb().formatHex()}function YV(){return this.rgb().formatHex8()}function QV(){return IC(this).formatHsl()}function gC(){return this.rgb().formatRgb()}function qi(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=zV.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?_C(e):t===3?new Ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?lh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?lh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$V.exec(n))?new Ft(e[1],e[2],e[3],1):(e=qV.exec(n))?new Ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GV.exec(n))?lh(e[1],e[2],e[3],e[4]):(e=HV.exec(n))?lh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=WV.exec(n))?wC(e[1],e[2]/100,e[3]/100,1):(e=KV.exec(n))?wC(e[1],e[2]/100,e[3]/100,e[4]):pC.hasOwnProperty(n)?_C(pC[n]):n==="transparent"?new Ft(NaN,NaN,NaN,0):null}function _C(n){return new Ft(n>>16&255,n>>8&255,n&255,1)}function lh(n,e,t,i){return i<=0&&(n=e=t=NaN),new Ft(n,e,t,i)}function XV(n){return n instanceof rc||(n=qi(n)),n?(n=n.rgb(),new Ft(n.r,n.g,n.b,n.opacity)):new Ft}function Ks(n,e,t,i){return arguments.length===1?XV(n):new Ft(n,e,t,i??1)}function Ft(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}ch(Ft,Ks,$_(rc,{brighter(n){return n=n==null?hh:Math.pow(hh,n),new Ft(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?nc:Math.pow(nc,n),new Ft(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ft(Or(this.r),Or(this.g),Or(this.b),dh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yC,formatHex:yC,formatHex8:JV,formatRgb:vC,toString:vC}));function yC(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}`}function JV(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}${kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function vC(){let n=dh(this.opacity);return`${n===1?"rgb(":"rgba("}${Or(this.r)}, ${Or(this.g)}, ${Or(this.b)}${n===1?")":`, ${n})`}`}function dh(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Or(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function kr(n){return n=Or(n),(n<16?"0":"")+n.toString(16)}function wC(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new vn(n,e,t,i)}function IC(n){if(n instanceof vn)return new vn(n.h,n.s,n.l,n.opacity);if(n instanceof rc||(n=qi(n)),!n)return new vn;if(n instanceof vn)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,c=s-r,l=(s+r)/2;return c?(e===s?o=(t-i)/c+(t<i)*6:t===s?o=(i-e)/c+2:o=(e-t)/c+4,c/=l<.5?s+r:2-s-r,o*=60):c=l>0&&l<1?0:o,new vn(o,c,l,n.opacity)}function EC(n,e,t,i){return arguments.length===1?IC(n):new vn(n,e,t,i??1)}function vn(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}ch(vn,EC,$_(rc,{brighter(n){return n=n==null?hh:Math.pow(hh,n),new vn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?nc:Math.pow(nc,n),new vn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Ft(q_(n>=240?n-240:n+120,r,i),q_(n,r,i),q_(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new vn(bC(this.h),uh(this.s),uh(this.l),dh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let n=dh(this.opacity);return`${n===1?"hsl(":"hsla("}${bC(this.h)}, ${uh(this.s)*100}%, ${uh(this.l)*100}%${n===1?")":`, ${n})`}`}}));function bC(n){return n=(n||0)%360,n<0?n+360:n}function uh(n){return Math.max(0,Math.min(1,n||0))}function q_(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}function G_(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function TC(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,c=i<e-1?n[i+2]:2*s-r;return G_((t-i/e)*e,o,r,s,c)}}function CC(n){var e=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*e),r=n[(i+e-1)%e],s=n[i%e],o=n[(i+1)%e],c=n[(i+2)%e];return G_((t-i/e)*e,r,s,o,c)}}var H_=n=>()=>n;function ZV(n,e){return function(t){return n+t*e}}function eL(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function AC(n){return(n=+n)==1?fh:function(e,t){return t-e?eL(e,t,n):H_(isNaN(e)?t:e)}}function fh(n,e){var t=e-n;return t?ZV(n,t):H_(isNaN(n)?e:n)}var ph=function n(e){var t=AC(e);function i(r,s){var o=t((r=Ks(r)).r,(s=Ks(s)).r),c=t(r.g,s.g),l=t(r.b,s.b),u=fh(r.opacity,s.opacity);return function(d){return r.r=o(d),r.g=c(d),r.b=l(d),r.opacity=u(d),r+""}}return i.gamma=n,i}(1);function SC(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,c;for(o=0;o<t;++o)c=Ks(e[o]),i[o]=c.r||0,r[o]=c.g||0,s[o]=c.b||0;return i=n(i),r=n(r),s=n(s),c.opacity=1,function(l){return c.r=i(l),c.g=r(l),c.b=s(l),c+""}}}var tL=SC(TC),nL=SC(CC);function tn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var K_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W_=new RegExp(K_.source,"g");function iL(n){return function(){return n}}function rL(n){return function(e){return n(e)+""}}function Y_(n,e){var t=K_.lastIndex=W_.lastIndex=0,i,r,s,o=-1,c=[],l=[];for(n=n+"",e=e+"";(i=K_.exec(n))&&(r=W_.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),c[o]?c[o]+=s:c[++o]=s),(i=i[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,l.push({i:o,x:tn(i,r)})),t=W_.lastIndex;return t<e.length&&(s=e.slice(t),c[o]?c[o]+=s:c[++o]=s),c.length<2?l[0]?rL(l[0].x):iL(e):(e=l.length,function(u){for(var d=0,p;d<e;++d)c[(p=l[d]).i]=p.x(u);return c.join("")})}var xC=180/Math.PI,mh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q_(n,e,t,i,r,s){var o,c,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*i)&&(t-=n*l,i-=e*l),(c=Math.sqrt(t*t+i*i))&&(t/=c,i/=c,l/=c),n*i<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*xC,skewX:Math.atan(l)*xC,scaleX:o,scaleY:c}}var gh;function RC(n){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?mh:Q_(e.a,e.b,e.c,e.d,e.e,e.f)}function DC(n){return n==null?mh:(gh||(gh=document.createElementNS("http://www.w3.org/2000/svg","g")),gh.setAttribute("transform",n),(n=gh.transform.baseVal.consolidate())?(n=n.matrix,Q_(n.a,n.b,n.c,n.d,n.e,n.f)):mh)}function PC(n,e,t,i){function r(u){return u.length?u.pop()+" ":""}function s(u,d,p,g,v,S){if(u!==p||d!==g){var P=v.push("translate(",null,e,null,t);S.push({i:P-4,x:tn(u,p)},{i:P-2,x:tn(d,g)})}else(p||g)&&v.push("translate("+p+e+g+t)}function o(u,d,p,g){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),g.push({i:p.push(r(p)+"rotate(",null,i)-2,x:tn(u,d)})):d&&p.push(r(p)+"rotate("+d+i)}function c(u,d,p,g){u!==d?g.push({i:p.push(r(p)+"skewX(",null,i)-2,x:tn(u,d)}):d&&p.push(r(p)+"skewX("+d+i)}function l(u,d,p,g,v,S){if(u!==p||d!==g){var P=v.push(r(v)+"scale(",null,",",null,")");S.push({i:P-4,x:tn(u,p)},{i:P-2,x:tn(d,g)})}else(p!==1||g!==1)&&v.push(r(v)+"scale("+p+","+g+")")}return function(u,d){var p=[],g=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,p,g),o(u.rotate,d.rotate,p,g),c(u.skewX,d.skewX,p,g),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,p,g),u=d=null,function(v){for(var S=-1,P=g.length,k;++S<P;)p[(k=g[S]).i]=k.x(v);return p.join("")}}}var X_=PC(RC,"px, ","px)","deg)"),J_=PC(DC,", ",")",")");var sL=1e-12;function kC(n){return((n=Math.exp(n))+1/n)/2}function oL(n){return((n=Math.exp(n))-1/n)/2}function aL(n){return((n=Math.exp(2*n))-1)/(n+1)}var Z_=function n(e,t,i){function r(s,o){var c=s[0],l=s[1],u=s[2],d=o[0],p=o[1],g=o[2],v=d-c,S=p-l,P=v*v+S*S,k,M;if(P<sL)M=Math.log(g/u)/e,k=function(I){return[c+I*v,l+I*S,u*Math.exp(e*I*M)]};else{var B=Math.sqrt(P),H=(g*g-u*u+i*P)/(2*u*t*B),Q=(g*g-u*u-i*P)/(2*g*t*B),be=Math.log(Math.sqrt(H*H+1)-H),ae=Math.log(Math.sqrt(Q*Q+1)-Q);M=(ae-be)/e,k=function(I){var _=I*M,y=kC(be),b=u/(t*B)*(y*aL(e*_+be)-oL(be));return[c+b*v,l+b*S,u*y/kC(e*_+be)]}}return k.duration=M*1e3*e/Math.SQRT2,k}return r.rho=function(s){var o=Math.max(.001,+s),c=o*o,l=c*c;return n(o,c,l)},r}(Math.SQRT2,2,4);var Ys=0,oc=0,sc=0,MC=1e3,_h,ac,yh=0,Mr=0,vh=0,cc=typeof performance=="object"&&performance.now?performance:Date,NC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function uc(){return Mr||(NC(cL),Mr=cc.now()+vh)}function cL(){Mr=0}function lc(){this._call=this._time=this._next=null}lc.prototype=wh.prototype={constructor:lc,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?uc():+t)+(e==null?0:+e),!this._next&&ac!==this&&(ac?ac._next=this:_h=this,ac=this),this._call=n,this._time=t,ey()},stop:function(){this._call&&(this._call=null,this._time=1/0,ey())}};function wh(n,e,t){var i=new lc;return i.restart(n,e,t),i}function FC(){uc(),++Ys;for(var n=_h,e;n;)(e=Mr-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ys}function OC(){Mr=(yh=cc.now())+vh,Ys=oc=0;try{FC()}finally{Ys=0,uL(),Mr=0}}function lL(){var n=cc.now(),e=n-yh;e>MC&&(vh-=e,yh=n)}function uL(){for(var n,e=_h,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:_h=t);ac=n,ey(i)}function ey(n){if(!Ys){oc&&(oc=clearTimeout(oc));var e=n-Mr;e>24?(n<1/0&&(oc=setTimeout(OC,n-cc.now()-vh)),sc&&(sc=clearInterval(sc))):(sc||(yh=cc.now(),sc=setInterval(lL,MC)),Ys=1,NC(OC))}}function bh(n,e,t){var i=new lc;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var hL=Ja("start","end","cancel","interrupt"),dL=[],UC=0,VC=1,Eh=2,Ih=3,LC=4,Th=5,hc=6;function Gi(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;fL(n,t,{name:e,index:i,group:r,on:hL,tween:dL,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:UC})}function dc(n,e){var t=Ze(n,e);if(t.state>UC)throw new Error("too late; already scheduled");return t}function dt(n,e){var t=Ze(n,e);if(t.state>Ih)throw new Error("too late; already running");return t}function Ze(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function fL(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=wh(s,0,t.time);function s(u){t.state=VC,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var d,p,g,v;if(t.state!==VC)return l();for(d in i)if(v=i[d],v.name===t.name){if(v.state===Ih)return bh(o);v.state===LC?(v.state=hc,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[d]):+d<e&&(v.state=hc,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[d])}if(bh(function(){t.state===Ih&&(t.state=LC,t.timer.restart(c,t.delay,t.time),c(u))}),t.state=Eh,t.on.call("start",n,n.__data__,t.index,t.group),t.state===Eh){for(t.state=Ih,r=new Array(g=t.tween.length),d=0,p=-1;d<g;++d)(v=t.tween[d].value.call(n,n.__data__,t.index,t.group))&&(r[++p]=v);r.length=p+1}}function c(u){for(var d=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=Th,1),p=-1,g=r.length;++p<g;)r[p].call(n,d);t.state===Th&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=hc,t.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function Hi(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>Eh&&i.state<Th,i.state=hc,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function jC(n){return this.each(function(){Hi(this,n)})}function pL(n,e){var t,i;return function(){var r=dt(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,c=i.length;o<c;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function mL(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=dt(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var c={name:e,value:t},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=c;break}l===u&&r.push(c)}s.tween=r}}function BC(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=Ze(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?pL:mL)(t,n,e))}function Qs(n,e,t){var i=n._id;return n.each(function(){var r=dt(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return Ze(r,i).value[e]}}function Ch(n,e){var t;return(typeof e=="number"?tn:e instanceof qi?ph:(t=qi(e))?(e=t,ph):Y_)(n,e)}function gL(n){return function(){this.removeAttribute(n)}}function _L(n){return function(){this.removeAttributeNS(n.space,n.local)}}function yL(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function vL(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function wL(n,e,t){var i,r,s;return function(){var o,c=t(this),l;return c==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=c+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c)))}}function bL(n,e,t){var i,r,s;return function(){var o,c=t(this),l;return c==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=c+"",o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c)))}}function zC(n,e){var t=ci(n),i=t==="transform"?J_:Ch;return this.attrTween(n,typeof e=="function"?(t.local?bL:wL)(t,i,Qs(this,"attr."+n,e)):e==null?(t.local?_L:gL)(t):(t.local?vL:yL)(t,i,e))}function IL(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function EL(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function TL(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&EL(n,s)),t}return r._value=e,r}function CL(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&IL(n,s)),t}return r._value=e,r}function $C(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=ci(n);return this.tween(t,(i.local?TL:CL)(i,e))}function AL(n,e){return function(){dc(this,n).delay=+e.apply(this,arguments)}}function SL(n,e){return e=+e,function(){dc(this,n).delay=e}}function qC(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?AL:SL)(e,n)):Ze(this.node(),e).delay}function xL(n,e){return function(){dt(this,n).duration=+e.apply(this,arguments)}}function RL(n,e){return e=+e,function(){dt(this,n).duration=e}}function GC(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?xL:RL)(e,n)):Ze(this.node(),e).duration}function DL(n,e){if(typeof e!="function")throw new Error;return function(){dt(this,n).ease=e}}function HC(n){var e=this._id;return arguments.length?this.each(DL(e,n)):Ze(this.node(),e).ease}function PL(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;dt(this,n).ease=t}}function WC(n){if(typeof n!="function")throw new Error;return this.each(PL(this._id,n))}function KC(n){typeof n!="function"&&(n=ec(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,c=i[r]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&c.push(l);return new Dt(i,this._parents,this._name,this._id)}function YC(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),c=0;c<s;++c)for(var l=e[c],u=t[c],d=l.length,p=o[c]=new Array(d),g,v=0;v<d;++v)(g=l[v]||u[v])&&(p[v]=g);for(;c<i;++c)o[c]=e[c];return new Dt(o,this._parents,this._name,this._id)}function kL(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function OL(n,e,t){var i,r,s=kL(e)?dc:dt;return function(){var o=s(this,n),c=o.on;c!==i&&(r=(i=c).copy()).on(e,t),o.on=r}}function QC(n,e){var t=this._id;return arguments.length<2?Ze(this.node(),t).on.on(n):this.each(OL(t,n,e))}function ML(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function XC(){return this.on("end.remove",ML(this._id))}function JC(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Pr(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var c=i[o],l=c.length,u=s[o]=new Array(l),d,p,g=0;g<l;++g)(d=c[g])&&(p=n.call(d,d.__data__,g,c))&&("__data__"in d&&(p.__data__=d.__data__),u[g]=p,Gi(u[g],e,t,g,u,Ze(d,t)));return new Dt(s,this._parents,e,t)}function ZC(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Za(n));for(var i=this._groups,r=i.length,s=[],o=[],c=0;c<r;++c)for(var l=i[c],u=l.length,d,p=0;p<u;++p)if(d=l[p]){for(var g=n.call(d,d.__data__,p,l),v,S=Ze(d,t),P=0,k=g.length;P<k;++P)(v=g[P])&&Gi(v,e,t,P,g,S);s.push(g),o.push(d)}return new Dt(s,o,e,t)}var NL=li.prototype.constructor;function eA(){return new NL(this._groups,this._parents)}function FL(n,e){var t,i,r;return function(){var s=$i(this,n),o=(this.style.removeProperty(n),$i(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function tA(n){return function(){this.style.removeProperty(n)}}function VL(n,e,t){var i,r=t+"",s;return function(){var o=$i(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function LL(n,e,t){var i,r,s;return function(){var o=$i(this,n),c=t(this),l=c+"";return c==null&&(l=c=(this.style.removeProperty(n),$i(this,n))),o===l?null:o===i&&l===r?s:(r=l,s=e(i=o,c))}}function UL(n,e){var t,i,r,s="style."+e,o="end."+s,c;return function(){var l=dt(this,n),u=l.on,d=l.value[s]==null?c||(c=tA(e)):void 0;(u!==t||r!==d)&&(i=(t=u).copy()).on(o,r=d),l.on=i}}function nA(n,e,t){var i=(n+="")=="transform"?X_:Ch;return e==null?this.styleTween(n,FL(n,i)).on("end.style."+n,tA(n)):typeof e=="function"?this.styleTween(n,LL(n,i,Qs(this,"style."+n,e))).each(UL(this._id,n)):this.styleTween(n,VL(n,i,e),t).on("end.style."+n,null)}function jL(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function BL(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&jL(n,o,t)),i}return s._value=e,s}function iA(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,BL(n,e,t??""))}function zL(n){return function(){this.textContent=n}}function $L(n){return function(){var e=n(this);this.textContent=e??""}}function rA(n){return this.tween("text",typeof n=="function"?$L(Qs(this,"text",n)):zL(n==null?"":n+""))}function qL(n){return function(e){this.textContent=n.call(this,e)}}function GL(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&qL(r)),e}return i._value=n,i}function sA(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,GL(n))}function oA(){for(var n=this._name,e=this._id,t=Ah(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,l,u=0;u<c;++u)if(l=o[u]){var d=Ze(l,e);Gi(l,n,t,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Dt(i,this._parents,n,t)}function aA(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var c={value:o},l={value:function(){--r===0&&s()}};t.each(function(){var u=dt(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(l)),u.on=e}),r===0&&s()})}var HL=0;function Dt(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function cA(n){return li().transition(n)}function Ah(){return++HL}var hi=li.prototype;Dt.prototype=cA.prototype={constructor:Dt,select:JC,selectAll:ZC,selectChild:hi.selectChild,selectChildren:hi.selectChildren,filter:KC,merge:YC,selection:eA,transition:oA,call:hi.call,nodes:hi.nodes,node:hi.node,size:hi.size,empty:hi.empty,each:hi.each,on:QC,attr:zC,attrTween:$C,style:nA,styleTween:iA,text:rA,textTween:sA,remove:XC,tween:BC,delay:qC,duration:GC,ease:HC,easeVarying:WC,end:aA,[Symbol.iterator]:hi[Symbol.iterator]};function Sh(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var WL={time:null,delay:0,duration:250,ease:Sh};function KL(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function lA(n){var e,t;n instanceof Dt?(e=n._id,n=n._name):(e=Ah(),(t=WL).time=uc(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],c=o.length,l,u=0;u<c;++u)(l=o[u])&&Gi(l,n,e,u,o,t||KL(l,e));return new Dt(i,this._parents,n,e)}li.prototype.interrupt=jC;li.prototype.transition=lA;var{abs:V6,max:L6,min:U6}=Math;function uA(n){return[+n[0],+n[1]]}function YL(n){return[uA(n[0]),uA(n[1])]}var j6={name:"x",handles:["w","e"].map(ty),input:function(n,e){return n==null?null:[[+n[0],e[0][1]],[+n[1],e[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},B6={name:"y",handles:["n","s"].map(ty),input:function(n,e){return n==null?null:[[e[0][0],+n[0]],[e[1][0],+n[1]]]},output:function(n){return n&&[n[0][1],n[1][1]]}},z6={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ty),input:function(n){return n==null?null:YL(n)},output:function(n){return n}};function ty(n){return{type:n}}var ny=Math.PI,iy=2*ny,Nr=1e-6,QL=iy-Nr;function hA(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function XL(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return hA;let t=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*t)/t+i[r]}}var Fr=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hA:XL(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,r){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,t,i,r,s,o){this._append`C${+e},${+t},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,i,r,s){if(e=+e,t=+t,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,l=i-e,u=r-t,d=o-e,p=c-t,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>Nr)if(!(Math.abs(p*l-u*d)>Nr)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let v=i-o,S=r-c,P=l*l+u*u,k=v*v+S*S,M=Math.sqrt(P),B=Math.sqrt(g),H=s*Math.tan((ny-Math.acos((P+g-k)/(2*M*B)))/2),Q=H/B,be=H/M;Math.abs(Q-1)>Nr&&this._append`L${e+Q*d},${t+Q*p}`,this._append`A${s},${s},0,0,${+(p*v>d*S)},${this._x1=e+be*l},${this._y1=t+be*u}`}}arc(e,t,i,r,s,o){if(e=+e,t=+t,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let c=i*Math.cos(r),l=i*Math.sin(r),u=e+c,d=t+l,p=1^o,g=o?r-s:s-r;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Nr||Math.abs(this._y1-d)>Nr)&&this._append`L${u},${d}`,i&&(g<0&&(g=g%iy+iy),g>QL?this._append`A${i},${i},0,1,${p},${e-c},${t-l}A${i},${i},0,1,${p},${this._x1=u},${this._y1=d}`:g>Nr&&this._append`A${i},${i},0,${+(g>=ny)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function dA(){return new Fr}dA.prototype=Fr.prototype;function JL(n){var e=0,t=n.children,i=t&&t.length;if(!i)e=1;else for(;--i>=0;)e+=t[i].value;n.value=e}function fA(){return this.eachAfter(JL)}function pA(n,e){let t=-1;for(let i of this)n.call(e,i,++t,this);return this}function mA(n,e){for(var t=this,i=[t],r,s,o=-1;t=i.pop();)if(n.call(e,t,++o,this),r=t.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function gA(n,e){for(var t=this,i=[t],r=[],s,o,c,l=-1;t=i.pop();)if(r.push(t),s=t.children)for(o=0,c=s.length;o<c;++o)i.push(s[o]);for(;t=r.pop();)n.call(e,t,++l,this);return this}function _A(n,e){let t=-1;for(let i of this)if(n.call(e,i,++t,this))return i}function yA(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)t+=i[r].value;e.value=t})}function vA(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function wA(n){for(var e=this,t=ZL(e,n),i=[e];e!==t;)e=e.parent,i.push(e);for(var r=i.length;n!==t;)i.splice(r,0,n),n=n.parent;return i}function ZL(n,e){if(n===e)return n;var t=n.ancestors(),i=e.ancestors(),r=null;for(n=t.pop(),e=i.pop();n===e;)r=n,n=t.pop(),e=i.pop();return r}function bA(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function IA(){return Array.from(this)}function EA(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function TA(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*CA(){var n=this,e,t=[n],i,r,s;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,i=n.children)for(r=0,s=i.length;r<s;++r)t.push(i[r]);while(t.length)}function di(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=nU)):e===void 0&&(e=tU);for(var t=new Vr(n),i,r=[t],s,o,c,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,c=l-1;c>=0;--c)r.push(s=o[c]=new Vr(o[c])),s.parent=i,s.depth=i.depth+1;return t.eachBefore(rU)}function eU(){return di(this).eachBefore(iU)}function tU(n){return n.children}function nU(n){return Array.isArray(n)?n[1]:null}function iU(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function rU(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function Vr(n){this.data=n,this.depth=this.height=0,this.parent=null}Vr.prototype=di.prototype={constructor:Vr,count:fA,each:pA,eachAfter:gA,eachBefore:mA,find:_A,sum:yA,sort:vA,path:wA,ancestors:bA,descendants:IA,leaves:EA,links:TA,copy:eU,[Symbol.iterator]:CA};function sU(n,e){return n.parent===e.parent?1:2}function ry(n){var e=n.children;return e?e[0]:n.t}function sy(n){var e=n.children;return e?e[e.length-1]:n.t}function oU(n,e,t){var i=t/(e.i-n.i);e.c-=i,e.s+=t,n.c+=i,e.z+=t,e.m+=t}function aU(n){for(var e=0,t=0,i=n.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(t+=s.c)}function cU(n,e,t){return n.a.parent===e.parent?n.a:t}function xh(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}xh.prototype=Object.create(Vr.prototype);function lU(n){for(var e=new xh(n,0),t,i=[e],r,s,o,c;t=i.pop();)if(s=t._.children)for(t.children=new Array(c=s.length),o=c-1;o>=0;--o)i.push(r=t.children[o]=new xh(s[o],o)),r.parent=t;return(e.parent=new xh(null,0)).children=[e],e}function Rh(){var n=sU,e=1,t=1,i=null;function r(u){var d=lU(u);if(d.eachAfter(s),d.parent.m=-d.z,d.eachBefore(o),i)u.eachBefore(l);else{var p=u,g=u,v=u;u.eachBefore(function(B){B.x<p.x&&(p=B),B.x>g.x&&(g=B),B.depth>v.depth&&(v=B)});var S=p===g?1:n(p,g)/2,P=S-p.x,k=e/(g.x+S+P),M=t/(v.depth||1);u.eachBefore(function(B){B.x=(B.x+P)*k,B.y=B.depth*M})}return u}function s(u){var d=u.children,p=u.parent.children,g=u.i?p[u.i-1]:null;if(d){aU(u);var v=(d[0].z+d[d.length-1].z)/2;g?(u.z=g.z+n(u._,g._),u.m=u.z-v):u.z=v}else g&&(u.z=g.z+n(u._,g._));u.parent.A=c(u,g,u.parent.A||p[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function c(u,d,p){if(d){for(var g=u,v=u,S=d,P=g.parent.children[0],k=g.m,M=v.m,B=S.m,H=P.m,Q;S=sy(S),g=ry(g),S&&g;)P=ry(P),v=sy(v),v.a=u,Q=S.z+B-g.z-k+n(S._,g._),Q>0&&(oU(cU(S,u,p),u,Q),k+=Q,M+=Q),B+=S.m,k+=g.m,H+=P.m,M+=v.m;S&&!sy(v)&&(v.t=S,v.m+=B-M),g&&!ry(P)&&(P.t=g,P.m+=k-H,p=u)}return p}function l(u){u.x*=e,u.y=u.depth*t}return r.separation=function(u){return arguments.length?(n=u,r):n},r.size=function(u){return arguments.length?(i=!1,e=+u[0],t=+u[1],r):i?null:[e,t]},r.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],t=+u[1],r):i?[e,t]:null},r}function oy(n){return function(){return n}}function AA(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{let i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return n},()=>new Fr(e)}var SA=Array.prototype.slice;function xA(n){return n[0]}function RA(n){return n[1]}var ay=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}};function DA(n){return new ay(n,!1)}function uU(n){return n.source}function hU(n){return n.target}function PA(n){let e=uU,t=hU,i=xA,r=RA,s=null,o=null,c=AA(l);function l(){let u,d=SA.call(arguments),p=e.apply(this,d),g=t.apply(this,d);if(s==null&&(o=n(u=c())),o.lineStart(),d[0]=p,o.point(+i.apply(this,d),+r.apply(this,d)),d[0]=g,o.point(+i.apply(this,d),+r.apply(this,d)),o.lineEnd(),u)return o=null,u+""||null}return l.source=function(u){return arguments.length?(e=u,l):e},l.target=function(u){return arguments.length?(t=u,l):t},l.x=function(u){return arguments.length?(i=typeof u=="function"?u:oy(+u),l):i},l.y=function(u){return arguments.length?(r=typeof u=="function"?u:oy(+u),l):r},l.context=function(u){return arguments.length?(u==null?s=o=null:o=n(s=u),l):s},l}function Dh(){return PA(DA)}var fc=n=>()=>n;function cy(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function wn(n,e,t){this.k=n,this.x=e,this.y=t}wn.prototype={constructor:wn,scale:function(n){return n===1?this:new wn(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new wn(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lr=new wn(1,0,0);ly.prototype=wn.prototype;function ly(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Lr;return n.__zoom}function Ph(n){n.stopImmediatePropagation()}function Xs(n){n.preventDefault(),n.stopImmediatePropagation()}function dU(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function fU(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function kA(){return this.__zoom||Lr}function pU(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function mU(){return navigator.maxTouchPoints||"ontouchstart"in this}function gU(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function uy(){var n=dU,e=fU,t=gU,i=pU,r=mU,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,l=Z_,u=Ja("start","zoom","end"),d,p,g,v=500,S=150,P=0,k=10;function M(R){R.property("__zoom",kA).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",y).on("dblclick.zoom",b).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(R,q,F,K){var Z=R.selection?R.selection():R;Z.property("__zoom",kA),R!==Z?be(R,q,F,K):Z.interrupt().each(function(){ae(this,arguments).event(K).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},M.scaleBy=function(R,q,F,K){M.scaleTo(R,function(){var Z=this.__zoom.k,he=typeof q=="function"?q.apply(this,arguments):q;return Z*he},F,K)},M.scaleTo=function(R,q,F,K){M.transform(R,function(){var Z=e.apply(this,arguments),he=this.__zoom,de=F==null?Q(Z):typeof F=="function"?F.apply(this,arguments):F,Re=he.invert(de),Ae=typeof q=="function"?q.apply(this,arguments):q;return t(H(B(he,Ae),de,Re),Z,o)},F,K)},M.translateBy=function(R,q,F,K){M.transform(R,function(){return t(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),o)},null,K)},M.translateTo=function(R,q,F,K,Z){M.transform(R,function(){var he=e.apply(this,arguments),de=this.__zoom,Re=K==null?Q(he):typeof K=="function"?K.apply(this,arguments):K;return t(Lr.translate(Re[0],Re[1]).scale(de.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof F=="function"?-F.apply(this,arguments):-F),he,o)},K,Z)};function B(R,q){return q=Math.max(s[0],Math.min(s[1],q)),q===R.k?R:new wn(q,R.x,R.y)}function H(R,q,F){var K=q[0]-F[0]*R.k,Z=q[1]-F[1]*R.k;return K===R.x&&Z===R.y?R:new wn(R.k,K,Z)}function Q(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function be(R,q,F,K){R.on("start.zoom",function(){ae(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){ae(this,arguments).event(K).end()}).tween("zoom",function(){var Z=this,he=arguments,de=ae(Z,he).event(K),Re=e.apply(Z,he),Ae=F==null?Q(Re):typeof F=="function"?F.apply(Z,he):F,De=Math.max(Re[1][0]-Re[0][0],Re[1][1]-Re[0][1]),Qe=Z.__zoom,st=typeof q=="function"?q.apply(Z,he):q,nn=l(Qe.invert(Ae).concat(De/Qe.k),st.invert(Ae).concat(De/st.k));return function(ot){if(ot===1)ot=st;else{var rn=nn(ot),so=De/rn[2];ot=new wn(so,Ae[0]-rn[0]*so,Ae[1]-rn[1]*so)}de.zoom(null,ot)}})}function ae(R,q,F){return!F&&R.__zooming||new I(R,q)}function I(R,q){this.that=R,this.args=q,this.active=0,this.sourceEvent=null,this.extent=e.apply(R,q),this.taps=0}I.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,q){return this.mouse&&R!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var q=en(this.that).datum();u.call(R,this.that,new cy(R,{sourceEvent:this.sourceEvent,target:M,type:R,transform:this.that.__zoom,dispatch:u}),q)}};function _(R,...q){if(!n.apply(this,arguments))return;var F=ae(this,q).event(R),K=this.__zoom,Z=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,i.apply(this,arguments)))),he=ui(R);if(F.wheel)(F.mouse[0][0]!==he[0]||F.mouse[0][1]!==he[1])&&(F.mouse[1]=K.invert(F.mouse[0]=he)),clearTimeout(F.wheel);else{if(K.k===Z)return;F.mouse=[he,K.invert(he)],Hi(this),F.start()}Xs(R),F.wheel=setTimeout(de,S),F.zoom("mouse",t(H(B(K,Z),F.mouse[0],F.mouse[1]),F.extent,o));function de(){F.wheel=null,F.end()}}function y(R,...q){if(g||!n.apply(this,arguments))return;var F=R.currentTarget,K=ae(this,q,!0).event(R),Z=en(R.view).on("mousemove.zoom",Ae,!0).on("mouseup.zoom",De,!0),he=ui(R,F),de=R.clientX,Re=R.clientY;B_(R.view),Ph(R),K.mouse=[he,this.__zoom.invert(he)],Hi(this),K.start();function Ae(Qe){if(Xs(Qe),!K.moved){var st=Qe.clientX-de,nn=Qe.clientY-Re;K.moved=st*st+nn*nn>P}K.event(Qe).zoom("mouse",t(H(K.that.__zoom,K.mouse[0]=ui(Qe,F),K.mouse[1]),K.extent,o))}function De(Qe){Z.on("mousemove.zoom mouseup.zoom",null),z_(Qe.view,K.moved),Xs(Qe),K.event(Qe).end()}}function b(R,...q){if(n.apply(this,arguments)){var F=this.__zoom,K=ui(R.changedTouches?R.changedTouches[0]:R,this),Z=F.invert(K),he=F.k*(R.shiftKey?.5:2),de=t(H(B(F,he),K,Z),e.apply(this,q),o);Xs(R),c>0?en(this).transition().duration(c).call(be,de,K,R):en(this).call(M.transform,de,K,R)}}function T(R,...q){if(n.apply(this,arguments)){var F=R.touches,K=F.length,Z=ae(this,q,R.changedTouches.length===K).event(R),he,de,Re,Ae;for(Ph(R),de=0;de<K;++de)Re=F[de],Ae=ui(Re,this),Ae=[Ae,this.__zoom.invert(Ae),Re.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==Ae[2]&&(Z.touch1=Ae,Z.taps=0):(Z.touch0=Ae,he=!0,Z.taps=1+!!d);d&&(d=clearTimeout(d)),he&&(Z.taps<2&&(p=Ae[0],d=setTimeout(function(){d=null},v)),Hi(this),Z.start())}}function A(R,...q){if(this.__zooming){var F=ae(this,q).event(R),K=R.changedTouches,Z=K.length,he,de,Re,Ae;for(Xs(R),he=0;he<Z;++he)de=K[he],Re=ui(de,this),F.touch0&&F.touch0[2]===de.identifier?F.touch0[0]=Re:F.touch1&&F.touch1[2]===de.identifier&&(F.touch1[0]=Re);if(de=F.that.__zoom,F.touch1){var De=F.touch0[0],Qe=F.touch0[1],st=F.touch1[0],nn=F.touch1[1],ot=(ot=st[0]-De[0])*ot+(ot=st[1]-De[1])*ot,rn=(rn=nn[0]-Qe[0])*rn+(rn=nn[1]-Qe[1])*rn;de=B(de,Math.sqrt(ot/rn)),Re=[(De[0]+st[0])/2,(De[1]+st[1])/2],Ae=[(Qe[0]+nn[0])/2,(Qe[1]+nn[1])/2]}else if(F.touch0)Re=F.touch0[0],Ae=F.touch0[1];else return;F.zoom("touch",t(H(de,Re,Ae),F.extent,o))}}function w(R,...q){if(this.__zooming){var F=ae(this,q).event(R),K=R.changedTouches,Z=K.length,he,de;for(Ph(R),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),he=0;he<Z;++he)de=K[he],F.touch0&&F.touch0[2]===de.identifier?delete F.touch0:F.touch1&&F.touch1[2]===de.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(de=ui(de,this),Math.hypot(p[0]-de[0],p[1]-de[1])<k)){var Re=en(this).on("dblclick.zoom");Re&&Re.apply(this,arguments)}}}return M.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:fc(+R),M):i},M.filter=function(R){return arguments.length?(n=typeof R=="function"?R:fc(!!R),M):n},M.touchable=function(R){return arguments.length?(r=typeof R=="function"?R:fc(!!R),M):r},M.extent=function(R){return arguments.length?(e=typeof R=="function"?R:fc([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),M):e},M.scaleExtent=function(R){return arguments.length?(s[0]=+R[0],s[1]=+R[1],M):[s[0],s[1]]},M.translateExtent=function(R){return arguments.length?(o[0][0]=+R[0][0],o[1][0]=+R[1][0],o[0][1]=+R[0][1],o[1][1]=+R[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(R){return arguments.length?(t=R,M):t},M.duration=function(R){return arguments.length?(c=+R,M):c},M.interpolate=function(R){return arguments.length?(l=R,M):l},M.on=function(){var R=u.on.apply(u,arguments);return R===u?M:R},M.clickDistance=function(R){return arguments.length?(P=(R=+R)*R,M):Math.sqrt(P)},M.tapDistance=function(R){return arguments.length?(k=+R,M):k},M}var kh=class n{constructor(e){this.platformId=e;ol(this.platformId)&&(this.width=document.body.clientWidth,this.height=document.body.clientHeight,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerHeight=this.height-this.margin.top-this.margin.bottom)}treeData;treeInfo={nr_people:0,inverted:!1};width=0;height=0;innerWidth=0;innerHeight=0;svg;g;treeLayout;margin={top:0,right:0,bottom:0,left:0};ngAfterViewInit(){this.svg=en("svg#tree-svg").attr("width",this.width).attr("height",this.height),this.svg.append("defs").append("pattern").attr("id","grid-pattern").attr("width",20).attr("height",20).attr("patternUnits","userSpaceOnUse").append("path").attr("d","M 20 0 L 0 0 0 20").attr("fill","none").attr("stroke","#ddd").attr("stroke-width",.5),this.svg.append("rect").attr("width",this.width).attr("height",this.height).attr("fill","url(#grid-pattern)"),this.g=this.svg.append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`);let t=uy().on("zoom",o=>{this.g.attr("transform",o.transform)});this.svg.call(t);let i=.4,r=this.width/25,s=this.height/3;if(this.svg.call(t.transform,Lr.translate(r,s).scale(i)),this.treeData){let c=di(this.treeData).height,l=Math.max(c*30,200),u=this.innerWidth*10;this.treeLayout=Rh().size([l,u]);let d=this.treeData.info;console.log("Info Data:",d),d.inverted?(console.log("rendering inverted tree"),this.renderInvertedTree()):(console.log("rendering not inverted tree"),this.renderTree())}}ngOnChanges(){if(this.treeData){let t=di(this.treeData).height,i=t*900,r=t*60;this.treeLayout=Rh().size([i,r]);let s=this.treeData.info;console.log("Info Data:",s),console.log(s.inverted),console.log(s.nr_people),s.inverted?(console.log("rendering inverted tree"),this.renderInvertedTree()):(console.log("rendering not inverted tree"),this.renderTree())}}renderTree(){console.log("Rendering tree with data:",this.treeData),this.g.selectAll("path").remove(),this.g.selectAll("g.node").remove();let e=di(this.treeData),t=this.treeLayout(e),i=t.links(),r=t.descendants(),s=Dh().x(c=>c.x).y(c=>c.y);console.log("Links:",i),console.log("Nodes:",r),this.g.selectAll("path").data(i).enter().append("path").attr("d",c=>s(c)).attr("stroke","#add8e6").attr("fill","none");let o=this.g.selectAll("g.node").data(e.descendants(),c=>c.data.name).enter().append("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${c.y})`);o.append("text").attr("dy","0.32em").style("font-size",c=>1-c.depth*.1+"em").text(c=>`${c.data?.data?.name||"missing"} & ${c.data?.data?.pname||""}`),o.append("text").attr("dy","1.5em").style("font-size",c=>1-c.depth*.1+"em").attr("fill","gray").text(c=>`${c.data?.data?.by||""} - ${c.data?.data?.dy||""}, ${c.data?.data?.pby||""} - ${c.data?.data?.pdy||""}`)}renderInvertedTree(){console.log("Rendering inverted tree with data:",this.treeData),this.g.selectAll("path").remove(),this.g.selectAll("g.node").remove();let e=di(this.treeData),t=this.treeLayout(e),i=t.links(),r=t.descendants(),s=Dh().x(c=>c.x).y(c=>-c.y);console.log("Links:",i),console.log("Nodes:",r),this.g.selectAll("path").data(i).enter().append("path").attr("d",c=>s(c)).attr("stroke","#add8e6").attr("fill","none");let o=this.g.selectAll("g.node").data(e.descendants(),c=>c.data.name).enter().append("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${-(c.y??0)})`);o.append("text").attr("dy","0.32em").style("font-size",c=>1-c.depth*.1+"em").text(c=>`${c.data?.data?.name||"missing"}`),o.append("text").attr("dy","1.5em").style("font-size",c=>1-c.depth*.1+"em").attr("fill","gray").text(c=>`${c.data?.data?.by||""} - ${c.data?.data?.dy||""} `)}static \u0275fac=function(t){return new(t||n)(O(xt))};static \u0275cmp=Ee({type:n,selectors:[["ftapp-tree-area"]],inputs:{treeData:"treeData",treeInfo:"treeInfo"},features:[St],decls:3,vars:0,consts:[[1,"scrollable-container"],["id","bar"],["id","tree-svg"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"figure",1),Gc(),vt(2,"svg",2),fe()())},styles:[".scrollable-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;position:relative;border:3px solid #ccc;background-color:#fff}svg[_ngcontent-%COMP%]{width:100%;height:100%;overflow:visible}path[_ngcontent-%COMP%]{fill:none;stroke:#57bdc3}text[_ngcontent-%COMP%]{text-shadow:-1px -1px 3px white,-1px 1px 3px white,1px -1px 3px white,1px 1px 3px white}"]})};function yU(n,e){if(n&1){let t=zn();oe(0,"mat-grid-tile",8),He("click",function(){let r=an(t).$implicit,s=Ai();return cn(s.onTileClick(r))}),je(1),fe()}if(n&2){let t=e.$implicit;Ro("background",t.color),hn("colspan",t.cols)("rowspan",t.rows),kt(),Wd(" ",t.text," ")}}var Oh=class n{parentId=1;jsonData;firestore=j(Cr);tiletext="Inverted";tiles=[];ngOnInit(){this.fetchAvailableCollections().subscribe(e=>{this.tiles=e.map((t,i)=>({text:t,cols:2,rows:1,color:this.getRandomColor()})),console.log(this.tiles)}),this.fetchPersonWithChildren(this.parentId,"Inverted").subscribe(e=>{this.jsonData=e,console.log("Final JSON Data:",JSON.stringify(this.jsonData,null,2))})}fetchPersonWithChildren(e,t,i=!0){let r=$u(this.firestore,`${t}/${e}`),s=i?$u(this.firestore,`${t}/information`):null;return new Lt(o=>{let c=()=>new Lt(l=>{qu(r).then(u=>{if(u.exists()){let d=u.data();if(!d.children||d.children.length===0)l.next({data:d,children:[]}),l.complete();else{let p=d.children.map(g=>this.fetchPersonWithChildren(g,t,!1).pipe(En(v=>(console.error(`Error fetching child ${g}:`,v),G(null)))));Hr(p).subscribe(g=>{let v=g.filter(S=>S!==null);l.next({data:ge(N({},d),{children:void 0}),children:v}),l.complete()})}}else console.error(`No such document for person ID: ${e}`),l.next(null),l.complete()}).catch(u=>{console.error(`Error fetching person ${e}:`,u),l.next(null),l.complete()})});i?qu(s).then(l=>{if(!l.exists()){console.error(`No such document for collection info in: ${t}`),o.next(null),o.complete();return}let u=l.data();c().subscribe(d=>{o.next(N({info:u},d)),o.complete()})}).catch(l=>{console.error(`Error fetching collection info: ${l}`),o.next(null),o.complete()}):c().subscribe(l=>{o.next(l),o.complete()})})}fetchAvailableCollections(){let e=$u(this.firestore,"Collections_metadata","1");return console.log("Fetching available collections..."),new Lt(t=>{qu(e).then(i=>{if(i.exists()){console.log("Firestore document received:",i.data());let r=i.data().Collections;r&&r.length>0?(console.log("Collections found:",r),t.next(r)):(console.warn("No collections found in the document."),t.next([]))}else console.warn("Document not found."),t.next([]);t.complete()}).catch(i=>{console.error("Error fetching collections metadata:",i),t.next([]),t.complete()})})}getRandomColor(){let e=["#0000FF","#00FFFF","#33FFFF","#66FFFF","#3333FF","#000066","#000088","#000099","#1E90FF","#4682B4","#5F9EA0"];return e[Math.floor(Math.random()*e.length)]}onTileClick(e){this.tiletext=e.text,console.log("Tile clicked:",e.text),this.fetchPersonWithChildren(this.parentId,e.text).subscribe(t=>{this.jsonData=t,console.log("Final JSON Data:",JSON.stringify(this.jsonData,null,2))})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["ftapp-desktop"]],decls:13,vars:3,consts:[[1,"table-grid"],["hideToggle","",1,"table-expansion-panel"],[1,"exp-panel-title"],["cols","4","rowHeight","100px"],[3,"colspan","rowspan","background"],[1,"scrollable-container"],[3,"treeData"],[1,"tree-info"],[3,"click","colspan","rowspan"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title",2),je(5," See other trees "),fe()(),oe(6,"mat-grid-list",3),uw(7,yU,2,5,"mat-grid-tile",4,lw),fe()()()(),oe(9,"div",5),vt(10,"ftapp-tree-area",6),fe(),oe(11,"p",7),je(12),fe()),t&2&&(kt(7),hw(i.tiles),kt(3),hn("treeData",i.jsonData),kt(2),fw("",i.tiletext," tree: ",i.jsonData==null||i.jsonData.info==null?null:i.jsonData.info.nr_people," people"))},dependencies:[uT,P_,IT,N_,F_,bT,kh],styles:[".mat-tab-group[_ngcontent-%COMP%], .mat-tab[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]{width:100%}.mat-elevation-z8[_ngcontent-%COMP%]{width:100%;min-width:100%}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{padding:16px;text-align:left;min-width:120px}.mat-header-row[_ngcontent-%COMP%], .mat-row[_ngcontent-%COMP%]{width:100%}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{flex:1 1 auto;word-wrap:break-word}.table-expansion-panel[_ngcontent-%COMP%]{background-color:#fff;color:#fff;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;cursor:pointer}.exp-panel-title[_ngcontent-%COMP%]{color:#000;text-shadow:none}.table-grid[_ngcontent-%COMP%]{margin-top:50px}.tree-info[_ngcontent-%COMP%]{color:#9b9b9bc2;font-size:12px;margin:10px}.horizontal-layout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;justify-content:flex-start}.expansion-panel-label[_ngcontent-%COMP%]{margin-right:20px;font-weight:700}.slider-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.button-container[_ngcontent-%COMP%], .button-primary[_ngcontent-%COMP%]{margin-left:20px}@media screen and (max-width: 768px){.horizontal-layout[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.button-container[_ngcontent-%COMP%], .button-primary[_ngcontent-%COMP%]{margin-left:0;margin-top:10px}.slider-container[_ngcontent-%COMP%]{width:100%}}.slider-value-label[_ngcontent-%COMP%]{margin-right:10px;font-size:14px;font-weight:700;color:#000}.button-container[_ngcontent-%COMP%]{margin-top:20px}.button-primary[_ngcontent-%COMP%]{background-color:#00f;color:#fff;padding:10px 20px;border-radius:5px;display:flex;align-items:center;justify-content:center}.button-primary[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}.button-add-person[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;margin-top:20px}.button-add-person[_ngcontent-%COMP%]:hover{background-color:#006400}  .mat-slider-track-fill{background-color:#00f!important}  .mat-slider-thumb{background-color:#00f!important}  .mat-slider-thumb-label{background-color:#00f!important;color:#fff!important}  .mat-slider-ticks{background-color:#00f!important}  .mat-slider-thumb-label-text{color:#fff!important}  .mat-slider-track-background{background-color:#0000ff4d!important}  .mat-slider-ripple{background-color:#0000ff4d!important}.scrollable-card[_ngcontent-%COMP%]{display:flex;height:100px;border:1px solid #0d6efd}.scrollable-content[_ngcontent-%COMP%]{height:100%;padding:16px;box-sizing:border-box}.scrollable-container[_ngcontent-%COMP%]{width:100%;height:600px;overflow:auto;position:relative;border:1px solid #ccc;background-color:#fff}.mat-tab-group[_ngcontent-%COMP%]{margin-top:40px}.year_display[_ngcontent-%COMP%]{margin:15px}.edit-expansion-panel[_ngcontent-%COMP%]{margin-bottom:40px}"]})};var wU=20,hy=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new re,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=wU){return this._platform.isBrowser?new Lt(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(Fd(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):G()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Ne(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=si(i),s=t.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Nd(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(D(ne),D(qe),D(J,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),MA=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new re,this._elementScrolled=new Lt(o=>this.ngZone.runOutsideAngular(()=>Nd(this.elementRef.nativeElement,"scroll").pipe(Tn(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&Bs()!=_n.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Bs()==_n.INVERTED?t.left=t.right:Bs()==_n.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Hu()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return t=="start"?t=o?r:i:t=="end"&&(t=o?i:r),o&&Bs()==_n.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Bs()==_n.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(hy),O(ne),O(oi,8))}}static{this.\u0275dir=me({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),bU=20,dy=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new re,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect(),o=-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,c=-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(t=bU){return t>0?this._change.pipe(Fd(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(D(qe),D(ne),D(J,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var OA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})(),fy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Bi,OA,Bi,OA]})}}return n})();var FA=Hu(),py=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ge(-this._previousScrollPosition.left),e.style.top=Ge(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),FA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),FA&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var my=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ne(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Mh=class{enable(){}disable(){}attach(){}};function gy(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,s=n.right<t.left,o=n.left>t.right;return i||r||s||o})}function VA(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,s=n.left<t.left,o=n.right>t.right;return i||r||s||o})}var _y=class{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();gy(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},IU=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Mh,this.close=o=>new my(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new py(this._viewportRuler,this._document),this.reposition=o=>new _y(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(D(hy),D(dy),D(ne),D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pc=class{constructor(e){if(this.scrollStrategy=new Mh,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var yy=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var qA=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(D(J))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),EU=(()=>{class n extends qA{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(ne,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),TU=(()=>{class n extends qA{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=yn(s)},this._clickListener=s=>{let o=yn(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(LA(d.overlayElement,o)||LA(d.overlayElement,c))break;let p=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(qe),D(ne,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LA(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Zs=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Wa()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(t),Wa()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(D(J),D(qe))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fi=class{constructor(e,t,i,r,s,o,c,l,u,d=!1,p){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=d,this._injector=p,this._backdropElement=null,this._backdropClick=new re,this._attachments=new re,this._detachments=new re,this._locationChanges=Pt.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new re,this._outsidePointerEvents=new re,this._renders=new re,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=An(()=>cw(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ci(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=N(N({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ge(N({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ge(this._config.width),e.height=Ge(this._config.height),e.minWidth=Ge(this._config.minWidth),e.minHeight=Ge(this._config.minHeight),e.maxWidth=Ge(this._config.maxWidth),e.maxHeight=Ge(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){let r=zs(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Tn(Wr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},UA="cdk-overlay-connected-position-bounding-box",CU=/([A-Za-z%]+)$/,vy=class{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new re,this._resizeSubscription=Pt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(UA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),u=this._getOverlayPoint(l,t,c),d=this._getOverlayFit(u,t,i,c);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(d,u,i)){s.push({position:c,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:u,originPoint:l,position:c,overlayRect:t})}if(s.length){let c=null,l=-1;for(let u of s){let d=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);d>l&&(l=d,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ur(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(UA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:c}t.left<0&&(r-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){let s=BA(t),{x:o,y:c}=e,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let d=0-o,p=o+s.width-i.width,g=0-c,v=c+s.height-i.height,S=this._subtractOverflows(s.width,d,p),P=this._subtractOverflows(s.height,g,v),k=S*P;return{visibleArea:k,isCompletelyWithinViewport:s.width*s.height===k,fitsInViewportVertically:P===s.height,fitsInViewportHorizontally:S==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,s=i.right-t.x,o=jA(this._overlayRef.getConfig().minHeight),c=jA(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,u=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=BA(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),u=Math.max(s.left-i.left-e.x,0),d=0,p=0;return r.width<=s.width?d=u||-o:d=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?p=l||-c:p=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:d,y:p},{x:e.x+d,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!AU(this._lastScrollVisibility,i)){let r=new yy(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(t.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(t.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let v=Math.min(i.bottom-e.y+i.top,e.y),S=this._lastBoundingBoxSize.height;s=v*2,o=e.y-v,s>S&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-S/2)}let l=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,u=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,d,p,g;if(u)g=i.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(l)p=e.x,d=i.right-e.x;else{let v=Math.min(i.right-e.x+i.left,e.x),S=this._lastBoundingBoxSize.width;d=v*2,p=e.x-v,d>S&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-S/2)}return{top:o,left:p,bottom:c,right:g,width:d,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Ge(i.height),r.top=Ge(i.top),r.bottom=Ge(i.bottom),r.width=Ge(i.width),r.left=Ge(i.left),r.right=Ge(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Ge(s)),o&&(r.maxWidth=Ge(o))}this._lastBoundingBoxSize=i,Ur(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ur(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ur(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();Ur(i,this._getExactOverlayY(t,e,d)),Ur(i,this._getExactOverlayX(t,e,d))}else i.position="static";let c="",l=this._getOffset(t,"x"),u=this._getOffset(t,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=Ge(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Ge(o.maxWidth):s&&(i.maxWidth="")),Ur(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Ge(s.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=Ge(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:VA(e,i),isOriginOutsideView:gy(e,i),isOverlayClipped:VA(t,i),isOverlayOutsideView:gy(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&zs(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Te)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function Ur(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function jA(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(CU);return!t||t==="px"?parseFloat(e):null}return n||null}function BA(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function AU(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var zA="cdk-global-overlay-wrapper",wy=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(zA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),d=this._xPosition,p=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",v="",S="",P="";l?P="flex-start":d==="center"?(P="center",g?S=p:v=p):g?d==="left"||d==="end"?(P="flex-end",v=p):(d==="right"||d==="start")&&(P="flex-start",S=p):d==="left"||d==="start"?(P="flex-start",v=p):(d==="right"||d==="end")&&(P="flex-end",S=p),e.position=this._cssPosition,e.marginLeft=l?"0":v,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":S,t.justifyContent=P,t.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(zA),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},SU=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new wy}flexibleConnectedTo(t){return new vy(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(D(dy),D(J),D(qe),D(Zs))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xU=0,bn=(()=>{class n{constructor(t,i,r,s,o,c,l,u,d,p,g,v){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=p,this._outsideClickDispatcher=g,this._animationsModuleType=v}create(t){let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new pc(t);return o.direction=o.direction||this._directionality.value,new fi(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ei))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=`cdk-overlay-${xU++}`,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ir)),new Zu(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(D(IU),D(Zs),D(Wc),D(SU),D(EU),D(Ve),D(ne),D(J),D(oi),D($n),D(TU),D(un,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var RU=new $("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.reposition()}});function DU(n){return()=>n.scrollStrategies.reposition()}var PU={provide:RU,deps:[bn],useFactory:DU},Nh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[bn,PU],imports:[Bi,ai,fy,fy]})}}return n})();function kU(n,e){}var jr=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var Ey=(()=>{class n extends Hs{constructor(t,i,r,s,o,c,l,u){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=j(qe),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=j(Ot),this._injector=j(Ve),this._isDestroyed=!1,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let p=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),p},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||Ci(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Ha(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,i=Ha();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ha()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(Qu),O(J,8),O(jr),O(Ya),O(ne),O(fi),O(qs))}}static{this.\u0275cmp=Ee({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Qr(Dr,7),i&2){let s;zt(s=$t())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&lt("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Xe,tt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Cn(0,kU,0,0,"ng-template",0)},dependencies:[Dr],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})(),mc=class{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new re,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!ji(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},OU=new $("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.block()}}),MU=new $("DialogData"),NU=new $("DefaultDialogConfig");var FU=0,Ty=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,c){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new re,this._afterOpenedAtThisLevel=new re,this._ariaHiddenElements=new Map,this.afterAllClosed=Zi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ht(void 0))),this._scrollStrategy=c}open(t,i){let r=this._defaultOptions||new jr;i=N(N({},r),i),i.id=i.id||`cdk-dialog-${FU++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),c=new mc(o,i),l=this._attachContainer(o,c,i);return c.containerInstance=l,this._attachDialogContent(t,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){by(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){by(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),by(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new pc({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:jr,useValue:r},{provide:mc,useValue:i},{provide:fi,useValue:t}],c;r.container?typeof r.container=="function"?c=r.container:(c=r.container.type,o.push(...r.container.providers(r))):c=Ey;let l=new Gs(c,r.viewContainerRef,Ve.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){if(t instanceof nr){let o=this._createInjector(s,i,r,void 0),c={$implicit:s.data,dialogRef:i};s.templateContext&&(c=N(N({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new zi(t,null,c,o))}else{let o=this._createInjector(s,i,r,this._injector),c=r.attachComponentPortal(new Gs(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(t,i,r,s){let o=t.injector||t.viewContainerRef?.injector,c=[{provide:MU,useValue:t.data},{provide:mc,useValue:i}];return t.providers&&(typeof t.providers=="function"?c.push(...t.providers(i,t,r)):c.push(...t.providers)),t.direction&&(!o||!o.get(oi,null,{optional:!0}))&&c.push({provide:oi,useValue:{value:t.direction,change:G()}}),Ve.create({parent:o||s,providers:c})}_removeOpenDialog(t,i){let r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(D(bn),D(Ve),D(NU,8),D(n,12),D(Zs),D(OU))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function by(n,e){let t=n.length;for(;t--;)e(n[t])}var HA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[Ty],imports:[Nh,ai,eT,ai]})}}return n})();function VU(n,e){}var gc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},Cy="mdc-dialog--open",WA="mdc-dialog--opening",KA="mdc-dialog--closing",LU=150,UU=75,jU=(()=>{class n extends Ey{constructor(t,i,r,s,o,c,l,u,d){super(t,i,r,s,o,c,l,d),this._animationMode=u,this._animationStateChanged=new ke,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?QA(this._config.enterAnimationDuration)??LU:0,this._exitAnimationDuration=this._animationsEnabled?QA(this._config.exitAnimationDuration)??UU:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(YA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(WA,Cy)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Cy),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Cy),this._animationsEnabled?(this._hostElement.style.setProperty(YA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(KA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(WA,KA)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(Qu),O(J,8),O(gc),O(Ya),O(ne),O(fi),O(un,8),O(qs))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Jc("id",r._config.id),lt("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),yt("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[Xe,tt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(oe(0,"div",0)(1,"div",1),Cn(2,VU,0,0,"ng-template",2),fe()())},dependencies:[Dr],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return n})(),YA="--mat-dialog-transition-duration";function QA(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?ri(n.substring(0,n.length-2)):n.endsWith("s")?ri(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var Fh=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Fh||{}),Wi=class{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new re,this._beforeClosed=new re,this._state=Fh.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Ne(r=>r.state==="opened"),ct(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ne(r=>r.state==="closed"),ct(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Wr(this.backdropClick(),this.keydownEvents().pipe(Ne(r=>r.keyCode===27&&!this.disableClose&&!ji(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),BU(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ne(t=>t.state==="closing"),ct(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Fh.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Fh.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function BU(n,e,t){return n._closeInteractionType=e,n.close(t)}var zU=new $("MatMdcDialogData"),$U=new $("mat-mdc-dialog-default-options"),qU=new $("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=j(bn);return()=>n.scrollStrategies.block()}});var GU=0,Vh=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,c,l,u){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new re,this._afterOpenedAtThisLevel=new re,this.dialogConfigClass=gc,this.afterAllClosed=Zi(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ht(void 0))),this._dialog=i.get(Ty),this._dialogRefConstructor=Wi,this._dialogContainerType=jU,this._dialogDataToken=zU}open(t,i){let r;i=N(N({},this._defaultOptions||new gc),i),i.id=i.id||`mat-mdc-dialog-${GU++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(t,ge(N({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:jr,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,c,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static{this.\u0275fac=function(i){return new(i||n)(D(bn),D(Ve),D($n,8),D($U,8),D(qU),D(n,12),D(Zs),D(un,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HU=0;var WU=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=KU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(O(Wi,8),O(Te),O(Vh))}}static{this.\u0275dir=me({type:n,standalone:!0})}}return n})(),Lh=(()=>{class n extends WU{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${HU++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=me({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Jc("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Xe]})}}return n})(),Uh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[ow([MA])]})}}return n})();function KU(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}var XA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({providers:[Vh],imports:[HA,Nh,ai,Tt,Tt]})}}return n})();var oS=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(O(Yc),O(Te))}}static{this.\u0275dir=me({type:n})}}return n})(),YU=(()=>{class n extends oS{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=me({type:n,features:[Xe]})}}return n})(),aS=new $("");var QU={provide:aS,useExisting:bo(()=>Wh),multi:!0};function XU(){let n=rr()?rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var JU=new $(""),Wh=(()=>{class n extends oS{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!XU())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(O(Yc),O(Te),O(JU,8))}}static{this.\u0275dir=me({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&He("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ht([QU]),Xe]})}}return n})();function ZU(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var xy=new $(""),cS=new $("");function e2(n){return ZU(n.value)?{required:!0}:null}function JA(n){return null}function lS(n){return n!=null}function uS(n){return il(n)?_t(n):n}function hS(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function dS(n,e){return e.map(t=>t(n))}function t2(n){return!n.validate}function fS(n){return n.map(e=>t2(e)?e:t=>e.validate(t))}function n2(n){if(!n)return null;let e=n.filter(lS);return e.length==0?null:function(t){return hS(dS(t,e))}}function Ry(n){return n!=null?n2(fS(n)):null}function i2(n){if(!n)return null;let e=n.filter(lS);return e.length==0?null:function(t){let i=dS(t,e).map(uS);return Hr(i).pipe(se(hS))}}function Dy(n){return n!=null?i2(fS(n)):null}function ZA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function r2(n){return n._rawValidators}function s2(n){return n._rawAsyncValidators}function Sy(n){return n?Array.isArray(n)?n:[n]:[]}function Bh(n,e){return Array.isArray(n)?n.includes(e):n===e}function eS(n,e){let t=Sy(e);return Sy(n).forEach(r=>{Bh(t,r)||t.push(r)}),t}function tS(n,e){return Sy(e).filter(t=>!Bh(n,t))}var zh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ry(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},no=class extends zh{get formDirective(){return null}get path(){return null}},Ic=class extends zh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},$h=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},o2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},NY=ge(N({},o2),{"[class.ng-submitted]":"isSubmitted"}),pS=(()=>{class n extends $h{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(O(Ic,2))}}static{this.\u0275dir=me({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&yt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Xe]})}}return n})(),mS=(()=>{class n extends $h{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(O(no,10))}}static{this.\u0275dir=me({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&yt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Xe]})}}return n})();var _c="VALID",jh="INVALID",eo="PENDING",yc="DISABLED",io=class{},qh=class extends io{constructor(e,t){super(),this.value=e,this.source=t}},wc=class extends io{constructor(e,t){super(),this.pristine=e,this.source=t}},bc=class extends io{constructor(e,t){super(),this.touched=e,this.source=t}},to=class extends io{constructor(e,t){super(),this.status=e,this.source=t}};function gS(n){return(Kh(n)?n.validators:n)||null}function a2(n){return Array.isArray(n)?Ry(n):n||null}function _S(n,e){return(Kh(e)?e.asyncValidators:n)||null}function c2(n){return Array.isArray(n)?Dy(n):n||null}function Kh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function l2(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Se(1e3,"");if(!i[t])throw new Se(1001,"")}function u2(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Se(1002,"")})}var Gh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Do(()=>this.statusReactive()),this.statusReactive=xo(void 0),this._pristine=Do(()=>this.pristineReactive()),this.pristineReactive=xo(!0),this._touched=Do(()=>this.touchedReactive()),this.touchedReactive=xo(!1),this._events=new re,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return An(this.statusReactive)}set status(e){An(()=>this.statusReactive.set(e))}get valid(){return this.status===_c}get invalid(){return this.status===jh}get pending(){return this.status==eo}get disabled(){return this.status===yc}get enabled(){return this.status!==yc}get pristine(){return An(this.pristineReactive)}set pristine(e){An(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return An(this.touchedReactive)}set touched(e){An(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tS(e,this._rawAsyncValidators))}hasValidator(e){return Bh(this._rawValidators,e)}hasAsyncValidator(e){return Bh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new bc(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new bc(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(N({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new wc(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new wc(!0,i))}markAsPending(e={}){this.status=eo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new to(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yc,this.errors=null,this._forEachChild(r=>{r.disable(ge(N({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,i)),this._events.next(new to(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_c,this._forEachChild(i=>{i.enable(ge(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_c||this.status===eo)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,t)),this._events.next(new to(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yc:_c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=eo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=uS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new to(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?yc:this.errors?jh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eo)?eo:this._anyControlsHaveStatus(jh)?jh:_c}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new wc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new bc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=a2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=c2(this._rawAsyncValidators)}},Hh=class extends Gh{constructor(e,t,i){super(gS(t),_S(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){u2(this,!0,e),Object.keys(e).forEach(i=>{l2(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Py=new $("CallSetDisabledState",{providedIn:"root",factory:()=>ky}),ky="always";function h2(n,e){return[...e.path,n]}function yS(n,e,t=ky){vS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),f2(n,e),m2(n,e),p2(n,e),d2(n,e)}function nS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function d2(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function vS(n,e){let t=r2(n);e.validator!==null?n.setValidators(ZA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=s2(n);e.asyncValidator!==null?n.setAsyncValidators(ZA(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();nS(e._rawValidators,r),nS(e._rawAsyncValidators,r)}function f2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wS(n,e)})}function p2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wS(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function m2(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function g2(n,e){n==null,vS(n,e)}function _2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function y2(n){return Object.getPrototypeOf(n.constructor)===YU}function v2(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function w2(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Wh?t=s:y2(s)?i=s:r=s}),r||i||t||null}var b2={provide:no,useExisting:bo(()=>Oy)},vc=Promise.resolve(),Oy=(()=>{class n extends no{get submitted(){return An(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Do(()=>this.submittedReactive()),this.submittedReactive=xo(!1),this._directives=new Set,this.ngSubmit=new ke,this.form=new Hh({},Ry(t),Dy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vc.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),yS(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vc.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vc.then(()=>{let i=this._findContainer(t.path),r=new Hh({});g2(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vc.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){vc.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),v2(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(O(xy,10),O(cS,10),O(Py,8))}}static{this.\u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&He("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ht([b2]),Xe]})}}return n})();function iS(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var I2=class extends Gh{constructor(e=null,t,i){super(gS(t),_S(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(rS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var E2={provide:Ic,useExisting:bo(()=>My)},sS=Promise.resolve(),My=(()=>{class n extends Ic{constructor(t,i,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new I2,this._registered=!1,this.name="",this.update=new ke,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=w2(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){sS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&wt(i);sS.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?h2(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(O(no,9),O(xy,10),O(cS,10),O(aS,10),O(Ot,8),O(Py,8))}}static{this.\u0275dir=me({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ht([E2]),Xe,St]})}}return n})(),bS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var T2=(()=>{class n{constructor(){this._validator=JA}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):JA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,features:[St]})}}return n})();var C2={provide:xy,useExisting:bo(()=>Ny),multi:!0};var Ny=(()=>{class n extends T2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wt,this.createValidator=t=>e2}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ln(n)))(r||n)}})()}static{this.\u0275dir=me({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&lt("required",r._enabled?"":null)},inputs:{required:"required"},features:[ht([C2]),Xe]})}}return n})();var A2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({})}}return n})();var IS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Py,useValue:t.callSetDisabledState??ky}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[A2]})}}return n})();var x2=["*"],Yh;function R2(){if(Yh===void 0&&(Yh=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Yh=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Yh}function Ec(n){return R2()?.createHTML(n)||n}function ES(n){return Error(`Unable to find icon with the name "${n}"`)}function D2(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function TS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function CS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var pi=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},P2=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new pi(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(Bt.HTML,r);if(!o)throw CS(r);let c=Ec(o);return this._addSvgIconConfig(t,i,new pi("",c,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new pi(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(Bt.HTML,i);if(!s)throw CS(i);let o=Ec(s);return this._addSvgIconSetConfig(t,new pi("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(Bt.RESOURCE_URL,t);if(!i)throw TS(t);let r=this._cachedIconsByUrl.get(i);return r?G(Qh(r)):this._loadSvgIconFromConfig(new pi(t,null)).pipe(Oe(s=>this._cachedIconsByUrl.set(i,s)),se(s=>Qh(s)))}getNamedSvgIcon(t,i=""){let r=AS(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):Ji(ES(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?G(Qh(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(se(i=>Qh(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return G(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(En(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Bt.RESOURCE_URL,o.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),G(null)})));return Hr(s).pipe(se(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw ES(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(o,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Oe(i=>t.svgText=i),se(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?G(null):this._fetchIcon(t).pipe(Oe(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let c=this._svgElementFromString(Ec("<svg></svg>"));return c.appendChild(o),this._setSvgAttributes(c,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(Ec("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:c}=r[s];o!=="id"&&i.setAttribute(o,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw D2();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(Bt.RESOURCE_URL,i);if(!o)throw TS(i);let c=this._inProgressUrlFetches.get(o);if(c)return c;let l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(se(u=>Ec(u)),er(()=>this._inProgressUrlFetches.delete(o)),Wv());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(AS(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return k2(s)?new pi(s.url,null,s.options):new pi(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(D(Hw,8),D(gf),D(J,8),D(tr))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qh(n){return n.cloneNode(!0)}function AS(n,e){return n+":"+e}function k2(n){return!!(n.url&&n.options)}var O2=new $("MAT_ICON_DEFAULT_OPTIONS"),M2=new $("mat-icon-location",{providedIn:"root",factory:N2});function N2(){let n=j(J),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var SS=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],F2=SS.map(n=>`[${n}]`).join(", "),V2=/^url\(['"]?#(.*?)['"]?\)$/,ro=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,c){this._elementRef=t,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Pt.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(F2),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)SS.forEach(o=>{let c=i[s],l=c.getAttribute(o),u=l?l.match(V2):null;if(u){let d=r.get(c);d||(d=[],r.set(c,d)),d.push({name:o,value:u[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ct(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(P2),Eo("aria-hidden"),O(M2),O(tr),O(O2,8))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(lt("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Xc(r.color?"mat-"+r.color:""),yt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",wt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Rt,tt],ngContentSelectors:x2,decls:1,vars:0,template:function(i,r){i&1&&(Kt(),ut(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),xS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})();var Xh=class n{password="test";canEdit=!1;onSubmit(e){let t=e.value.password;console.log(t),t===this.password?(console.log("Privileges granted"),this.canEdit=!0,e.reset(),this.dialogRef.close(this.canEdit)):console.log("Incorrect password"),e.reset()}dialogRef;constructor(e){this.dialogRef=e,this.canEdit=!1}ngOnInit(){}onCloseClick(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||n)(O(Wi))};static \u0275cmp=Ee({type:n,selectors:[["ftapp-logindialog"]],decls:13,vars:0,consts:[["myForm","ngForm"],[1,"dialog-header"],["mat-dialog-title",""],[1,"close-icon",3,"click"],[3,"ngSubmit"],["type","password","id","password","name","password","ngModel","","required",""],["type","submit",1,"btn","btn-primary"]],template:function(t,i){if(t&1){let r=zn();oe(0,"div",1)(1,"h2",2),je(2,"Admin mode required"),fe(),oe(3,"mat-icon",3),He("click",function(){return an(r),cn(i.onCloseClick())}),je(4,"close"),fe()(),oe(5,"mat-dialog-content")(6,"p"),je(7,"Please enter the password!"),fe(),oe(8,"form",4,0),He("ngSubmit",function(){an(r);let o=dw(9);return cn(i.onSubmit(o))}),vt(10,"input",5),oe(11,"button",6),je(12,"Submit"),fe()()()}},dependencies:[bS,Wh,pS,mS,Ny,My,Oy,ro,Lh,Uh],styles:[".mat-mdc-dialog-surface{--mdc-dialog-container-color: white;color:#000;border-radius:8px;padding:24px;position:relative}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin-right:16px}.close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#000;position:absolute;top:10px;right:10px;width:36px;height:36px;display:flex;justify-content:center;align-items:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0003}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.password-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.password-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.password-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start}mat-dialog-actions[_ngcontent-%COMP%]{justify-content:flex-end}  mat-dialog-content p{color:#333}"]})};var Jh=class n{dialogRef;constructor(e){this.dialogRef=e}ngOnInit(){}onCloseClick(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||n)(O(Wi))};static \u0275cmp=Ee({type:n,selectors:[["ftapp-infodialog"]],decls:10,vars:0,consts:[[1,"dialog-header"],["mat-dialog-title",""],[1,"close-icon",3,"click"],["href","https://helpful-sprite-4ff97a.netlify.app"]],template:function(t,i){t&1&&(oe(0,"div",0)(1,"h2",1),je(2,"Website information"),fe(),oe(3,"mat-icon",2),He("click",function(){return i.onCloseClick()}),je(4,"close"),fe()(),oe(5,"mat-dialog-content")(6,"p"),je(7,"This website was created by Boros Titusz, 2024.08.07"),fe(),oe(8,"a",3),je(9,"Contact me here"),fe()())},dependencies:[ro,Lh,Uh],styles:[".mat-mdc-dialog-surface{--mdc-dialog-container-color: white;color:#000;border-radius:8px;padding:24px;position:relative}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin-right:16px}.close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:24px;color:#000;position:absolute;top:10px;right:10px;width:36px;height:36px;display:flex;justify-content:center;align-items:center;background:#fff;border-radius:50%;box-shadow:0 2px 5px #0003}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-dialog-actions[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}"]})};var Zh=class n{canEditSubject=new gt(!1);canEdit$=this.canEditSubject.asObservable();setCanEdit(e){this.canEditSubject.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var U2=["*",[["mat-toolbar-row"]]],j2=["*","mat-toolbar-row"],B2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=me({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return n})(),RS=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(i){return new(i||n)(O(Te),O(qe),O(J))}}static{this.\u0275cmp=Ee({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(i&1&&Si(s,B2,5),i&2){let o;zt(o=$t())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Xc(r.color?"mat-"+r.color:""),yt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[tt],ngContentSelectors:j2,decls:2,vars:0,template:function(i,r){i&1&&(Kt(U2),ut(0),ut(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})();var DS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=te({type:n})}static{this.\u0275inj=ee({imports:[Tt,Tt]})}}return n})();function $2(n,e){if(n&1){let t=zn();oe(0,"button",4),He("click",function(){an(t);let r=Ai();return cn(r.openLoginDialog())}),oe(1,"mat-icon"),je(2,"edit"),fe()()}}function q2(n,e){if(n&1){let t=zn();oe(0,"button",4),He("click",function(){an(t);let r=Ai();return cn(r.saveData())}),oe(1,"mat-icon"),je(2,"check"),fe()()}}var ed=class n{constructor(e,t){this.dialog=e;this.editModeService=t}canEdit=!1;ngOnInit(){}saveData(){this.canEdit=!1,this.editModeService.setCanEdit(!1)}openLoginDialog(){this.dialog.open(Xh).afterClosed().subscribe(t=>{this.canEdit=t===!0,this.editModeService.setCanEdit(this.canEdit),console.log("The dialog was closed"),console.log("canEdit:",this.canEdit)})}openInfoDialog(){this.dialog.open(Jh).afterClosed().subscribe(()=>{console.log("The dialog was closed")})}static \u0275fac=function(t){return new(t||n)(O(Vh),O(Zh))};static \u0275cmp=Ee({type:n,selectors:[["ftapp-header"]],decls:9,vars:2,consts:[[1,"top-toolbar"],[1,"example-spacer"],["mat-icon-button","","class","edit-icon","aria-label","Edit icon",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Info icon",1,"info-icon",3,"click"],["mat-icon-button","","aria-label","Edit icon",1,"edit-icon",3,"click"]],template:function(t,i){t&1&&(oe(0,"mat-toolbar",0)(1,"span"),je(2,"Family Tree App"),fe(),vt(3,"span",1),Cn(4,$2,3,0,"button",2)(5,q2,3,0,"button",2),oe(6,"button",3),He("click",function(){return i.openInfoDialog()}),oe(7,"mat-icon"),je(8,"info"),fe()()()),t&2&&(kt(4),hn("ngIf",!i.canEdit),kt(),hn("ngIf",i.canEdit))},dependencies:[Rw,RS,ro],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.top-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#cfcdcd;color:#000;z-index:1000}"]})};var td=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["ftapp-footer"]],decls:4,vars:0,consts:[[1,"bottom-card"],[1,"footer-content"]],template:function(t,i){t&1&&(oe(0,"footer",0)(1,"div",1)(2,"p"),je(3,"Boros Titusz - 2024"),fe()()())},styles:[".bottom-card[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#333;color:#fff;border-top:1px solid #444;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:center;align-items:center;padding:10px}.footer-content[_ngcontent-%COMP%]{text-align:center}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.footer-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s ease}.footer-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var nd=class n{title="familytreeapp";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ee({type:n,selectors:[["ftapp-root"]],decls:3,vars:0,template:function(t,i){t&1&&vt(0,"ftapp-header")(1,"ftapp-desktop")(2,"ftapp-footer")},dependencies:[Oh,ed,td],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;overflow:hidden}ftapp-top-bar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#fff;color:#fff;z-index:1000;height:64px}ftapp-bottom-card[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;background-color:#333;color:#fff;border-top:1px solid #444;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:center;align-items:center;padding:10px;height:60px}ftapp-desktop[_ngcontent-%COMP%]{margin-top:400px;margin-bottom:400px;padding:16px;height:calc(100vh - 124px);overflow:auto}"]})};var Vy=class{constructor(e,t){this._delegate=e,this.firebase=t,ds(e,new Nt("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),da(this._delegate)))}_getService(e,t=Dn){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Dn){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ds(this._delegate,e)}_addOrOverwriteComponent(e){Cp(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var W2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},PS=new Qt("app-compat","Firebase",W2);function K2(n){let e={},t={__esModule:!0,initializeApp:s,app:r,registerVersion:Fe,setLogLevel:jl,onLog:Ul,apps:null,SDK_VERSION:pn,INTERNAL:{registerComponent:c,removeApp:i,useAsService:l,modularAPIs:Ap}};t.default=t,Object.defineProperty(t,"apps",{get:o});function i(u){delete e[u]}function r(u){if(u=u||Dn,!hp(e,u))throw PS.create("no-app",{appName:u});return e[u]}r.App=n;function s(u,d={}){let p=fs(u,d);if(hp(e,p.name))return e[p.name];let g=new n(p,t);return e[p.name]=g,g}function o(){return Object.keys(e).map(u=>e[u])}function c(u){let d=u.name,p=d.replace("-compat","");if(fn(u)&&u.type==="PUBLIC"){let g=(v=r())=>{if(typeof v[p]!="function")throw PS.create("invalid-app-argument",{appName:d});return v[p]()};u.serviceProps!==void 0&&aa(g,u.serviceProps),t[p]=g,n.prototype[p]=function(...v){return this._getService.bind(this,d).apply(this,u.multipleInstances?v:[])}}return u.type==="PUBLIC"?t[p]:null}function l(u,d){return d==="serverAuth"?null:d}return t}function OS(){let n=K2(Vy);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:OS,extendNamespace:e,createSubscribe:Nl,ErrorFactory:Qt,deepExtend:aa});function e(t){aa(n,t)}return n}var Y2=OS();var kS=new xn("@firebase/app-compat"),Q2="@firebase/app-compat",X2="0.2.42";function J2(n){Fe(Q2,X2,n)}try{let n=sp();if(n.firebase!==void 0){kS.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&kS.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var mi=Y2;J2();var Z2="firebase",ej="10.14.0";mi.registerVersion(Z2,ej,"app-compat");var id=class{constructor(e){return e}},MS=new $("angularfire2.app.options"),NS=new $("angularfire2.app.name");function tj(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=mi.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>mi.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let c=!!module.hot;nj("error",`${o.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new id(o)}var nj=(n,...e)=>{_w()&&typeof console<"u"&&console[n](...e)},ij={provide:id,useFactory:tj,deps:[MS,ne,[new et,NS]]},FS=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:MS,useValue:t},{provide:NS,useValue:i}]}}constructor(t){mi.registerVersion("angularfire",kn.full,"core"),mi.registerVersion("angularfire",kn.full,"app-compat"),mi.registerVersion("angular",Zc.full,t.toString())}static \u0275fac=function(i){return new(i||n)(D(xt))};static \u0275mod=te({type:n});static \u0275inj=ee({providers:[ij]})}return n})();var yQ=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var VS={production:!1,firebase:{apiKey:"AIzaSyBMJV1Vv0VH0Umvs2-rAqTg2c5ptH__rd8",authDomain:"familytreedatabase-c8bf3.firebaseapp.com",projectId:"familytreedatabase-c8bf3",storageBucket:"familytreedatabase-c8bf3.appspot.com",messagingSenderId:"83738970274",appId:"1:83738970274:web:e0c8a989d6646c6c7daffb",measurementId:"G-5GBNW3TGEB"}};var rj="@",sj=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=j(sw,{optional:!0}),this.loadingSchedulerFn=j(oj,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-YRPADUUW.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new Se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Ly(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Hc()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ly=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(rj)}},oj=new $("");function LS(n="animations"){return Qc("NgAsyncAnimations"),Wt([{provide:Kc,useFactory:(e,t,i)=>new sj(e,t,i,n),deps:[J,ul,ne]},{provide:un,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var rd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=te({type:n,bootstrap:[nd]});static \u0275inj=ee({providers:[i0(),Ab(()=>Sb({projectId:"familytreedatabase-c8bf3",appId:"1:83738970274:web:e0c8a989d6646c6c7daffb",storageBucket:"familytreedatabase-c8bf3.appspot.com",apiKey:"AIzaSyBMJV1Vv0VH0Umvs2-rAqTg2c5ptH__rd8",authDomain:"familytreedatabase-c8bf3.firebaseapp.com",messagingSenderId:"83738970274",measurementId:"G-5GBNW3TGEB"})),_I(()=>yI()),zE(()=>$E()),LS()],imports:[t0,kl,FS.initializeApp(VS.firebase),IS,DS,xS,XA,hT,ET]})};e0().bootstrapModule(rd,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
